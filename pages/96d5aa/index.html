<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Javaçº¿ç¨‹ | Gpingã®çŸ¥è¯†åº“</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="è®°å½•å­¦ä¹ è·¯ä¸Šçš„ç‚¹ç‚¹æ»´æ»´">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    <meta name="referrer" content="no-referrer">
    
    <link rel="preload" href="/assets/css/0.styles.18a91880.css" as="style"><link rel="preload" href="/assets/js/app.57e44612.js" as="script"><link rel="preload" href="/assets/js/2.ea24d1ee.js" as="script"><link rel="preload" href="/assets/js/7.8cdfab2f.js" as="script"><link rel="prefetch" href="/assets/js/10.87a7fc9a.js"><link rel="prefetch" href="/assets/js/100.1dde94ac.js"><link rel="prefetch" href="/assets/js/101.a9e60cd0.js"><link rel="prefetch" href="/assets/js/102.41fc30c1.js"><link rel="prefetch" href="/assets/js/103.d66d2d71.js"><link rel="prefetch" href="/assets/js/104.22cb586e.js"><link rel="prefetch" href="/assets/js/105.2e7087a4.js"><link rel="prefetch" href="/assets/js/106.f3ea04f4.js"><link rel="prefetch" href="/assets/js/107.1fe76475.js"><link rel="prefetch" href="/assets/js/108.5419a3bf.js"><link rel="prefetch" href="/assets/js/109.25f5a5d7.js"><link rel="prefetch" href="/assets/js/11.04f09971.js"><link rel="prefetch" href="/assets/js/110.859d6308.js"><link rel="prefetch" href="/assets/js/111.1007812c.js"><link rel="prefetch" href="/assets/js/112.1e3ac86b.js"><link rel="prefetch" href="/assets/js/113.39632362.js"><link rel="prefetch" href="/assets/js/114.cd109b57.js"><link rel="prefetch" href="/assets/js/115.738c1531.js"><link rel="prefetch" href="/assets/js/116.8afaf129.js"><link rel="prefetch" href="/assets/js/117.fc53579f.js"><link rel="prefetch" href="/assets/js/118.21a1f8c4.js"><link rel="prefetch" href="/assets/js/119.0a6295f3.js"><link rel="prefetch" href="/assets/js/12.39c155f1.js"><link rel="prefetch" href="/assets/js/120.b52ae2c0.js"><link rel="prefetch" href="/assets/js/121.a7d78631.js"><link rel="prefetch" href="/assets/js/122.a28e6a23.js"><link rel="prefetch" href="/assets/js/123.c426392a.js"><link rel="prefetch" href="/assets/js/124.c522482b.js"><link rel="prefetch" href="/assets/js/125.92a0ca2c.js"><link rel="prefetch" href="/assets/js/126.c7e332fc.js"><link rel="prefetch" href="/assets/js/127.09fed274.js"><link rel="prefetch" href="/assets/js/128.5b2b776f.js"><link rel="prefetch" href="/assets/js/129.78e15024.js"><link rel="prefetch" href="/assets/js/13.2b02d3de.js"><link rel="prefetch" href="/assets/js/130.97b2a44d.js"><link rel="prefetch" href="/assets/js/131.0453b852.js"><link rel="prefetch" href="/assets/js/132.1d3bd373.js"><link rel="prefetch" href="/assets/js/133.445fa178.js"><link rel="prefetch" href="/assets/js/134.10a04df0.js"><link rel="prefetch" href="/assets/js/135.7966ce33.js"><link rel="prefetch" href="/assets/js/136.03b5e675.js"><link rel="prefetch" href="/assets/js/137.5eed4831.js"><link rel="prefetch" href="/assets/js/138.ed4fba77.js"><link rel="prefetch" href="/assets/js/139.8eb46152.js"><link rel="prefetch" href="/assets/js/14.8881736c.js"><link rel="prefetch" href="/assets/js/140.08e196c0.js"><link rel="prefetch" href="/assets/js/141.b18b66b6.js"><link rel="prefetch" href="/assets/js/142.03a0879c.js"><link rel="prefetch" href="/assets/js/143.22fdbb7b.js"><link rel="prefetch" href="/assets/js/144.31189f97.js"><link rel="prefetch" href="/assets/js/145.75b2fd40.js"><link rel="prefetch" href="/assets/js/146.dbb475d1.js"><link rel="prefetch" href="/assets/js/147.cf107953.js"><link rel="prefetch" href="/assets/js/148.f9449ca9.js"><link rel="prefetch" href="/assets/js/149.6960a659.js"><link rel="prefetch" href="/assets/js/15.b4b6d9e8.js"><link rel="prefetch" href="/assets/js/150.f4a4a9e2.js"><link rel="prefetch" href="/assets/js/151.df5e1fda.js"><link rel="prefetch" href="/assets/js/152.b3ebe11a.js"><link rel="prefetch" href="/assets/js/153.fe7d6b3f.js"><link rel="prefetch" href="/assets/js/154.aeb16b2b.js"><link rel="prefetch" href="/assets/js/155.649eeac2.js"><link rel="prefetch" href="/assets/js/156.72888c77.js"><link rel="prefetch" href="/assets/js/157.dc67f246.js"><link rel="prefetch" href="/assets/js/158.467b9e3c.js"><link rel="prefetch" href="/assets/js/159.384e3132.js"><link rel="prefetch" href="/assets/js/16.e6a03cb0.js"><link rel="prefetch" href="/assets/js/160.75f72beb.js"><link rel="prefetch" href="/assets/js/161.c4bf3ed6.js"><link rel="prefetch" href="/assets/js/162.4e905989.js"><link rel="prefetch" href="/assets/js/163.e10e10ec.js"><link rel="prefetch" href="/assets/js/164.8c3e42dc.js"><link rel="prefetch" href="/assets/js/165.c9509c25.js"><link rel="prefetch" href="/assets/js/166.875c96b9.js"><link rel="prefetch" href="/assets/js/167.ac323741.js"><link rel="prefetch" href="/assets/js/168.6cff22a8.js"><link rel="prefetch" href="/assets/js/169.9a12d5c9.js"><link rel="prefetch" href="/assets/js/17.430c4645.js"><link rel="prefetch" href="/assets/js/170.bb307927.js"><link rel="prefetch" href="/assets/js/171.40dbf2b6.js"><link rel="prefetch" href="/assets/js/172.a11d0b5a.js"><link rel="prefetch" href="/assets/js/173.86064fd6.js"><link rel="prefetch" href="/assets/js/174.1cacb422.js"><link rel="prefetch" href="/assets/js/175.622de80a.js"><link rel="prefetch" href="/assets/js/176.de8449aa.js"><link rel="prefetch" href="/assets/js/177.cb9b484d.js"><link rel="prefetch" href="/assets/js/178.9f5c2068.js"><link rel="prefetch" href="/assets/js/179.ffff651e.js"><link rel="prefetch" href="/assets/js/18.3bb48241.js"><link rel="prefetch" href="/assets/js/180.09a9c21e.js"><link rel="prefetch" href="/assets/js/181.26ed76ed.js"><link rel="prefetch" href="/assets/js/182.17a77c05.js"><link rel="prefetch" href="/assets/js/183.53fafefd.js"><link rel="prefetch" href="/assets/js/184.a67c9279.js"><link rel="prefetch" href="/assets/js/185.5ef13915.js"><link rel="prefetch" href="/assets/js/186.80f2394f.js"><link rel="prefetch" href="/assets/js/187.9966ad44.js"><link rel="prefetch" href="/assets/js/188.03ff6401.js"><link rel="prefetch" href="/assets/js/189.0673741c.js"><link rel="prefetch" href="/assets/js/19.1a1d4b97.js"><link rel="prefetch" href="/assets/js/190.b00a4558.js"><link rel="prefetch" href="/assets/js/191.ffb3dc84.js"><link rel="prefetch" href="/assets/js/192.a1c08248.js"><link rel="prefetch" href="/assets/js/193.12c63e53.js"><link rel="prefetch" href="/assets/js/194.f33b52de.js"><link rel="prefetch" href="/assets/js/195.33c636d4.js"><link rel="prefetch" href="/assets/js/196.6c3d5dd1.js"><link rel="prefetch" href="/assets/js/197.30d1c025.js"><link rel="prefetch" href="/assets/js/198.452ad7b8.js"><link rel="prefetch" href="/assets/js/199.e5ef0a61.js"><link rel="prefetch" href="/assets/js/20.a60725d3.js"><link rel="prefetch" href="/assets/js/200.686c1f4c.js"><link rel="prefetch" href="/assets/js/201.bc89ccf8.js"><link rel="prefetch" href="/assets/js/202.59ba3183.js"><link rel="prefetch" href="/assets/js/203.bcd865f8.js"><link rel="prefetch" href="/assets/js/204.8d50c324.js"><link rel="prefetch" href="/assets/js/205.742dccae.js"><link rel="prefetch" href="/assets/js/206.88d6037a.js"><link rel="prefetch" href="/assets/js/207.190776c5.js"><link rel="prefetch" href="/assets/js/208.fa870ec7.js"><link rel="prefetch" href="/assets/js/209.0ead087a.js"><link rel="prefetch" href="/assets/js/21.6c56b6f5.js"><link rel="prefetch" href="/assets/js/210.4793eafd.js"><link rel="prefetch" href="/assets/js/211.d4701451.js"><link rel="prefetch" href="/assets/js/212.960f82e6.js"><link rel="prefetch" href="/assets/js/213.06afd767.js"><link rel="prefetch" href="/assets/js/214.7b98451d.js"><link rel="prefetch" href="/assets/js/215.78151312.js"><link rel="prefetch" href="/assets/js/216.d2f394e3.js"><link rel="prefetch" href="/assets/js/217.d6868358.js"><link rel="prefetch" href="/assets/js/218.74bb756c.js"><link rel="prefetch" href="/assets/js/219.6239b512.js"><link rel="prefetch" href="/assets/js/22.f0aec2af.js"><link rel="prefetch" href="/assets/js/220.18943948.js"><link rel="prefetch" href="/assets/js/221.952b0093.js"><link rel="prefetch" href="/assets/js/222.908dcde3.js"><link rel="prefetch" href="/assets/js/223.ccc9ca97.js"><link rel="prefetch" href="/assets/js/224.97bb1b38.js"><link rel="prefetch" href="/assets/js/225.f44d9991.js"><link rel="prefetch" href="/assets/js/226.0cbe1043.js"><link rel="prefetch" href="/assets/js/227.0ef2d9fa.js"><link rel="prefetch" href="/assets/js/228.08e2a12e.js"><link rel="prefetch" href="/assets/js/229.9d76c3da.js"><link rel="prefetch" href="/assets/js/23.b75f4ad8.js"><link rel="prefetch" href="/assets/js/230.0130ed60.js"><link rel="prefetch" href="/assets/js/231.cc7bfe6a.js"><link rel="prefetch" href="/assets/js/232.945b8961.js"><link rel="prefetch" href="/assets/js/233.b92a416e.js"><link rel="prefetch" href="/assets/js/234.1e603d6c.js"><link rel="prefetch" href="/assets/js/235.2cbbf26a.js"><link rel="prefetch" href="/assets/js/236.8c2d0914.js"><link rel="prefetch" href="/assets/js/237.6d37c843.js"><link rel="prefetch" href="/assets/js/238.328bfb17.js"><link rel="prefetch" href="/assets/js/239.3cfc2492.js"><link rel="prefetch" href="/assets/js/24.2f8e45fa.js"><link rel="prefetch" href="/assets/js/240.49c464d7.js"><link rel="prefetch" href="/assets/js/241.a117b6ed.js"><link rel="prefetch" href="/assets/js/242.f755edbf.js"><link rel="prefetch" href="/assets/js/243.d465b990.js"><link rel="prefetch" href="/assets/js/244.437ddc10.js"><link rel="prefetch" href="/assets/js/245.2e779b62.js"><link rel="prefetch" href="/assets/js/246.833a9e59.js"><link rel="prefetch" href="/assets/js/247.3642921c.js"><link rel="prefetch" href="/assets/js/248.6fe5d428.js"><link rel="prefetch" href="/assets/js/249.11831ea9.js"><link rel="prefetch" href="/assets/js/25.b05b892c.js"><link rel="prefetch" href="/assets/js/250.8c3ef99e.js"><link rel="prefetch" href="/assets/js/251.520e04bc.js"><link rel="prefetch" href="/assets/js/252.b091ccdc.js"><link rel="prefetch" href="/assets/js/253.b763e62c.js"><link rel="prefetch" href="/assets/js/254.4d336e26.js"><link rel="prefetch" href="/assets/js/255.5d47d641.js"><link rel="prefetch" href="/assets/js/256.baa3ebe3.js"><link rel="prefetch" href="/assets/js/257.2ffae9af.js"><link rel="prefetch" href="/assets/js/258.c604142e.js"><link rel="prefetch" href="/assets/js/259.e74e6cd6.js"><link rel="prefetch" href="/assets/js/26.8ba653c3.js"><link rel="prefetch" href="/assets/js/260.7b310562.js"><link rel="prefetch" href="/assets/js/261.e3b096df.js"><link rel="prefetch" href="/assets/js/262.808f799f.js"><link rel="prefetch" href="/assets/js/263.c560074f.js"><link rel="prefetch" href="/assets/js/264.a46a2877.js"><link rel="prefetch" href="/assets/js/265.d15875dc.js"><link rel="prefetch" href="/assets/js/266.44ad46e6.js"><link rel="prefetch" href="/assets/js/267.744591cc.js"><link rel="prefetch" href="/assets/js/268.b63a806f.js"><link rel="prefetch" href="/assets/js/269.2df63b7b.js"><link rel="prefetch" href="/assets/js/27.2649684b.js"><link rel="prefetch" href="/assets/js/270.96a1e8da.js"><link rel="prefetch" href="/assets/js/271.f7f48faf.js"><link rel="prefetch" href="/assets/js/272.89f1f9b3.js"><link rel="prefetch" href="/assets/js/273.9db895c8.js"><link rel="prefetch" href="/assets/js/28.04ba17fc.js"><link rel="prefetch" href="/assets/js/29.fc9bec6b.js"><link rel="prefetch" href="/assets/js/3.ebf0a2ca.js"><link rel="prefetch" href="/assets/js/30.8f6c8682.js"><link rel="prefetch" href="/assets/js/31.044a932c.js"><link rel="prefetch" href="/assets/js/32.f86a299c.js"><link rel="prefetch" href="/assets/js/33.69f05cd0.js"><link rel="prefetch" href="/assets/js/34.0fcfdfd2.js"><link rel="prefetch" href="/assets/js/35.fbba2378.js"><link rel="prefetch" href="/assets/js/36.b8c83634.js"><link rel="prefetch" href="/assets/js/37.af10d35c.js"><link rel="prefetch" href="/assets/js/38.40c50958.js"><link rel="prefetch" href="/assets/js/39.048effca.js"><link rel="prefetch" href="/assets/js/4.910990f1.js"><link rel="prefetch" href="/assets/js/40.34df2e9c.js"><link rel="prefetch" href="/assets/js/41.0d92c05d.js"><link rel="prefetch" href="/assets/js/42.7d55e3eb.js"><link rel="prefetch" href="/assets/js/43.784d6526.js"><link rel="prefetch" href="/assets/js/44.ab75d220.js"><link rel="prefetch" href="/assets/js/45.1da53631.js"><link rel="prefetch" href="/assets/js/46.2bc19c98.js"><link rel="prefetch" href="/assets/js/47.ebb349e1.js"><link rel="prefetch" href="/assets/js/48.4c790e5f.js"><link rel="prefetch" href="/assets/js/49.a08ffcbf.js"><link rel="prefetch" href="/assets/js/5.1a4306f1.js"><link rel="prefetch" href="/assets/js/50.2a986267.js"><link rel="prefetch" href="/assets/js/51.b6e6ae81.js"><link rel="prefetch" href="/assets/js/52.884f6499.js"><link rel="prefetch" href="/assets/js/53.21026904.js"><link rel="prefetch" href="/assets/js/54.da32fcd7.js"><link rel="prefetch" href="/assets/js/55.8b53dfa1.js"><link rel="prefetch" href="/assets/js/56.f61d102d.js"><link rel="prefetch" href="/assets/js/57.f4da3322.js"><link rel="prefetch" href="/assets/js/58.5e3282e7.js"><link rel="prefetch" href="/assets/js/59.a84fd4f0.js"><link rel="prefetch" href="/assets/js/6.051801a8.js"><link rel="prefetch" href="/assets/js/60.5946ddf4.js"><link rel="prefetch" href="/assets/js/61.18c749ab.js"><link rel="prefetch" href="/assets/js/62.da684abf.js"><link rel="prefetch" href="/assets/js/63.2b0fa974.js"><link rel="prefetch" href="/assets/js/64.2f400a86.js"><link rel="prefetch" href="/assets/js/65.4cf2386f.js"><link rel="prefetch" href="/assets/js/66.188c4b33.js"><link rel="prefetch" href="/assets/js/67.b4f824ac.js"><link rel="prefetch" href="/assets/js/68.d77410fc.js"><link rel="prefetch" href="/assets/js/69.6e24eb76.js"><link rel="prefetch" href="/assets/js/70.5ca51a92.js"><link rel="prefetch" href="/assets/js/71.35d7ed60.js"><link rel="prefetch" href="/assets/js/72.a7853bf5.js"><link rel="prefetch" href="/assets/js/73.a891df77.js"><link rel="prefetch" href="/assets/js/74.e978df7f.js"><link rel="prefetch" href="/assets/js/75.ab5a4524.js"><link rel="prefetch" href="/assets/js/76.ea1c6d79.js"><link rel="prefetch" href="/assets/js/77.711c0174.js"><link rel="prefetch" href="/assets/js/78.35dd5c6c.js"><link rel="prefetch" href="/assets/js/79.d7524830.js"><link rel="prefetch" href="/assets/js/8.badb7759.js"><link rel="prefetch" href="/assets/js/80.7e16490b.js"><link rel="prefetch" href="/assets/js/81.15f00868.js"><link rel="prefetch" href="/assets/js/82.0fe7b576.js"><link rel="prefetch" href="/assets/js/83.fc62b16f.js"><link rel="prefetch" href="/assets/js/84.2a4f555c.js"><link rel="prefetch" href="/assets/js/85.edffb2ef.js"><link rel="prefetch" href="/assets/js/86.69991118.js"><link rel="prefetch" href="/assets/js/87.621cee7a.js"><link rel="prefetch" href="/assets/js/88.5507cc10.js"><link rel="prefetch" href="/assets/js/89.5d34d988.js"><link rel="prefetch" href="/assets/js/9.d4fc76e7.js"><link rel="prefetch" href="/assets/js/90.cc841762.js"><link rel="prefetch" href="/assets/js/91.a24381d0.js"><link rel="prefetch" href="/assets/js/92.cbd5d458.js"><link rel="prefetch" href="/assets/js/93.530432c0.js"><link rel="prefetch" href="/assets/js/94.0524cfdd.js"><link rel="prefetch" href="/assets/js/95.0214ae22.js"><link rel="prefetch" href="/assets/js/96.7942792a.js"><link rel="prefetch" href="/assets/js/97.35d91de8.js"><link rel="prefetch" href="/assets/js/98.eafbdc44.js"><link rel="prefetch" href="/assets/js/99.db414aab.js">
    <link rel="stylesheet" href="/assets/css/0.styles.18a91880.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="ç›®å½•" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Gpingã®çŸ¥è¯†åº“" class="logo"> <span class="site-name can-hide">Gpingã®çŸ¥è¯†åº“</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">ğŸ é¦–é¡µ</a></div><div class="nav-item"><a href="/pages/2dbd58/" class="nav-link">ğŸ“šå°æ‰‹å†Œ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ“–åŸºç¡€" class="dropdown-title"><!----> <span class="title" style="display:;">ğŸ“–åŸºç¡€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/27f9fa/" class="nav-link">Java8æ–°ç‰¹æ€§</a></li><li class="dropdown-item"><!----> <a href="/pages/96d5aa/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Javaå¹¶å‘ç¼–ç¨‹</a></li><li class="dropdown-item"><!----> <a href="/pages/00e30d/" class="nav-link">Javaè™šæ‹Ÿæœº</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ·ï¸æ¡†æ¶" class="dropdown-title"><!----> <span class="title" style="display:;">ğŸ·ï¸æ¡†æ¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/bb39d9/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/pages/24c3ee/" class="nav-link">SpringSecurity</a></li><li class="dropdown-item"><!----> <a href="/pages/1ab42b/" class="nav-link">ThingsBoard</a></li><li class="dropdown-item"><!----> <a href="/pages/fb96c3/" class="nav-link">Jpa</a></li><li class="dropdown-item"><!----> <a href="/pages/34b19f/" class="nav-link">Activiti7</a></li><li class="dropdown-item"><!----> <a href="/pages/d33c62/" class="nav-link">Quartz</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="âš”ï¸ä¸­é—´ä»¶" class="dropdown-title"><!----> <span class="title" style="display:;">âš”ï¸ä¸­é—´ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/c4d661/" class="nav-link">Rabbitmq</a></li><li class="dropdown-item"><!----> <a href="/pages/fe0a41/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/pages/eeddc3/" class="nav-link">Canal</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ“æ•°æ®åº“" class="dropdown-title"><!----> <span class="title" style="display:;">ğŸ“æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0ef684/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/a174cd/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/4cfb74/" class="nav-link">InfluxDB</a></li><li class="dropdown-item"><!----> <a href="/pages/9c8057/" class="nav-link">ClickHouse</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ§°å®ç”¨å·¥å…·" class="dropdown-title"><!----> <span class="title" style="display:;">ğŸ§°å®ç”¨å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/32a577/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/pages/9864be/" class="nav-link">Maven</a></li><li class="dropdown-item"><!----> <a href="/pages/f5b30e/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/pages/290042/" class="nav-link">Arthas</a></li><li class="dropdown-item"><!----> <a href="/pages/9eb455/" class="nav-link">Idea</a></li><li class="dropdown-item"><!----> <a href="/pages/151c97/" class="nav-link">å¼€å‘å·¥å…·</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸè¿ç»´" class="dropdown-title"><!----> <span class="title" style="display:;">ğŸè¿ç»´</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/748b9f/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/pages/4b6fee/" class="nav-link">Linux</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ’¡å…¶ä»–" class="dropdown-title"><!----> <span class="title" style="display:;">ğŸ’¡å…¶ä»–</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9cc0e1/" class="nav-link">é«˜é¡¹</a></li><li class="dropdown-item"><!----> <a href="/pages/10e161/" class="nav-link">ä¸ä¸€æ ·çš„æ ‘å½¢æ„å»ºæ–¹å¼</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">ğŸ é¦–é¡µ</a></div><div class="nav-item"><a href="/pages/2dbd58/" class="nav-link">ğŸ“šå°æ‰‹å†Œ</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ“–åŸºç¡€" class="dropdown-title"><!----> <span class="title" style="display:;">ğŸ“–åŸºç¡€</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/27f9fa/" class="nav-link">Java8æ–°ç‰¹æ€§</a></li><li class="dropdown-item"><!----> <a href="/pages/96d5aa/" aria-current="page" class="nav-link router-link-exact-active router-link-active">Javaå¹¶å‘ç¼–ç¨‹</a></li><li class="dropdown-item"><!----> <a href="/pages/00e30d/" class="nav-link">Javaè™šæ‹Ÿæœº</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ·ï¸æ¡†æ¶" class="dropdown-title"><!----> <span class="title" style="display:;">ğŸ·ï¸æ¡†æ¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/bb39d9/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/pages/24c3ee/" class="nav-link">SpringSecurity</a></li><li class="dropdown-item"><!----> <a href="/pages/1ab42b/" class="nav-link">ThingsBoard</a></li><li class="dropdown-item"><!----> <a href="/pages/fb96c3/" class="nav-link">Jpa</a></li><li class="dropdown-item"><!----> <a href="/pages/34b19f/" class="nav-link">Activiti7</a></li><li class="dropdown-item"><!----> <a href="/pages/d33c62/" class="nav-link">Quartz</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="âš”ï¸ä¸­é—´ä»¶" class="dropdown-title"><!----> <span class="title" style="display:;">âš”ï¸ä¸­é—´ä»¶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/c4d661/" class="nav-link">Rabbitmq</a></li><li class="dropdown-item"><!----> <a href="/pages/fe0a41/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/pages/eeddc3/" class="nav-link">Canal</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ“æ•°æ®åº“" class="dropdown-title"><!----> <span class="title" style="display:;">ğŸ“æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0ef684/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/a174cd/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/4cfb74/" class="nav-link">InfluxDB</a></li><li class="dropdown-item"><!----> <a href="/pages/9c8057/" class="nav-link">ClickHouse</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ§°å®ç”¨å·¥å…·" class="dropdown-title"><!----> <span class="title" style="display:;">ğŸ§°å®ç”¨å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/32a577/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/pages/9864be/" class="nav-link">Maven</a></li><li class="dropdown-item"><!----> <a href="/pages/f5b30e/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/pages/290042/" class="nav-link">Arthas</a></li><li class="dropdown-item"><!----> <a href="/pages/9eb455/" class="nav-link">Idea</a></li><li class="dropdown-item"><!----> <a href="/pages/151c97/" class="nav-link">å¼€å‘å·¥å…·</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸè¿ç»´" class="dropdown-title"><!----> <span class="title" style="display:;">ğŸè¿ç»´</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/748b9f/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/pages/4b6fee/" class="nav-link">Linux</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ’¡å…¶ä»–" class="dropdown-title"><!----> <span class="title" style="display:;">ğŸ’¡å…¶ä»–</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9cc0e1/" class="nav-link">é«˜é¡¹</a></li><li class="dropdown-item"><!----> <a href="/pages/10e161/" class="nav-link">ä¸ä¸€æ ·çš„æ ‘å½¢æ„å»ºæ–¹å¼</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Javaå¹¶å‘ç¼–ç¨‹</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/89d2c1/" class="sidebar-link">è¿›ç¨‹ä¸çº¿ç¨‹</a></li><li><a href="/pages/96d5aa/" aria-current="page" class="active sidebar-link">Javaçº¿ç¨‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/96d5aa/#ä½¿ç”¨çš„æ—¥å¿—æ¡†æ¶" class="sidebar-link">ä½¿ç”¨çš„æ—¥å¿—æ¡†æ¶</a></li><li class="sidebar-sub-header level2"><a href="/pages/96d5aa/#åˆ›å»ºå’Œè¿è¡Œçº¿ç¨‹" class="sidebar-link">åˆ›å»ºå’Œè¿è¡Œçº¿ç¨‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#æ–¹å¼ä¸€-ç›´æ¥ä½¿ç”¨threadç±»" class="sidebar-link">æ–¹å¼ä¸€ï¼šç›´æ¥ä½¿ç”¨Threadç±»</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#æ–¹å¼äºŒ-ä½¿ç”¨-runnable-é…åˆ-thread" class="sidebar-link">æ–¹å¼äºŒï¼šä½¿ç”¨ Runnable é…åˆ Thread</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#æ–¹å¼ä¸‰-futuretask-é…åˆ-thread" class="sidebar-link">æ–¹å¼ä¸‰ï¼šFutureTask é…åˆ Thread</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#å°ç»“" class="sidebar-link">å°ç»“</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#runnableå’ŒcallableæŠ›å‡ºå¼‚å¸¸éªŒè¯" class="sidebar-link">Runnableå’ŒCallableæŠ›å‡ºå¼‚å¸¸éªŒè¯</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/96d5aa/#start-ä¸-run" class="sidebar-link">start ä¸ run</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#è°ƒç”¨run" class="sidebar-link">è°ƒç”¨run</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#è°ƒç”¨start" class="sidebar-link">è°ƒç”¨start</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#å°ç»“-2" class="sidebar-link">å°ç»“</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/96d5aa/#sleep-ä¸-yield" class="sidebar-link">sleep ä¸ yield</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#sleep" class="sidebar-link">sleep()</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#yield" class="sidebar-link">yield()</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/96d5aa/#joinç­‰å¾…æ–¹æ³•è¯¦è§£" class="sidebar-link">joinç­‰å¾…æ–¹æ³•è¯¦è§£</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#ä¸ºä»€ä¹ˆéœ€è¦-join" class="sidebar-link">ä¸ºä»€ä¹ˆéœ€è¦ join</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#åº”ç”¨ä¹‹åŒæ­¥" class="sidebar-link">åº”ç”¨ä¹‹åŒæ­¥</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#ç­‰å¾…å¤šä¸ªç»“æœ" class="sidebar-link">ç­‰å¾…å¤šä¸ªç»“æœ</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#join-æ–¹æ³•çš„ç­¾åå’Œä½¿ç”¨" class="sidebar-link">join()æ–¹æ³•çš„ç­¾åå’Œä½¿ç”¨</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#æœ‰æ—¶æ•ˆçš„join" class="sidebar-link">æœ‰æ—¶æ•ˆçš„join</a></li><li class="sidebar-sub-header level4"><a href="/pages/96d5aa/#ç­‰å¤Ÿæ—¶é—´" class="sidebar-link">ç­‰å¤Ÿæ—¶é—´</a></li><li class="sidebar-sub-header level4"><a href="/pages/96d5aa/#æ²¡æœ‰ç­‰å¤Ÿæ—¶é—´" class="sidebar-link">æ²¡æœ‰ç­‰å¤Ÿæ—¶é—´</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/96d5aa/#interruptä¸­æ–­æ–¹æ³•è¯¦è§£" class="sidebar-link">interruptä¸­æ–­æ–¹æ³•è¯¦è§£</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#ä»€ä¹ˆæ˜¯ä¸­æ–­æœºåˆ¶" class="sidebar-link">ä»€ä¹ˆæ˜¯ä¸­æ–­æœºåˆ¶</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#åœºæ™¯" class="sidebar-link">åœºæ™¯</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#ä¸­æ–­api" class="sidebar-link">ä¸­æ–­API</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#æ‰“æ–­sleep-wait-join-çš„çº¿ç¨‹" class="sidebar-link">æ‰“æ–­sleepï¼Œwaitï¼Œjoin çš„çº¿ç¨‹</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#æ‰“æ–­æ­£å¸¸è¿è¡Œçš„çº¿ç¨‹" class="sidebar-link">æ‰“æ–­æ­£å¸¸è¿è¡Œçš„çº¿ç¨‹</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#ç»ˆæ­¢-æ¨¡å¼ä¹‹ä¸¤é˜¶æ®µç»ˆæ­¢" class="sidebar-link">(ç»ˆæ­¢)æ¨¡å¼ä¹‹ä¸¤é˜¶æ®µç»ˆæ­¢</a></li><li class="sidebar-sub-header level4"><a href="/pages/96d5aa/#é”™è¯¯æ€è·¯" class="sidebar-link">é”™è¯¯æ€è·¯</a></li><li class="sidebar-sub-header level4"><a href="/pages/96d5aa/#ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼" class="sidebar-link">ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼</a></li><li class="sidebar-sub-header level5"><a href="/pages/96d5aa/#åˆ©ç”¨-isinterrupted" class="sidebar-link">åˆ©ç”¨ isInterrupted</a></li><li class="sidebar-sub-header level5"><a href="/pages/96d5aa/#åˆ©ç”¨åœæ­¢æ ‡è®°" class="sidebar-link">åˆ©ç”¨åœæ­¢æ ‡è®°</a></li><li class="sidebar-sub-header level3"><a href="/pages/96d5aa/#æ‰“æ–­-park-çº¿ç¨‹" class="sidebar-link">æ‰“æ–­ park çº¿ç¨‹</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/96d5aa/#ä¸»çº¿ç¨‹ä¸å®ˆæŠ¤çº¿ç¨‹" class="sidebar-link">ä¸»çº¿ç¨‹ä¸å®ˆæŠ¤çº¿ç¨‹</a></li><li class="sidebar-sub-header level2"><a href="/pages/96d5aa/#äº”ç§çŠ¶æ€-æ“ä½œç³»ç»Ÿ-å±‚é¢" class="sidebar-link">äº”ç§çŠ¶æ€ ( æ“ä½œç³»ç»Ÿ å±‚é¢)</a></li><li class="sidebar-sub-header level2"><a href="/pages/96d5aa/#å…­ç§çŠ¶æ€-thread-state" class="sidebar-link">å…­ç§çŠ¶æ€(Thread.State)</a></li></ul></li><li><a href="/pages/eb38c4/" class="sidebar-link">å…±äº«æ¨¡å‹ä¹‹ç®¡ç¨‹(Monitor)</a></li><li><a href="/pages/1e202f/" class="sidebar-link">å…±äº«æ¨¡å‹ä¹‹ç®¡ç¨‹(Monitor)</a></li><li><a href="/pages/f93160/" class="sidebar-link">å¼‚æ­¥ä»»åŠ¡</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java8æ–°ç‰¹æ€§</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="é¦–é¡µ" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>Java</span></li><li data-v-06225672><span data-v-06225672>Javaå¹¶å‘ç¼–ç¨‹</span></li></ul> <div class="info" data-v-06225672><div title="ä½œè€…" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>gping</a></div> <div title="åˆ›å»ºæ—¶é—´" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-12-12</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">ç›®å½•</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Javaçº¿ç¨‹<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="javaçº¿ç¨‹"><a href="#javaçº¿ç¨‹" class="header-anchor">#</a> Javaçº¿ç¨‹</h1> <h2 id="ä½¿ç”¨çš„æ—¥å¿—æ¡†æ¶"><a href="#ä½¿ç”¨çš„æ—¥å¿—æ¡†æ¶" class="header-anchor">#</a> ä½¿ç”¨çš„æ—¥å¿—æ¡†æ¶</h2> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.7.32<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>é…ç½®æ–‡ä»¶ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CONSOLE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FILE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.rolling.RollingFileAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>charset</span><span class="token punctuation">&gt;</span></span>utf-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>charset</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>file</span><span class="token punctuation">&gt;</span></span>log/output.log<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>file</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rollingPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.rolling.FixedWindowRollingPolicy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>log/output.log.%i<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fileNamePattern</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rollingPolicy</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>triggeringPolicy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MaxFileSize</span><span class="token punctuation">&gt;</span></span>1MB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>MaxFileSize</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>triggeringPolicy</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>INFO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CONSOLE<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FILE<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DEBUG<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CONSOLE<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FILE<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="åˆ›å»ºå’Œè¿è¡Œçº¿ç¨‹"><a href="#åˆ›å»ºå’Œè¿è¡Œçº¿ç¨‹" class="header-anchor">#</a> åˆ›å»ºå’Œè¿è¡Œçº¿ç¨‹</h2> <h3 id="æ–¹å¼ä¸€-ç›´æ¥ä½¿ç”¨threadç±»"><a href="#æ–¹å¼ä¸€-ç›´æ¥ä½¿ç”¨threadç±»" class="header-anchor">#</a> æ–¹å¼ä¸€ï¼šç›´æ¥ä½¿ç”¨Threadç±»</h3> <ul><li>ç›´æ¥ç»§æ‰¿Threadç±»ï¼Œé‡å†™å…¶<code>run()</code>æ–¹æ³•ï¼Œæˆ–è€…ä½¿ç”¨lambdaè¡¨è¾¾å¼ä½œä¸ºçº¿ç¨‹ä»»åŠ¡ã€‚</li> <li>çº¿ç¨‹çš„ä»»åŠ¡é€»è¾‘ç›´æ¥æ”¾åœ¨<code>run()</code>æ–¹æ³•å†…ã€‚</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyThread</span>  <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// è¦æ‰§è¡Œçš„ä»»åŠ¡</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;è¦æ‰§è¡Œçš„ä»»åŠ¡&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>è¾“å‡º10:08:57.052 [Thread-0] DEBUG cn.juc.day01.createthread.MyThread - è¦æ‰§è¡Œçš„ä»»åŠ¡</p> <h3 id="æ–¹å¼äºŒ-ä½¿ç”¨-runnable-é…åˆ-thread"><a href="#æ–¹å¼äºŒ-ä½¿ç”¨-runnable-é…åˆ-thread" class="header-anchor">#</a> æ–¹å¼äºŒï¼šä½¿ç”¨ Runnable é…åˆ Thread</h3> <ul><li>å®ç°Runnableæ¥å£ï¼Œå°†ä»»åŠ¡é€»è¾‘æ”¾åœ¨<code>run()</code>æ–¹æ³•ä¸­ã€‚</li> <li>å°†Runnableå®ä¾‹ä¼ é€’ç»™Threadå¯¹è±¡ï¼Œå¹¶å¯åŠ¨çº¿ç¨‹ã€‚</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRunnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Runnable</span> myRunnable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// è¦æ‰§è¡Œçš„ä»»åŠ¡</span>
                log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;è¦æ‰§è¡Œçš„ä»»åŠ¡&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>myRunnable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>è¾“å‡º10:09:09.885 [Thread-0] DEBUG cn.juc.day01.createthread.MyRunnable - è¦æ‰§è¡Œçš„ä»»åŠ¡</p> <h3 id="æ–¹å¼ä¸‰-futuretask-é…åˆ-thread"><a href="#æ–¹å¼ä¸‰-futuretask-é…åˆ-thread" class="header-anchor">#</a> æ–¹å¼ä¸‰ï¼šFutureTask é…åˆ Thread</h3> <ul><li>ä½¿ç”¨FutureTaskåŒ…è£…Callableä»»åŠ¡ï¼ŒCallableå…è®¸çº¿ç¨‹è¿”å›ç»“æœã€‚</li> <li>FutureTaskå®ç°äº†Runnableæ¥å£ï¼Œå¯è¢«Threadæ‰§è¡Œã€‚</li> <li>å¯ä»¥åœ¨ä¸»çº¿ç¨‹ä¸­é€šè¿‡<code>futureTask.get()</code>è·å–çº¿ç¨‹æ‰§è¡Œç»“æœã€‚</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCallable</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// åˆ›å»ºä»»åŠ¡å¯¹è±¡</span>
        <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> futureTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">&quot;è¦æ‰§è¡Œçš„ä»»åŠ¡&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// å°†FutureTaskçš„å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’åˆ°Threadç±»çš„æ„é€ å™¨ä¸­ï¼Œåˆ›å»ºThreadå¯¹è±¡ï¼Œå¹¶è°ƒç”¨start()</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>futureTask<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> result <span class="token operator">=</span> futureTask<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> <span class="token operator">|</span> <span class="token class-name">ExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>è¾“å‡º10:10:22.297 [main] DEBUG cn.juc.day01.createthread.MyCallable - è¦æ‰§è¡Œçš„ä»»åŠ¡</p> <h3 id="å°ç»“"><a href="#å°ç»“" class="header-anchor">#</a> å°ç»“</h3> <ul><li>æ–¹å¼ä¸€å¯¹äºç®€å•çš„ä»»åŠ¡å¯èƒ½æ›´ç›´è§‚ï¼Œä½†æ‰©å±•æ€§è¾ƒå·®ï¼Œå› ä¸ºJavaä¸æ”¯æŒå¤šç»§æ‰¿ã€‚</li> <li>æ–¹å¼äºŒæ›´çµæ´»ï¼Œå› ä¸ºå®ƒå¯ä»¥ç»§æ‰¿å…¶ä»–ç±»ï¼ŒåŒæ—¶å®ç°Runnableæ¥å£ï¼Œæ”¯æŒæ›´å¥½çš„ä»£ç ç»„ç»‡å’Œé‡ç”¨ï¼Œå¼€å‘ä¸­ä¼˜å…ˆé€‰æ‹©å®ç°Runnableæ¥å£çš„æ–¹å¼ã€‚</li> <li>æ–¹å¼ä¸‰å®ç°Callableæ¥å£çš„æ–¹å¼åˆ›å»ºçº¿ç¨‹çš„å¼ºå¤§ä¹‹å¤„
<ul><li>call()å¯ä»¥æœ‰è¿”å›å€¼çš„</li> <li>call()å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œè¢«å¤–é¢çš„æ“ä½œæ•è·ï¼Œè·å–å¼‚å¸¸çš„ä¿¡æ¯</li> <li>Callableæ˜¯æ”¯æŒæ³›å‹çš„</li></ul></li></ul> <h3 id="runnableå’ŒcallableæŠ›å‡ºå¼‚å¸¸éªŒè¯"><a href="#runnableå’ŒcallableæŠ›å‡ºå¼‚å¸¸éªŒè¯" class="header-anchor">#</a> Runnableå’ŒCallableæŠ›å‡ºå¼‚å¸¸éªŒè¯</h3> <p>Callableæ¥å£çš„call()å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œè¢«å¤–é¢çš„æ“ä½œæ•è·ï¼Œè·å–å¼‚å¸¸çš„ä¿¡æ¯ï¼ŒåŸå› æ˜¯Callableçš„call() throws Exceptionï¼Œè€ŒJavaé‡Œé¢æœ‰è¿™æ ·ä¸€æ¡è§„å®šï¼Œ<strong>å­ç±»ä¸èƒ½æŠ›å‡ºæ¯”çˆ¶ç±»æ›´å¤šçš„å¼‚å¸¸ï¼ˆåŒ…æ‹¬èŒƒå›´æ›´å¤§çš„å¼‚å¸¸ï¼‰</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CallableDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// åˆ›å»ºCallableä»»åŠ¡</span>
        <span class="token class-name">Callable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> callableTask <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// æŠ›å‡ºå¼‚å¸¸</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">&quot;å‘ç”Ÿå¼‚å¸¸å•¦ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// ä½¿ç”¨FutureTaskåŒ…è£…Callableä»»åŠ¡</span>
        <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> futureTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FutureTask</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>callableTask<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>futureTask<span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// è·å–çº¿ç¨‹æ‰§è¡Œç»“æœ</span>
            <span class="token class-name">String</span> result <span class="token operator">=</span> futureTask<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;çº¿ç¨‹æ‰§è¡Œç»“æœ: &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> <span class="token operator">|</span> <span class="token class-name">ExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// æ•è·çº¿ç¨‹ä¸­æŠ›å‡ºçš„å¼‚å¸¸</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ•è·åˆ°å¼‚å¸¸: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>è¾“å‡º</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>æ•è·åˆ°å¼‚å¸¸<span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>IllegalStateException</span><span class="token operator">:</span> å‘ç”Ÿå¼‚å¸¸å•¦ï¼
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Runnableåœ¨runæ–¹æ³•å†…æŠ›å‡ºå¼‚å¸¸ï¼Œå¤–é¢çš„æ“ä½œæ•è·ä¸åˆ°çš„ï¼ŒåŸå› æ˜¯åœ¨Runnableçˆ¶ç±»ä¸­æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥åœ¨å®ç°Runnableæ—¶ä¹Ÿä¸èƒ½æŠ›å‡ºå¼‚å¸¸ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunnableDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// åˆ›å»ºRunnableä»»åŠ¡</span>
        <span class="token class-name">Runnable</span> runnableTask <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token string">&quot;å‘ç”Ÿå¼‚å¸¸å•¦ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>runnableTask<span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// åœ¨è¿™é‡Œæ•è·ä¸åˆ°run()æ–¹æ³•å†…éƒ¨æŠ›å‡ºçš„å¼‚å¸¸</span>
            thread<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰å¾…çº¿ç¨‹æ‰§è¡Œå®Œæ¯•</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;çº¿ç¨‹æ‰§è¡Œå®Œæˆ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// æ•è·çº¿ç¨‹ä¸­æŠ›å‡ºçš„å¼‚å¸¸</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ•è·åˆ°å¼‚å¸¸: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>è¾“å‡º</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Exception</span> in thread <span class="token string">&quot;Thread-0&quot;</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>IllegalStateException</span><span class="token operator">:</span> å‘ç”Ÿå¼‚å¸¸å•¦ï¼
	at <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>day01<span class="token punctuation">.</span>createthread<span class="token punctuation">.</span></span>RunnableDemo</span><span class="token punctuation">.</span>lambda$main$<span class="token function">0</span><span class="token punctuation">(</span><span class="token class-name">RunnableDemo</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">14</span><span class="token punctuation">)</span>
	at <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>Thread</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span>java<span class="token operator">:</span><span class="token number">748</span><span class="token punctuation">)</span>
çº¿ç¨‹æ‰§è¡Œå®Œæˆ
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="start-ä¸-run"><a href="#start-ä¸-run" class="header-anchor">#</a> start ä¸ run</h2> <h3 id="è°ƒç”¨run"><a href="#è°ƒç”¨run" class="header-anchor">#</a> è°ƒç”¨run</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadExample</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä½¿ç”¨Lambdaè¡¨è¾¾å¼åˆ›å»ºRunnableå¯¹è±¡å¹¶é‡å†™å…¶run()æ–¹æ³•</span>
        <span class="token class-name">Runnable</span> myRunnable <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
           log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;çº¿ç¨‹æ‰§è¡Œ: &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// åˆ›å»ºçº¿ç¨‹å¹¶ç›´æ¥è°ƒç”¨run()æ–¹æ³•</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>myRunnable<span class="token punctuation">,</span><span class="token string">&quot;MyThread&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ run() æ–¹æ³•</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸»çº¿ç¨‹æ‰§è¡Œ: &quot;</span> <span class="token operator">+</span>  <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>è¾“å‡º</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token number">10</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">37.846</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">DEBUG</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>day01<span class="token punctuation">.</span>createthread<span class="token punctuation">.</span></span>ThreadExample</span> <span class="token operator">-</span> çº¿ç¨‹æ‰§è¡Œ<span class="token operator">:</span> main
<span class="token number">10</span><span class="token operator">:</span><span class="token number">47</span><span class="token operator">:</span><span class="token number">37.848</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">DEBUG</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>day01<span class="token punctuation">.</span>createthread<span class="token punctuation">.</span></span>ThreadExample</span> <span class="token operator">-</span> ä¸»çº¿ç¨‹æ‰§è¡Œ<span class="token operator">:</span> main
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç¨‹åºä»åœ¨ main çº¿ç¨‹è¿è¡Œï¼Œ run()æ–¹æ³•è°ƒç”¨è¿˜æ˜¯<strong>åŒæ­¥</strong>çš„.</p> <h3 id="è°ƒç”¨start"><a href="#è°ƒç”¨start" class="header-anchor">#</a> è°ƒç”¨start</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadExample1</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä½¿ç”¨Lambdaè¡¨è¾¾å¼åˆ›å»ºRunnableå¯¹è±¡å¹¶é‡å†™å…¶run()æ–¹æ³•</span>
        <span class="token class-name">Runnable</span> myRunnable <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
           log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;çº¿ç¨‹æ‰§è¡Œ: &quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// åˆ›å»ºçº¿ç¨‹å¹¶è°ƒç”¨start()æ–¹æ³•å¯åŠ¨æ–°çº¿ç¨‹</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>myRunnable<span class="token punctuation">,</span><span class="token string">&quot;MyThread&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ run() æ–¹æ³•</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸»çº¿ç¨‹æ‰§è¡Œ: &quot;</span> <span class="token operator">+</span>  <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>è¾“å‡º</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token number">10</span><span class="token operator">:</span><span class="token number">52</span><span class="token operator">:</span><span class="token number">52.789</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> <span class="token constant">DEBUG</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>day01<span class="token punctuation">.</span>createthread<span class="token punctuation">.</span></span>ThreadExample1</span> <span class="token operator">-</span> ä¸»çº¿ç¨‹æ‰§è¡Œ<span class="token operator">:</span> main
<span class="token number">10</span><span class="token operator">:</span><span class="token number">52</span><span class="token operator">:</span><span class="token number">52.789</span> <span class="token punctuation">[</span><span class="token class-name">MyThread</span><span class="token punctuation">]</span> <span class="token constant">DEBUG</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>day01<span class="token punctuation">.</span>createthread<span class="token punctuation">.</span></span>ThreadExample1</span> <span class="token operator">-</span> çº¿ç¨‹æ‰§è¡Œ<span class="token operator">:</span> <span class="token class-name">MyThread</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç¨‹åºåœ¨  MyThread çº¿ç¨‹è¿è¡Œï¼Œ runæ–¹æ³•è°ƒç”¨æ˜¯<strong>å¼‚æ­¥</strong>çš„</p> <h3 id="å°ç»“-2"><a href="#å°ç»“-2" class="header-anchor">#</a> å°ç»“</h3> <ul><li><strong>start() æ–¹æ³•</strong>ï¼šå½“è°ƒç”¨ <code>start()</code> æ–¹æ³•æ—¶ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œå¹¶å°†çº¿ç¨‹çŠ¶æ€ä»æ–°å»ºçŠ¶æ€ï¼ˆNEWï¼‰è½¬å˜ä¸ºå°±ç»ªçŠ¶æ€ï¼ˆRUNNABLEï¼‰ã€‚æ­¤åï¼Œçº¿ç¨‹è°ƒåº¦å™¨å¯ä»¥é€‰æ‹©åˆé€‚çš„æ—¶æœºè®©è¯¥çº¿ç¨‹æ‰§è¡Œï¼Œå¹¶åœ¨æ‰§è¡Œæ—¶è°ƒç”¨å…¶ <code>run()</code> æ–¹æ³•ã€‚</li> <li><strong>run() æ–¹æ³•</strong>ï¼šç›´æ¥è°ƒç”¨ <code>run()</code> æ–¹æ³•å¹¶ä¸ä¼šå¯åŠ¨æ–°çº¿ç¨‹ï¼Œåªæ˜¯åœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œ <code>run()</code> æ–¹æ³•çš„ä»£ç å—ã€‚å› æ­¤ï¼Œçº¿ç¨‹çŠ¶æ€å¹¶ä¸ä¼šæ”¹å˜ï¼Œä»ç„¶æ˜¯å½“å‰çº¿ç¨‹çš„çŠ¶æ€ï¼Œæ¯”å¦‚å¦‚æœåœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨äº† <code>run()</code> æ–¹æ³•ï¼Œçº¿ç¨‹çŠ¶æ€ä»ç„¶æ˜¯ä¸»çº¿ç¨‹çš„çŠ¶æ€ï¼ˆé€šå¸¸æ˜¯è¿è¡ŒçŠ¶æ€ï¼‰ã€‚</li></ul> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/20210409165205761.png" alt="20210409165205761"></p> <h2 id="sleep-ä¸-yield"><a href="#sleep-ä¸-yield" class="header-anchor">#</a> sleep ä¸ yield</h2> <h3 id="sleep"><a href="#sleep" class="header-anchor">#</a> sleep()</h3> <ol><li><p>è°ƒç”¨ <code>Thread.sleep(long millis)</code> ä¼šè®©å½“å‰çº¿ç¨‹ä» <code>RUNNING</code> è¿›å…¥ <code>TIMED_WAITING</code> çŠ¶æ€ï¼ˆé˜»å¡ï¼‰ã€‚è¿™æ„å‘³ç€è¯¥çº¿ç¨‹åœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…ä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œï¼Œå¹¶ä¸”ä¸ä¼šæ¶ˆè€—CPUæ—¶é—´ã€‚</p></li> <li><p>å…¶ä»–çº¿ç¨‹å¯ä»¥ä½¿ç”¨ <code>interrupt()</code> æ–¹æ³•æ‰“æ–­æ­£åœ¨ç¡çœ çš„çº¿ç¨‹ã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹åœ¨ç¡çœ æœŸé—´è¢«ä¸­æ–­ï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ª <code>InterruptedException</code> å¼‚å¸¸ã€‚ä½ å¯ä»¥æ•è·è¿™ä¸ªå¼‚å¸¸å¹¶å†³å®šå¦‚ä½•å¤„ç†ï¼Œä¾‹å¦‚æ¢å¤ä»»åŠ¡æˆ–è€…ä¼˜é›…åœ°ç»ˆæ­¢ç¨‹åºã€‚</p></li> <li><p>å½“ç¡çœ ç»“æŸæ—¶ï¼Œçº¿ç¨‹å¹¶ä¸ä¼šç«‹å³å¾—åˆ°æ‰§è¡Œã€‚çº¿ç¨‹è°ƒåº¦å™¨ä¼šé€‰æ‹©ä¸‹ä¸€ä¸ªè¦è¿è¡Œçš„çº¿ç¨‹ï¼Œè¿™å¯èƒ½ä¸æ˜¯åˆšåˆšé†’æ¥ï¼ˆä» <code>TIMED_WAITING</code> å˜ä¸º <code>RUNNABLE</code>ï¼‰çš„çº¿ç¨‹ã€‚å› æ­¤ï¼Œå³ä½¿ç¡çœ æ—¶é—´ç»“æŸäº†ï¼Œçº¿ç¨‹ä¹Ÿå¯èƒ½ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´æ‰èƒ½å†æ¬¡å¼€å§‹æ‰§è¡Œã€‚</p></li> <li><p>å»ºè®®ç”¨ TimeUnit çš„ sleep ä»£æ›¿ Thread çš„ sleep æ¥è·å¾—æ›´å¥½çš„å¯è¯»æ€§</p> <div class="language-JAVA line-numbers-mode"><pre class="language-java"><code><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MINUTES</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// sleeping for 4 minutes</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SleepExample</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Before sleep: &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æš‚åœ1ç§’</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;After sleep: &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>è¾“å‡º</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token number">15</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">43.183</span> <span class="token punctuation">[</span><span class="token class-name">Thread</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>day01<span class="token punctuation">.</span>createthread<span class="token punctuation">.</span></span>SleepExample</span> <span class="token operator">-</span> <span class="token class-name">Before</span> sleep<span class="token operator">:</span> <span class="token number">0</span>
<span class="token number">15</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">44.196</span> <span class="token punctuation">[</span><span class="token class-name">Thread</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>day01<span class="token punctuation">.</span>createthread<span class="token punctuation">.</span></span>SleepExample</span> <span class="token operator">-</span> <span class="token class-name">After</span> sleep<span class="token operator">:</span> <span class="token number">0</span>
<span class="token number">15</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">44.196</span> <span class="token punctuation">[</span><span class="token class-name">Thread</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>day01<span class="token punctuation">.</span>createthread<span class="token punctuation">.</span></span>SleepExample</span> <span class="token operator">-</span> <span class="token class-name">Before</span> sleep<span class="token operator">:</span> <span class="token number">1</span>
<span class="token number">15</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">45.207</span> <span class="token punctuation">[</span><span class="token class-name">Thread</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>day01<span class="token punctuation">.</span>createthread<span class="token punctuation">.</span></span>SleepExample</span> <span class="token operator">-</span> <span class="token class-name">After</span> sleep<span class="token operator">:</span> <span class="token number">1</span>
<span class="token number">15</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">45.207</span> <span class="token punctuation">[</span><span class="token class-name">Thread</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>day01<span class="token punctuation">.</span>createthread<span class="token punctuation">.</span></span>SleepExample</span> <span class="token operator">-</span> <span class="token class-name">Before</span> sleep<span class="token operator">:</span> <span class="token number">2</span>
<span class="token number">15</span><span class="token operator">:</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">46.213</span> <span class="token punctuation">[</span><span class="token class-name">Thread</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token constant">INFO</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>juc<span class="token punctuation">.</span>day01<span class="token punctuation">.</span>createthread<span class="token punctuation">.</span></span>SleepExample</span> <span class="token operator">-</span> <span class="token class-name">After</span> sleep<span class="token operator">:</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="yield"><a href="#yield" class="header-anchor">#</a> yield()</h3> <ol><li>è°ƒç”¨ <code>Thread.yield()</code> ä¼šè®©å½“å‰çº¿ç¨‹ä» <code>RUNNING</code> è¿›å…¥ <code>RUNNABLE</code> å°±ç»ªçŠ¶æ€**ã€‚æç¤ºå½“å‰çº¿ç¨‹è®©å‡ºæ‰§è¡Œæœºä¼š**ï¼Œè¿™æ„å‘³ç€å½“å‰çº¿ç¨‹ä¸å†ä¸»åŠ¨è¦æ±‚æ‰§è¡Œï¼Œè€Œæ˜¯è®©å…¶ä»–åŒæ ·å¤„äºå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹æœ‰æœºä¼šæ‰§è¡Œã€‚</li> <li>å®é™…ä¸Šï¼Œ<code>yield()</code> æ–¹æ³•çš„å…·ä½“å®ç°ä¾èµ–äºæ“ä½œç³»ç»Ÿçš„ä»»åŠ¡è°ƒåº¦å™¨ã€‚ä¸åŒæ“ä½œç³»ç»Ÿçš„è°ƒåº¦å™¨å¯èƒ½ä¼šæœ‰ä¸åŒçš„è¡Œä¸ºã€‚<strong>æœ‰äº›è°ƒåº¦å™¨å¯èƒ½ä¼šå¿½ç•¥ <code>yield()</code> çš„æç¤º</strong>ï¼Œè€Œæœ‰äº›è°ƒåº¦å™¨å¯èƒ½ä¼šä¼˜å…ˆé€‰æ‹©å…¶ä»–å°±ç»ªçº¿ç¨‹ã€‚</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">YieldExample</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> highPriorityThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;High priority thread running.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æç¤ºå½“å‰çº¿ç¨‹è®©å‡ºæ‰§è¡Œæœºä¼š</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;High Priority&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        highPriorityThread<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token constant">MAX_PRIORITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">Thread</span> lowPriorityThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Low priority thread running.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Low Priority&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        lowPriorityThread<span class="token punctuation">.</span><span class="token function">setPriority</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token constant">MIN_PRIORITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        highPriorityThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lowPriorityThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªçº¿ç¨‹ï¼šä¸€ä¸ªé«˜ä¼˜å…ˆçº§çº¿ç¨‹å’Œä¸€ä¸ªä½ä¼˜å…ˆçº§çº¿ç¨‹ã€‚é«˜ä¼˜å…ˆçº§çº¿ç¨‹ä¸æ–­åœ°è¿è¡Œå¹¶è°ƒç”¨ <code>yield()</code> æ–¹æ³•ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œç”±äºä½ä¼˜å…ˆçº§çº¿ç¨‹çš„ä¼˜å…ˆçº§è¾ƒä½ï¼Œå› æ­¤å³ä½¿é«˜ä¼˜å…ˆçº§çº¿ç¨‹è°ƒç”¨äº† <code>yield()</code>ï¼Œä½ä¼˜å…ˆçº§çº¿ç¨‹ä¹Ÿä¸ä¼šå¾—åˆ°æ‰§è¡Œæœºä¼šã€‚ä½†æ˜¯å®é™…æ•ˆæœå¯èƒ½ä¼šå› æ“ä½œç³»ç»Ÿå’ŒJVMçš„å…·ä½“å®ç°è€Œæœ‰æ‰€ä¸åŒã€‚</p> <h2 id="joinç­‰å¾…æ–¹æ³•è¯¦è§£"><a href="#joinç­‰å¾…æ–¹æ³•è¯¦è§£" class="header-anchor">#</a> joinç­‰å¾…æ–¹æ³•è¯¦è§£</h2> <p>åœ¨Javaå¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œ<code>join()</code>æ–¹æ³•æ˜¯<code>Thread</code>ç±»çš„ä¸€ä¸ªæˆå‘˜æ–¹æ³•ï¼Œå®ƒå…è®¸ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹å®Œæˆå…¶æ‰§è¡Œã€‚ç®€å•æ¥è¯´ï¼Œå½“åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šè°ƒç”¨å¦ä¸€ä¸ªçº¿ç¨‹çš„<code>join()</code>æ–¹æ³•æ—¶ï¼Œè°ƒç”¨çº¿ç¨‹ä¼šæš‚åœæ‰§è¡Œï¼Œç›´åˆ°è¢«è°ƒç”¨çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚</p> <h3 id="ä¸ºä»€ä¹ˆéœ€è¦-join"><a href="#ä¸ºä»€ä¹ˆéœ€è¦-join" class="header-anchor">#</a> ä¸ºä»€ä¹ˆéœ€è¦ join</h3> <p>ä¸‹é¢çš„ä»£ç æ‰§è¡Œï¼Œæ‰“å° r æ˜¯ä»€ä¹ˆï¼Ÿ</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JoinTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">JoinTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;å¼€å§‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;å¼€å§‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;ç»“æŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            r <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;ç»“æœä¸º:{}&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;ç»“æŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>è¾“å‡º</p> <div class="language-ba line-numbers-mode"><pre class="language-text"><code>10:43:41.676 [main] DEBUG org.example.JoinTest - å¼€å§‹
10:43:41.713 [Thread-0] DEBUG org.example.JoinTest - å¼€å§‹
10:43:41.713 [main] DEBUG org.example.JoinTest - ç»“æœä¸º:0
10:43:41.714 [main] DEBUG org.example.JoinTest - ç»“æŸ
10:43:41.717 [Thread-0] DEBUG org.example.JoinTest - ç»“æŸ
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>åˆ†æ</p> <ul><li>å› ä¸ºä¸»çº¿ç¨‹å’Œçº¿ç¨‹ t1 æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼Œt1 çº¿ç¨‹éœ€è¦ 1 ç§’ä¹‹åæ‰èƒ½ç®—å‡º r=10</li> <li>è€Œä¸»çº¿ç¨‹ä¸€å¼€å§‹å°±è¦æ‰“å° r çš„ç»“æœï¼Œæ‰€ä»¥åªèƒ½æ‰“å°å‡º r=0</li></ul> <p>è§£å†³æ–¹æ³•</p> <ul><li>ç”¨ sleep è¡Œä¸è¡Œï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li> <li>ç”¨ joinï¼ŒåŠ åœ¨ t1.start() ä¹‹åå³å¯</li></ul> <h3 id="åº”ç”¨ä¹‹åŒæ­¥"><a href="#åº”ç”¨ä¹‹åŒæ­¥" class="header-anchor">#</a> åº”ç”¨ä¹‹åŒæ­¥</h3> <p>ä»¥è°ƒç”¨æ–¹è§’åº¦æ¥è®²ï¼Œå¦‚æœ</p> <ul><li>éœ€è¦ç­‰å¾…ç»“æœè¿”å›ï¼Œæ‰èƒ½ç»§ç»­è¿è¡Œå°±æ˜¯åŒæ­¥</li> <li>ä¸éœ€è¦ç­‰å¾…ç»“æœè¿”å›ï¼Œå°±èƒ½ç»§ç»­è¿è¡Œå°±æ˜¯å¼‚æ­¥</li></ul> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/202405231054660.png" alt="image-20240523105434624"></p> <h3 id="ç­‰å¾…å¤šä¸ªç»“æœ"><a href="#ç­‰å¾…å¤šä¸ªç»“æœ" class="header-anchor">#</a> ç­‰å¾…å¤šä¸ªç»“æœ</h3> <p>ä¸‹é¢ä»£ç  cost å¤§çº¦å¤šå°‘ç§’ï¼Ÿ</p> <div class="language-JAVA line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JoinTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">JoinTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> r1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> r2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            r1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            r2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;r1: {} r2: {} cost: {}&quot;</span><span class="token punctuation">,</span> r1<span class="token punctuation">,</span> r2<span class="token punctuation">,</span> end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>åˆ†æå¦‚ä¸‹</p> <ul><li>ç¬¬ä¸€ä¸ª joinï¼šç­‰å¾… t1 æ—¶, t2 å¹¶æ²¡æœ‰åœæ­¢, è€Œåœ¨è¿è¡Œ</li> <li>ç¬¬äºŒä¸ª joinï¼š1s å, æ‰§è¡Œåˆ°æ­¤, t2 ä¹Ÿè¿è¡Œäº† 1s, å› æ­¤ä¹Ÿåªéœ€å†ç­‰å¾… 1s</li></ul> <p>å¦‚æœé¢ å€’ä¸¤ä¸ª join å‘¢ï¼Ÿ</p> <p>è¾“å‡º</p> <div class="language-BASH line-numbers-mode"><pre class="language-bash"><code><span class="token number">11</span>:10:01.857 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG org.example.JoinTest - r1: <span class="token number">10</span> r2: <span class="token number">20</span> cost: <span class="token number">2015</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/202405231126272.png" alt="image-20240523112625080"></p> <h3 id="join-æ–¹æ³•çš„ç­¾åå’Œä½¿ç”¨"><a href="#join-æ–¹æ³•çš„ç­¾åå’Œä½¿ç”¨" class="header-anchor">#</a> join()æ–¹æ³•çš„ç­¾åå’Œä½¿ç”¨</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token keyword">long</span> millis<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">join</span><span class="token punctuation">(</span><span class="token keyword">long</span> millis<span class="token punctuation">,</span> <span class="token keyword">int</span> nanos<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è¿™äº›æ˜¯<code>join()</code>æ–¹æ³•çš„ä¸åŒé‡è½½ç‰ˆæœ¬ï¼Œç”¨äºæŒ‡å®šä¸åŒçš„ç­‰å¾…æ—¶é—´ï¼š</p> <ol><li><code>join()</code>ï¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°è¢«è°ƒç”¨<code>join()</code>çš„çº¿ç¨‹ç»“æŸã€‚</li> <li><code>join(long millis)</code>ï¼šé˜»å¡å½“å‰çº¿ç¨‹æœ€å¤šä¸è¶…è¿‡ç»™å®šçš„æ¯«ç§’æ•°ï¼Œå¦‚æœè¢«è°ƒç”¨<code>join()</code>çš„çº¿ç¨‹åœ¨æ­¤ä¹‹å‰å·²ç»ç»“æŸï¼Œåˆ™ç«‹å³è¿”å›ã€‚</li> <li><code>join(long millis, int nanos)</code>ï¼šé˜»å¡å½“å‰çº¿ç¨‹æœ€å¤šä¸è¶…è¿‡ç»™å®šçš„æ¯«ç§’æ•°å’Œçº³ç§’æ•°ï¼Œå¦‚æœè¢«è°ƒç”¨<code>join()</code>çš„çº¿ç¨‹åœ¨æ­¤ä¹‹å‰å·²ç»ç»“æŸï¼Œåˆ™ç«‹å³è¿”å›ã€‚</li></ol> <h3 id="æœ‰æ—¶æ•ˆçš„join"><a href="#æœ‰æ—¶æ•ˆçš„join" class="header-anchor">#</a> æœ‰æ—¶æ•ˆçš„join</h3> <h4 id="ç­‰å¤Ÿæ—¶é—´"><a href="#ç­‰å¤Ÿæ—¶é—´" class="header-anchor">#</a> ç­‰å¤Ÿæ—¶é—´</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestJoin</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token function">testJoin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testJoin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// ä¼‘çœ 1æ¯«ç§’</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                result <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç­‰å¾…t1çº¿ç¨‹å®Œæˆä»»åŠ¡æˆ–è€…è¶…æ—¶ï¼ˆæœ€å¤šç­‰å¾…2ç§’ï¼‰</span>
        t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Result: &quot;</span> <span class="token operator">+</span> result <span class="token operator">+</span> <span class="token string">&quot;, Time elapsed: &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>è¾“å‡º</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Result</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token class-name">Time</span> elapsed<span class="token operator">:</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>åœ¨ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œ<code>t1</code>çº¿ç¨‹çš„ä»»åŠ¡åªéœ€è¦ç¡çœ 1æ¯«ç§’ï¼Œæ‰€ä»¥å®ƒå¯ä»¥åœ¨1æ¯«ç§’å†…å®Œæˆä»»åŠ¡ï¼Œå¹¶å°†å˜é‡<code>result</code>è®¾ç½®ä¸º10ã€‚ç”±äº<code>t1</code>çº¿ç¨‹åœ¨2ç§’å†…å®Œæˆäº†ä»»åŠ¡ï¼Œæ‰€ä»¥<code>join()</code>æ–¹æ³•åœ¨<code>t1</code>çº¿ç¨‹å®Œæˆä»»åŠ¡åç«‹å³è¿”å›ï¼Œä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œå¹¶æ‰“å°å‡ºâ€œResult: 10, Time elapsed: 1â€ã€‚</p> <h4 id="æ²¡æœ‰ç­‰å¤Ÿæ—¶é—´"><a href="#æ²¡æœ‰ç­‰å¤Ÿæ—¶é—´" class="header-anchor">#</a> æ²¡æœ‰ç­‰å¤Ÿæ—¶é—´</h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestJoin2</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> result <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token function">testJoin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">testJoin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// ä¼‘çœ 5s</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                result <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// ç­‰å¾…t1çº¿ç¨‹å®Œæˆä»»åŠ¡æˆ–è€…è¶…æ—¶ï¼ˆæœ€å¤šç­‰å¾…2ç§’ï¼‰</span>
        t1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Result: &quot;</span> <span class="token operator">+</span> result <span class="token operator">+</span> <span class="token string">&quot;, Time elapsed: &quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>è¾“å‡º</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Result</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token class-name">Time</span> elapsed<span class="token operator">:</span> <span class="token number">2007</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>åœ¨ç¬¬äºŒä¸ªä¾‹å­ä¸­ï¼Œ<code>t1</code>çº¿ç¨‹çš„ä»»åŠ¡éœ€è¦ç¡çœ 5ç§’ï¼Œè¿™æ„å‘³ç€å®ƒä¸èƒ½åœ¨2ç§’å†…å®Œæˆä»»åŠ¡ã€‚å› æ­¤ï¼Œå½“ä¸»çº¿ç¨‹è°ƒç”¨<code>join(2000)</code>æ—¶ï¼Œå®ƒä¼šç­‰å¾…2ç§’ï¼Œç„¶åè¶…æ—¶å¹¶è¿”å›ï¼Œå³ä½¿<code>t1</code>çº¿ç¨‹è¿˜æ²¡æœ‰å®Œæˆä»»åŠ¡ã€‚å› æ­¤ï¼Œ<code>result</code>çš„å€¼ä»ç„¶æ˜¯0ï¼Œå› ä¸º<code>t1</code>çº¿ç¨‹æ²¡æœ‰æœºä¼šå°†å…¶è®¾ç½®ä¸º10ã€‚ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œå¹¶æ‰“å°å‡ºâ€œResult: 0, Time elapsed: 2007â€ã€‚</p> <h2 id="interruptä¸­æ–­æ–¹æ³•è¯¦è§£"><a href="#interruptä¸­æ–­æ–¹æ³•è¯¦è§£" class="header-anchor">#</a> interruptä¸­æ–­æ–¹æ³•è¯¦è§£</h2> <h3 id="ä»€ä¹ˆæ˜¯ä¸­æ–­æœºåˆ¶"><a href="#ä»€ä¹ˆæ˜¯ä¸­æ–­æœºåˆ¶" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯ä¸­æ–­æœºåˆ¶</h3> <p>ä¸€ä¸ªçº¿ç¨‹ä¸åº”è¯¥ç”±å…¶ä»–çº¿ç¨‹æ¥å¼ºåˆ¶ä¸­æ–­æˆ–åœæ­¢ï¼Œè€Œæ˜¯åº”è¯¥ç”±çº¿ç¨‹è‡ªå·±è‡ªè¡Œåœæ­¢ï¼Œè‡ªå·±æ¥å†³å®šè‡ªå·±çš„å‘½è¿ã€‚
æ‰€ä»¥ï¼Œ<code>Thread.stop()</code>ã€<code>Thread.suspend()</code>ã€<code>Thread.resume()</code>ç­‰å…³äºå¼ºåˆ¶çº¿ç¨‹åœæ­¢çš„æ–¹æ³•éƒ½å·²ç»åºŸå¼ƒäº†ã€‚</p> <p>åœ¨Javaä¸­ï¼Œæ²¡æœ‰åŠæ³•ç«‹å³åœæ­¢ä¸€ä¸ªçº¿ç¨‹ï¼Œç„¶è€Œåœæ­¢çº¿ç¨‹æœ¬èº«è¿™ä¸ªåŠŸèƒ½æ˜¯å¾ˆé‡è¦çš„ï¼Œæ¯”å¦‚è¯´å–æ¶ˆä¸€ä¸ªè€—æ—¶çš„æ“ä½œã€‚</p> <blockquote><p>å› æ­¤ï¼ŒJavaæä¾›äº†ä¸€ç§ç”¨äºåœæ­¢çº¿ç¨‹çš„åå•†æœºåˆ¶ï¼šä¸­æ–­ï¼Œä¹Ÿå³ä¸­æ–­æ ‡è¯†åå•†æœºåˆ¶ã€‚</p></blockquote> <p>Javaçš„ä¸­æ–­åªæ˜¯ä¸€ç§åå•†æœºåˆ¶ï¼ŒJavaå¹¶æ²¡æœ‰ç»™ä¸­æ–­å¢åŠ ä»»ä½•è¯­æ³•ï¼Œä¸­æ–­çš„è¿‡ç¨‹å®Œå…¨éœ€è¦ç¨‹åºå‘˜è‡ªå·±æ¥å®ç°ã€‚
è‹¥è¦ä¸­æ–­ä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è°ƒç”¨è¯¥çº¿ç¨‹çš„interruptæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¹Ÿä»…ä»…æ˜¯å°†çº¿ç¨‹å¯¹è±¡çš„ä¸­æ–­æ ‡è¯†è®¾ä¸ºtrueã€‚æ¥ç€æˆ‘ä»¬éœ€è¦è‡ªå·±å†™ä»£ç ä¸æ–­åœ°åœ¨ç¨‹åºæ¯ä¸€ä¸ªå…³é”®ç‚¹æ£€æµ‹å½“å‰çº¿ç¨‹çš„æ ‡è¯†ä½ï¼Œå¦‚æœä¸ºtrueï¼Œè¡¨ç¤ºåˆ«çš„çº¿ç¨‹è¯·æ±‚ä¸­æ–­è¿™æ¡çº¿ç¨‹ï¼Œæ­¤æ—¶ç©¶ç«Ÿè¯¥åšäº›ä»€ä¹ˆï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å†™ä»£ç å®ç°ã€‚</p> <p>æ¯ä¸ªçº¿ç¨‹å¯¹è±¡ä¸­éƒ½æœ‰ä¸€ä¸ªä¸­æ–­æ ‡è¯†ä½ï¼Œç”¨äºæ ‡è¯†çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼›è¯¥æ ‡è¯†ä½ä¸ºtrueè¡¨ç¤ºä¸­æ–­ï¼Œä¸ºfalseè¡¨ç¤ºæœªä¸­æ–­ï¼›é€šè¿‡è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„interrupt()æ–¹æ³•å°†è¯¥çº¿ç¨‹çš„ä¸­æ–­æ ‡è¯†ä½è®¾ä¸ºtrueï¼Œå¯ä»¥åœ¨åˆ«çš„çº¿ç¨‹ä¸­è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨è‡ªå·±çš„çº¿ç¨‹ä¸­è°ƒç”¨ã€‚</p> <h3 id="åœºæ™¯"><a href="#åœºæ™¯" class="header-anchor">#</a> åœºæ™¯</h3> <p>å¦‚æœçº¿ç¨‹éœ€è¦æ‰§è¡Œä¸€ä¸ªé•¿æ—¶é—´ä»»åŠ¡ï¼Œå°±å¯èƒ½éœ€è¦èƒ½ä¸­æ–­çº¿ç¨‹ã€‚ä¸­æ–­çº¿ç¨‹å°±æ˜¯å…¶ä»–çº¿ç¨‹ç»™è¯¥çº¿ç¨‹å‘ä¸€ä¸ªä¿¡å·ï¼Œè¯¥çº¿ç¨‹æ”¶åˆ°ä¿¡å·åç»“æŸæ‰§è¡Œ<code>run()</code>æ–¹æ³•ï¼Œä½¿å¾—è‡ªèº«çº¿ç¨‹èƒ½ç«‹åˆ»ç»“æŸè¿è¡Œã€‚</p> <p>æˆ‘ä»¬ä¸¾ä¸ªæ —å­ï¼šå‡è®¾ä»ç½‘ç»œä¸‹è½½ä¸€ä¸ª100Mçš„æ–‡ä»¶ï¼Œå¦‚æœç½‘é€Ÿå¾ˆæ…¢ï¼Œç”¨æˆ·ç­‰å¾—ä¸è€çƒ¦ï¼Œå°±å¯èƒ½åœ¨ä¸‹è½½è¿‡ç¨‹ä¸­ç‚¹â€œå–æ¶ˆâ€ï¼Œè¿™æ—¶ï¼Œç¨‹åºå°±éœ€è¦ä¸­æ–­ä¸‹è½½çº¿ç¨‹çš„æ‰§è¡Œã€‚</p> <h3 id="ä¸­æ–­api"><a href="#ä¸­æ–­api" class="header-anchor">#</a> ä¸­æ–­API</h3> <p><code>interrupt()</code> æ˜¯ <code>Thread</code> ç±»çš„ä¸€ä¸ª<code>å®ä¾‹æ–¹æ³•</code>ï¼Œç”¨äºä¸­æ–­å½“å‰çº¿ç¨‹ã€‚å½“ä¸€ä¸ªçº¿ç¨‹é€šè¿‡ <code>interrupt()</code> æ–¹æ³•è¢«ä¸­æ–­æ—¶ï¼Œå®ƒä¼šæ”¶åˆ°ä¸€ä¸ªä¸­æ–­ä¿¡å·ï¼Œä½†ä¸ä¼šç«‹å³åœæ­¢æ‰§è¡Œã€‚å…·ä½“çš„ä¸­æ–­å“åº”éœ€è¦åœ¨çº¿ç¨‹çš„ä»£ç ä¸­è¿›è¡Œå¤„ç†ã€‚</p> <p><code>isInterrupted()</code> æ˜¯ <code>Thread</code> ç±»çš„å¦ä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œç”¨äºæ£€æŸ¥çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ã€‚é€šè¿‡è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¯ä»¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼Œå¹¶æ ¹æ®éœ€è¦æ‰§è¡Œç›¸åº”çš„é€»è¾‘ã€‚</p> <p><code>static boolean interrupted()</code>ï¼šæ£€æŸ¥å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼Œè¯¥æ–¹æ³•åœ¨è°ƒç”¨åè¿˜ä¼š<strong>æ¸…é™¤è¯¥çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€</strong>ã€‚</p> <h3 id="æ‰“æ–­sleep-wait-join-çš„çº¿ç¨‹"><a href="#æ‰“æ–­sleep-wait-join-çš„çº¿ç¨‹" class="header-anchor">#</a> æ‰“æ–­sleepï¼Œwaitï¼Œjoin çš„çº¿ç¨‹</h3> <blockquote><p>è¿™å‡ ä¸ªæ–¹æ³•éƒ½ä¼šè®©çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ ï¼Œæ‰“æ–­æ—¶ä¼š<strong>ä¼šæ¸…ç©ºæ‰“æ–­çŠ¶æ€</strong></p></blockquote> <p><strong>ä»¥æ‰“æ–­ sleep çš„çº¿ç¨‹ä¸ºä¾‹</strong>ï¼šå½“è°ƒç”¨<code>Thread.sleep(long millis)</code>æ—¶ï¼Œå½“å‰çº¿ç¨‹å°†æš‚åœæ‰§è¡ŒæŒ‡å®šçš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚å¦‚æœåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å…¶ä»–çº¿ç¨‹è°ƒç”¨äº†è¿™ä¸ªçº¿ç¨‹çš„<code>interrupt()</code>æ–¹æ³•ï¼Œé‚£ä¹ˆ<code>sleep()</code>æ–¹æ³•ä¼šç«‹å³æŠ›å‡ºä¸€ä¸ª<code>InterruptedException</code>å¼‚å¸¸ï¼Œå¹¶ä¸”æ¸…ç©ºçº¿ç¨‹çš„ä¸­æ–­æ ‡å¿—ä½ã€‚ä½ å¯ä»¥æ•è·è¿™ä¸ªå¼‚å¸¸ï¼Œå¹¶æ ¹æ®éœ€è¦å¤„ç†ä¸­æ–­è¯·æ±‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InterruptSleepExample</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">InterruptSleepExample</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        t1<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot; æ‰“æ–­çŠ¶æ€: {}&quot;</span><span class="token punctuation">,</span> t1<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>å¼‚å¸¸:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>Exception <span class="token keyword">in</span> thread <span class="token string">&quot;t1&quot;</span> java.lang.RuntimeException: java.lang.InterruptedException: <span class="token function">sleep</span> interrupted
	at org.example.InterruptSleepExample.lambda<span class="token variable">$main</span><span class="token variable">$0</span><span class="token punctuation">(</span>InterruptSleepExample.java:13<span class="token punctuation">)</span>
	at java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:750<span class="token punctuation">)</span>
Caused by: java.lang.InterruptedException: <span class="token function">sleep</span> interrupted
	at java.lang.Thread.sleep<span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
	at org.example.InterruptSleepExample.lambda<span class="token variable">$main</span><span class="token variable">$0</span><span class="token punctuation">(</span>InterruptSleepExample.java:11<span class="token punctuation">)</span>
	<span class="token punctuation">..</span>. <span class="token number">1</span> <span class="token function">more</span>
<span class="token number">11</span>:33:08.824 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG org.example.InterruptSleepExample -  æ‰“æ–­çŠ¶æ€: <span class="token boolean">false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="æ‰“æ–­æ­£å¸¸è¿è¡Œçš„çº¿ç¨‹"><a href="#æ‰“æ–­æ­£å¸¸è¿è¡Œçš„çº¿ç¨‹" class="header-anchor">#</a> <strong>æ‰“æ–­æ­£å¸¸è¿è¡Œçš„çº¿ç¨‹</strong></h3> <blockquote><p>æ‰“æ–­æ­£å¸¸è¿è¡Œçš„çº¿ç¨‹, <strong>ä¸ä¼šæ¸…ç©ºæ‰“æ–­çŠ¶æ€</strong></p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InterruptExample</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">InterruptExample</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span> current <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">boolean</span> interrupted <span class="token operator">=</span> current<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>interrupted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot; æ‰“æ–­çŠ¶æ€: {}&quot;</span><span class="token punctuation">,</span> interrupted<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t2<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>è¾“å‡º</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">11</span>:38:58.752 <span class="token punctuation">[</span>t2<span class="token punctuation">]</span> DEBUG org.example.InterruptSleepExample -  æ‰“æ–­çŠ¶æ€: <span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="ç»ˆæ­¢-æ¨¡å¼ä¹‹ä¸¤é˜¶æ®µç»ˆæ­¢"><a href="#ç»ˆæ­¢-æ¨¡å¼ä¹‹ä¸¤é˜¶æ®µç»ˆæ­¢" class="header-anchor">#</a> (ç»ˆæ­¢)æ¨¡å¼ä¹‹ä¸¤é˜¶æ®µç»ˆæ­¢</h3> <p>Two Phase Termination</p> <p>åœ¨ä¸€ä¸ªçº¿ç¨‹ T1 ä¸­å¦‚ä½•â€œä¼˜é›…â€ç»ˆæ­¢çº¿ç¨‹ T2ï¼Ÿè¿™é‡Œçš„ã€ä¼˜é›…ã€‘æŒ‡çš„æ˜¯ç»™ T2 ä¸€ä¸ªæ–™ç†åäº‹çš„æœºä¼šã€‚</p> <h4 id="é”™è¯¯æ€è·¯"><a href="#é”™è¯¯æ€è·¯" class="header-anchor">#</a> é”™è¯¯æ€è·¯</h4> <ul><li><p>ä½¿ç”¨çº¿ç¨‹å¯¹è±¡çš„ stop() æ–¹æ³•åœæ­¢çº¿ç¨‹</p> <ul><li>stop æ–¹æ³•ä¼šçœŸæ­£æ€æ­»çº¿ç¨‹ï¼Œå¦‚æœè¿™æ—¶çº¿ç¨‹é”ä½äº†å…±äº«èµ„æºï¼Œé‚£ä¹ˆå½“å®ƒè¢«æ€æ­»åå°±å†ä¹Ÿæ²¡æœ‰æœºä¼šé‡Šæ”¾é”ï¼Œå…¶å®ƒçº¿ç¨‹å°†æ°¸è¿œæ— æ³•è·å–é”</li></ul></li> <li><p>ä½¿ç”¨ System.exit(int) æ–¹æ³•åœæ­¢çº¿ç¨‹</p> <ul><li>ç›®çš„ä»…æ˜¯åœæ­¢ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†è¿™ç§åšæ³•ä¼šè®©æ•´ä¸ªç¨‹åºéƒ½åœæ­¢</li></ul></li></ul> <h4 id="ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼"><a href="#ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼" class="header-anchor">#</a> ä¸¤é˜¶æ®µç»ˆæ­¢æ¨¡å¼</h4> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/202405231356356.png" alt="image-20240523135650042"></p> <h5 id="åˆ©ç”¨-isinterrupted"><a href="#åˆ©ç”¨-isinterrupted" class="header-anchor">#</a> åˆ©ç”¨ isInterrupted</h5> <p>interrupt å¯ä»¥æ‰“æ–­æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ï¼Œæ— è®ºè¿™ä¸ªçº¿ç¨‹æ˜¯åœ¨ <code>sleep</code>ï¼Œ<code>wait</code>ï¼Œè¿˜æ˜¯æ­£å¸¸è¿è¡Œ</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TPTInterrupt</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">TPTInterrupt</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Thread</span> thread<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">TPTInterrupt</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TPTInterrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;stop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span> current <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;æ–™ç†åäº‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;å°†ç»“æœä¿å­˜&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    current<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// æ‰§è¡Œç›‘æ§æ“ä½œ</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ç›‘æ§çº¿ç¨‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        thread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p>è¾“å‡ºï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">14</span>:01:07.742 <span class="token punctuation">[</span>ç›‘æ§çº¿ç¨‹<span class="token punctuation">]</span> DEBUG org.example.TPTInterrupt - å°†ç»“æœä¿å­˜
<span class="token number">14</span>:01:08.757 <span class="token punctuation">[</span>ç›‘æ§çº¿ç¨‹<span class="token punctuation">]</span> DEBUG org.example.TPTInterrupt - å°†ç»“æœä¿å­˜
<span class="token number">14</span>:01:09.768 <span class="token punctuation">[</span>ç›‘æ§çº¿ç¨‹<span class="token punctuation">]</span> DEBUG org.example.TPTInterrupt - å°†ç»“æœä¿å­˜
<span class="token number">14</span>:01:10.232 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG org.example.TPTInterrupt - stop
<span class="token number">14</span>:01:10.233 <span class="token punctuation">[</span>ç›‘æ§çº¿ç¨‹<span class="token punctuation">]</span> DEBUG org.example.TPTInterrupt - æ–™ç†åäº‹
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h5 id="åˆ©ç”¨åœæ­¢æ ‡è®°"><a href="#åˆ©ç”¨åœæ­¢æ ‡è®°" class="header-anchor">#</a> åˆ©ç”¨åœæ­¢æ ‡è®°</h5> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * åœæ­¢æ ‡è®°ç”¨ volatile æ˜¯ä¸ºäº†ä¿è¯è¯¥å˜é‡åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§
 * ä¾‹å­ä¸­ï¼Œå³ä¸»çº¿ç¨‹æŠŠå®ƒä¿®æ”¹ä¸º true å¯¹ t1 çº¿ç¨‹å¯è§
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TPTVolatile</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">TPTVolatile</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Thread</span> thread<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token keyword">boolean</span> stop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">TPTVolatile</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TPTVolatile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;stop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//Thread current = Thread.currentThread();</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>stop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;æ–™ç†åäº‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;å°†ç»“æœä¿å­˜&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token punctuation">}</span>
                <span class="token comment">// æ‰§è¡Œç›‘æ§æ“ä½œ</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ç›‘æ§çº¿ç¨‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        stop <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>è¾“å‡º:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">14</span>:15:14.168 <span class="token punctuation">[</span>ç›‘æ§çº¿ç¨‹<span class="token punctuation">]</span> DEBUG org.example.TPTVolatile - å°†ç»“æœä¿å­˜
<span class="token number">14</span>:15:15.172 <span class="token punctuation">[</span>ç›‘æ§çº¿ç¨‹<span class="token punctuation">]</span> DEBUG org.example.TPTVolatile - å°†ç»“æœä¿å­˜
<span class="token number">14</span>:15:16.176 <span class="token punctuation">[</span>ç›‘æ§çº¿ç¨‹<span class="token punctuation">]</span> DEBUG org.example.TPTVolatile - å°†ç»“æœä¿å­˜
<span class="token number">14</span>:15:16.674 <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG org.example.TPTVolatile - stop
<span class="token number">14</span>:15:16.674 <span class="token punctuation">[</span>ç›‘æ§çº¿ç¨‹<span class="token punctuation">]</span> DEBUG org.example.TPTVolatile - æ–™ç†åäº‹
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="æ‰“æ–­-park-çº¿ç¨‹"><a href="#æ‰“æ–­-park-çº¿ç¨‹" class="header-anchor">#</a> æ‰“æ–­ park çº¿ç¨‹</h3> <blockquote><p>æ‰“æ–­ park çº¿ç¨‹, <strong>ä¸ä¼šæ¸…ç©ºæ‰“æ–­çŠ¶æ€</strong></p></blockquote> <p>Park å’Œ Unpark å‡æ˜¯ LockSupport ç±»ä¸­çš„æ–¹æ³•</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//æš‚åœå½“å‰çº¿ç¨‹</span>
<span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//æ¢å¤æŸä¸ªçº¿ç¨‹</span>
<span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">unpark</span><span class="token punctuation">(</span>æš‚åœçº¿ç¨‹å¯¹è±¡<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>LockSupport.park()</code>æ–¹æ³•æä¾›äº†ä¸€ç§<code>ä½¿çº¿ç¨‹è¿›å…¥ä¼‘çœ æˆ–é˜»å¡çš„æœºåˆ¶</code>ï¼Œè¯¥æ–¹æ³•åˆ©ç”¨äº†äºŒå…ƒä¿¡å·é‡çš„æ¦‚å¿µï¼Œå®ç°çº¿ç¨‹çš„é˜»å¡ä¸å”¤é†’ï¼Œ<strong>å®ƒçš„åº•å±‚ä¹Ÿæ˜¯è°ƒç”¨äº†Unsafeç±»çš„parkæ–¹æ³•</strong></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ParkInterruptExample</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">ParkInterruptExample</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;park...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;unpark...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰“æ–­çŠ¶æ€ï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;t1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>è¾“å‡º:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">14</span>:22:11.345 <span class="token punctuation">[</span>t1<span class="token punctuation">]</span> DEBUG org.example.ParkInterruptExample - park<span class="token punctuation">..</span>.
<span class="token number">14</span>:22:11.347 <span class="token punctuation">[</span>t1<span class="token punctuation">]</span> DEBUG org.example.ParkInterruptExample - unpark<span class="token punctuation">..</span>.
<span class="token number">14</span>:22:11.347 <span class="token punctuation">[</span>t1<span class="token punctuation">]</span> DEBUG org.example.ParkInterruptExample - æ‰“æ–­çŠ¶æ€ï¼štrue
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p><strong>å¦‚æœæ‰“æ–­æ ‡è®°å·²ç»æ˜¯ true</strong>, åˆ™ park ä¼šå¤±æ•ˆ</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ParkInterruptExample</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> log <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">ParkInterruptExample</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;park...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰“æ–­çŠ¶æ€ï¼š{}&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        t1<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>è¾“å‡ºï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">14</span>:23:51.132 <span class="token punctuation">[</span>Thread-0<span class="token punctuation">]</span> DEBUG org.example.ParkInterruptExample - park<span class="token punctuation">..</span>.
<span class="token number">14</span>:23:51.134 <span class="token punctuation">[</span>Thread-0<span class="token punctuation">]</span> DEBUG org.example.ParkInterruptExample - æ‰“æ–­çŠ¶æ€ï¼štrue
<span class="token number">14</span>:23:51.136 <span class="token punctuation">[</span>Thread-0<span class="token punctuation">]</span> DEBUG org.example.ParkInterruptExample - park<span class="token punctuation">..</span>.
<span class="token number">14</span>:23:51.136 <span class="token punctuation">[</span>Thread-0<span class="token punctuation">]</span> DEBUG org.example.ParkInterruptExample - æ‰“æ–­çŠ¶æ€ï¼štrue
<span class="token number">14</span>:23:51.136 <span class="token punctuation">[</span>Thread-0<span class="token punctuation">]</span> DEBUG org.example.ParkInterruptExample - park<span class="token punctuation">..</span>.
<span class="token number">14</span>:23:51.136 <span class="token punctuation">[</span>Thread-0<span class="token punctuation">]</span> DEBUG org.example.ParkInterruptExample - æ‰“æ–­çŠ¶æ€ï¼štrue
<span class="token number">14</span>:23:51.136 <span class="token punctuation">[</span>Thread-0<span class="token punctuation">]</span> DEBUG org.example.ParkInterruptExample - park<span class="token punctuation">..</span>.
<span class="token number">14</span>:23:51.136 <span class="token punctuation">[</span>Thread-0<span class="token punctuation">]</span> DEBUG org.example.ParkInterruptExample - æ‰“æ–­çŠ¶æ€ï¼štrue
<span class="token number">14</span>:23:51.136 <span class="token punctuation">[</span>Thread-0<span class="token punctuation">]</span> DEBUG org.example.ParkInterruptExample - park<span class="token punctuation">..</span>.
<span class="token number">14</span>:23:51.136 <span class="token punctuation">[</span>Thread-0<span class="token punctuation">]</span> DEBUG org.example.ParkInterruptExample - æ‰“æ–­çŠ¶æ€ï¼štrue
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p><strong>æç¤º</strong></p> <p>å¯ä»¥ä½¿ç”¨ Thread.interrupted() æ¸…é™¤æ‰“æ–­çŠ¶æ€</p></blockquote> <h2 id="ä¸»çº¿ç¨‹ä¸å®ˆæŠ¤çº¿ç¨‹"><a href="#ä¸»çº¿ç¨‹ä¸å®ˆæŠ¤çº¿ç¨‹" class="header-anchor">#</a> ä¸»çº¿ç¨‹ä¸å®ˆæŠ¤çº¿ç¨‹</h2> <p>Javaç¨‹åºå…¥å£å°±æ˜¯ç”±JVMå¯åŠ¨<code>main</code>çº¿ç¨‹ï¼Œ<code>main</code>çº¿ç¨‹åˆå¯ä»¥å¯åŠ¨å…¶ä»–çº¿ç¨‹ã€‚å½“æ‰€æœ‰çº¿ç¨‹éƒ½è¿è¡Œç»“æŸæ—¶ï¼ŒJVMé€€å‡ºï¼Œè¿›ç¨‹ç»“æŸã€‚</p> <p>å¦‚æœæœ‰ä¸€ä¸ªçº¿ç¨‹æ²¡æœ‰é€€å‡ºï¼ŒJVMè¿›ç¨‹å°±ä¸ä¼šé€€å‡ºã€‚æ‰€ä»¥ï¼Œå¿…é¡»ä¿è¯æ‰€æœ‰çº¿ç¨‹éƒ½èƒ½åŠæ—¶ç»“æŸã€‚</p> <p>ä½†æ˜¯æœ‰ä¸€ç§çº¿ç¨‹çš„ç›®çš„å°±æ˜¯æ— é™å¾ªç¯ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªå®šæ—¶è§¦å‘ä»»åŠ¡çš„çº¿ç¨‹ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">TimerThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">LocalTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>å¦‚æœè¿™ä¸ªçº¿ç¨‹ä¸ç»“æŸï¼ŒJVMè¿›ç¨‹å°±æ— æ³•ç»“æŸã€‚é—®é¢˜æ˜¯ï¼Œç”±è°è´Ÿè´£ç»“æŸè¿™ä¸ªçº¿ç¨‹ï¼Ÿ</p> <p>ç„¶è€Œè¿™ç±»çº¿ç¨‹ç»å¸¸æ²¡æœ‰è´Ÿè´£äººæ¥è´Ÿè´£ç»“æŸå®ƒä»¬ã€‚ä½†æ˜¯ï¼Œå½“å…¶ä»–çº¿ç¨‹ç»“æŸæ—¶ï¼ŒJVMè¿›ç¨‹åˆå¿…é¡»è¦ç»“æŸï¼Œæ€ä¹ˆåŠï¼Ÿ</p> <p>ç­”æ¡ˆæ˜¯ä½¿ç”¨å®ˆæŠ¤çº¿ç¨‹ï¼ˆDaemon Threadï¼‰ã€‚</p> <blockquote><p>å®ˆæŠ¤çº¿ç¨‹æ˜¯æŒ‡ä¸ºå…¶ä»–çº¿ç¨‹æœåŠ¡çš„çº¿ç¨‹ã€‚åœ¨JVMä¸­ï¼Œæ‰€æœ‰éå®ˆæŠ¤çº¿ç¨‹éƒ½æ‰§è¡Œå®Œæ¯•åï¼Œæ— è®ºæœ‰æ²¡æœ‰å®ˆæŠ¤çº¿ç¨‹ï¼Œè™šæ‹Ÿæœºéƒ½ä¼šè‡ªåŠ¨é€€å‡ºã€‚</p></blockquote> <p>å› æ­¤ï¼ŒJVMé€€å‡ºæ—¶ï¼Œä¸å¿…å…³å¿ƒå®ˆæŠ¤çº¿ç¨‹æ˜¯å¦å·²ç»“æŸã€‚</p> <p>å¦‚ä½•åˆ›å»ºå®ˆæŠ¤çº¿ç¨‹å‘¢ï¼Ÿæ–¹æ³•å’Œæ™®é€šçº¿ç¨‹ä¸€æ ·ï¼Œåªæ˜¯åœ¨è°ƒç”¨<code>start()</code>æ–¹æ³•å‰ï¼Œè°ƒç”¨<code>setDaemon(true)</code>æŠŠè¯¥çº¿ç¨‹æ ‡è®°ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹</span>
t<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>åœ¨å®ˆæŠ¤çº¿ç¨‹ä¸­ï¼Œéœ€è¦æ³¨æ„ï¼š</p> <ul><li>å®ˆæŠ¤çº¿ç¨‹ä¸èƒ½æŒæœ‰ä»»ä½•éœ€è¦å…³é—­çš„èµ„æºï¼Œä¾‹å¦‚æ‰“å¼€æ–‡ä»¶ç­‰ï¼Œå› ä¸ºè™šæ‹Ÿæœºé€€å‡ºæ—¶ï¼Œå®ˆæŠ¤çº¿ç¨‹æ²¡æœ‰ä»»ä½•æœºä¼šæ¥å…³é—­æ–‡ä»¶ï¼Œè¿™ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</li> <li>åƒåœ¾å›æ”¶å™¨çº¿ç¨‹å°±æ˜¯ä¸€ç§å®ˆæŠ¤çº¿ç¨‹ ã€‚</li> <li>Tomcat ä¸­çš„ Acceptor å’Œ Poller çº¿ç¨‹éƒ½æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œæ‰€ä»¥ Tomcat æ¥æ”¶åˆ° shutdown å‘½ä»¤åï¼Œä¸ä¼šç­‰å¾…å®ƒä»¬å¤„ç†å®Œå½“å‰è¯·æ±‚ ã€‚</li></ul> <h2 id="äº”ç§çŠ¶æ€-æ“ä½œç³»ç»Ÿ-å±‚é¢"><a href="#äº”ç§çŠ¶æ€-æ“ä½œç³»ç»Ÿ-å±‚é¢" class="header-anchor">#</a> äº”ç§çŠ¶æ€ ( <strong>æ“ä½œç³»ç»Ÿ</strong> å±‚é¢)</h2> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/202405231445549.png" alt="image-20240523144515493"></p> <ul><li><p>ã€åˆå§‹çŠ¶æ€ã€‘ä»…æ˜¯åœ¨è¯­è¨€å±‚é¢åˆ›å»ºäº†çº¿ç¨‹å¯¹è±¡ï¼Œè¿˜æœªä¸æ“ä½œç³»ç»Ÿçº¿ç¨‹å…³è”</p></li> <li><p>ã€å¯è¿è¡ŒçŠ¶æ€ã€‘ï¼ˆå°±ç»ªçŠ¶æ€ï¼‰æŒ‡è¯¥çº¿ç¨‹å·²ç»è¢«åˆ›å»ºï¼ˆä¸æ“ä½œç³»ç»Ÿçº¿ç¨‹å…³è”ï¼‰ï¼Œå¯ä»¥ç”± CPU è°ƒåº¦æ‰§è¡Œ</p></li> <li><p>ã€è¿è¡ŒçŠ¶æ€ã€‘æŒ‡è·å–äº† CPU æ—¶é—´ç‰‡è¿è¡Œä¸­çš„çŠ¶æ€</p></li> <li><ul><li>å½“ CPU æ—¶é—´ç‰‡ç”¨å®Œï¼Œä¼šä»ã€è¿è¡ŒçŠ¶æ€ã€‘è½¬æ¢è‡³ã€å¯è¿è¡ŒçŠ¶æ€ã€‘ï¼Œä¼šå¯¼è‡´çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢</li></ul></li> <li><p>ã€é˜»å¡çŠ¶æ€ã€‘</p></li> <li><ul><li>å¦‚æœè°ƒç”¨äº†é˜»å¡ APIï¼Œå¦‚ BIO è¯»å†™æ–‡ä»¶ï¼Œè¿™æ—¶è¯¥çº¿ç¨‹å®é™…ä¸ä¼šç”¨åˆ° CPUï¼Œä¼šå¯¼è‡´çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿›å…¥ã€é˜»å¡çŠ¶æ€ã€‘</li> <li>ç­‰ BIO æ“ä½œå®Œæ¯•ï¼Œä¼šç”±æ“ä½œç³»ç»Ÿå”¤é†’é˜»å¡çš„çº¿ç¨‹ï¼Œè½¬æ¢è‡³ã€å¯è¿è¡ŒçŠ¶æ€ã€‘</li> <li>ä¸ã€å¯è¿è¡ŒçŠ¶æ€ã€‘çš„åŒºåˆ«æ˜¯ï¼Œå¯¹ã€é˜»å¡çŠ¶æ€ã€‘çš„çº¿ç¨‹æ¥è¯´åªè¦å®ƒä»¬ä¸€ç›´ä¸å”¤é†’ï¼Œè°ƒåº¦å™¨å°±ä¸€ç›´ä¸ä¼šè€ƒè™‘è°ƒåº¦å®ƒä»¬</li></ul></li> <li><p>ã€ç»ˆæ­¢çŠ¶æ€ã€‘è¡¨ç¤ºçº¿ç¨‹å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œç”Ÿå‘½å‘¨æœŸå·²ç»ç»“æŸï¼Œä¸ä¼šå†è½¬æ¢ä¸ºå…¶å®ƒçŠ¶æ€</p></li></ul> <h2 id="å…­ç§çŠ¶æ€-thread-state"><a href="#å…­ç§çŠ¶æ€-thread-state" class="header-anchor">#</a> å…­ç§çŠ¶æ€(Thread.State)</h2> <p>ä» <strong>Java API</strong> å±‚é¢æ¥æè¿°çš„ ï¼Œæ ¹æ® Thread.State æšä¸¾ï¼Œåˆ†ä¸ºå…­ç§çŠ¶æ€</p> <table><thead><tr><th style="text-align:center;">çŠ¶æ€</th> <th style="text-align:center;">è¯´æ˜</th></tr></thead> <tbody><tr><td style="text-align:center;">NEW</td> <td style="text-align:center;">åˆå§‹çŠ¶æ€ï¼šçº¿ç¨‹è¢«åˆ›å»ºï¼Œä½†è¿˜æ²¡æœ‰è°ƒç”¨start()æ–¹æ³•</td></tr> <tr><td style="text-align:center;">RUNNABLE</td> <td style="text-align:center;">è¿è¡ŒçŠ¶æ€ï¼šJavaçº¿ç¨‹å°†æ“ä½œç³»ç»Ÿä¸­çš„å°±ç»ªå’Œè¿è¡Œä¸¤ç§çŠ¶æ€ç¬¼ç»Ÿçš„ç§°ä½œâ€œè¿è¡Œâ€</td></tr> <tr><td style="text-align:center;">BLOCKED</td> <td style="text-align:center;">é˜»å¡çŠ¶æ€ï¼šè¡¨ç¤ºçº¿ç¨‹é˜»å¡äºé”</td></tr> <tr><td style="text-align:center;">WAITING</td> <td style="text-align:center;">ç­‰å¾…çŠ¶æ€ï¼šè¡¨ç¤ºçº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥è¯¥çŠ¶æ€è¡¨ç¤ºå½“å‰çº¿ç¨‹éœ€è¦ç­‰å¾…<br>å…¶ä»–çº¿ç¨‹åšå‡ºä¸€äº›ç‰¹å®šåŠ¨ä½œï¼ˆé€šçŸ¥æˆ–ä¸­æ–­ï¼‰</td></tr> <tr><td style="text-align:center;">TIME_WAITING</td> <td style="text-align:center;">è¶…æ—¶ç­‰å¾…çŠ¶æ€ï¼šè¯¥çŠ¶æ€ä¸åŒäºWAITINGï¼Œå®ƒæ˜¯å¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´è‡ªè¡Œè¿”å›çš„</td></tr> <tr><td style="text-align:center;">TERMINATED</td> <td style="text-align:center;">ç»ˆæ­¢çŠ¶æ€ï¼šè¡¨ç¤ºå½“å‰çº¿ç¨‹å·²ç»æ‰§è¡Œå®Œæ¯•</td></tr></tbody></table> <p>çº¿ç¨‹åœ¨è‡ªèº«çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œ å¹¶ä¸æ˜¯å›ºå®šåœ°å¤„äºæŸä¸ªçŠ¶æ€ï¼Œè€Œæ˜¯éšç€ä»£ç çš„æ‰§è¡Œåœ¨ä¸åŒçš„çŠ¶æ€ä¹‹é—´è¿›è¡Œåˆ‡æ¢ï¼ŒJavaçº¿ç¨‹çŠ¶æ€å˜åŒ–å¦‚å›¾ç¤ºï¼š</p> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/369211987136346.png" alt="369211987136346"></p></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">2024/05/30, 17:56:10</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/89d2c1/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">è¿›ç¨‹ä¸çº¿ç¨‹</div></a> <a href="/pages/eb38c4/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">å…±äº«æ¨¡å‹ä¹‹ç®¡ç¨‹(Monitor)</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/pages/89d2c1/" class="prev">è¿›ç¨‹ä¸çº¿ç¨‹</a></span> <span class="next"><a href="/pages/eb38c4/">å…±äº«æ¨¡å‹ä¹‹ç®¡ç¨‹(Monitor)</a>â†’
      </span></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="æœ¬ç«™ä¸»é¢˜">Vdoing</a> 
    | Copyright Â© 2023-2024
    <span>Gping | MIT License</span></div> <div class="buttons"><div title="è¿”å›é¡¶éƒ¨" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="å»è¯„è®º" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="ä¸»é¢˜æ¨¡å¼" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          è·Ÿéšç³»ç»Ÿ
        </li><li class="iconfont icon-rijianmoshi">
          æµ…è‰²æ¨¡å¼
        </li><li class="iconfont icon-yejianmoshi">
          æ·±è‰²æ¨¡å¼
        </li><li class="iconfont icon-yuedu">
          é˜…è¯»æ¨¡å¼
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.57e44612.js" defer></script><script src="/assets/js/2.ea24d1ee.js" defer></script><script src="/assets/js/7.8cdfab2f.js" defer></script>
  </body>
</html>
