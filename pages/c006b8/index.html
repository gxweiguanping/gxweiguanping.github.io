<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Map | Gpingの知识库</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="记录学习路上的点点滴滴">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    <meta name="referrer" content="no-referrer">
    
    <link rel="preload" href="/assets/css/0.styles.18a91880.css" as="style"><link rel="preload" href="/assets/js/app.57e44612.js" as="script"><link rel="preload" href="/assets/js/2.ea24d1ee.js" as="script"><link rel="preload" href="/assets/js/198.452ad7b8.js" as="script"><link rel="prefetch" href="/assets/js/10.87a7fc9a.js"><link rel="prefetch" href="/assets/js/100.1dde94ac.js"><link rel="prefetch" href="/assets/js/101.a9e60cd0.js"><link rel="prefetch" href="/assets/js/102.41fc30c1.js"><link rel="prefetch" href="/assets/js/103.d66d2d71.js"><link rel="prefetch" href="/assets/js/104.22cb586e.js"><link rel="prefetch" href="/assets/js/105.2e7087a4.js"><link rel="prefetch" href="/assets/js/106.f3ea04f4.js"><link rel="prefetch" href="/assets/js/107.1fe76475.js"><link rel="prefetch" href="/assets/js/108.5419a3bf.js"><link rel="prefetch" href="/assets/js/109.25f5a5d7.js"><link rel="prefetch" href="/assets/js/11.04f09971.js"><link rel="prefetch" href="/assets/js/110.859d6308.js"><link rel="prefetch" href="/assets/js/111.1007812c.js"><link rel="prefetch" href="/assets/js/112.1e3ac86b.js"><link rel="prefetch" href="/assets/js/113.39632362.js"><link rel="prefetch" href="/assets/js/114.cd109b57.js"><link rel="prefetch" href="/assets/js/115.738c1531.js"><link rel="prefetch" href="/assets/js/116.8afaf129.js"><link rel="prefetch" href="/assets/js/117.fc53579f.js"><link rel="prefetch" href="/assets/js/118.21a1f8c4.js"><link rel="prefetch" href="/assets/js/119.0a6295f3.js"><link rel="prefetch" href="/assets/js/12.39c155f1.js"><link rel="prefetch" href="/assets/js/120.b52ae2c0.js"><link rel="prefetch" href="/assets/js/121.a7d78631.js"><link rel="prefetch" href="/assets/js/122.a28e6a23.js"><link rel="prefetch" href="/assets/js/123.c426392a.js"><link rel="prefetch" href="/assets/js/124.c522482b.js"><link rel="prefetch" href="/assets/js/125.92a0ca2c.js"><link rel="prefetch" href="/assets/js/126.c7e332fc.js"><link rel="prefetch" href="/assets/js/127.09fed274.js"><link rel="prefetch" href="/assets/js/128.5b2b776f.js"><link rel="prefetch" href="/assets/js/129.78e15024.js"><link rel="prefetch" href="/assets/js/13.2b02d3de.js"><link rel="prefetch" href="/assets/js/130.97b2a44d.js"><link rel="prefetch" href="/assets/js/131.0453b852.js"><link rel="prefetch" href="/assets/js/132.1d3bd373.js"><link rel="prefetch" href="/assets/js/133.445fa178.js"><link rel="prefetch" href="/assets/js/134.10a04df0.js"><link rel="prefetch" href="/assets/js/135.7966ce33.js"><link rel="prefetch" href="/assets/js/136.03b5e675.js"><link rel="prefetch" href="/assets/js/137.5eed4831.js"><link rel="prefetch" href="/assets/js/138.ed4fba77.js"><link rel="prefetch" href="/assets/js/139.8eb46152.js"><link rel="prefetch" href="/assets/js/14.8881736c.js"><link rel="prefetch" href="/assets/js/140.08e196c0.js"><link rel="prefetch" href="/assets/js/141.b18b66b6.js"><link rel="prefetch" href="/assets/js/142.03a0879c.js"><link rel="prefetch" href="/assets/js/143.22fdbb7b.js"><link rel="prefetch" href="/assets/js/144.31189f97.js"><link rel="prefetch" href="/assets/js/145.75b2fd40.js"><link rel="prefetch" href="/assets/js/146.dbb475d1.js"><link rel="prefetch" href="/assets/js/147.cf107953.js"><link rel="prefetch" href="/assets/js/148.f9449ca9.js"><link rel="prefetch" href="/assets/js/149.6960a659.js"><link rel="prefetch" href="/assets/js/15.b4b6d9e8.js"><link rel="prefetch" href="/assets/js/150.f4a4a9e2.js"><link rel="prefetch" href="/assets/js/151.df5e1fda.js"><link rel="prefetch" href="/assets/js/152.b3ebe11a.js"><link rel="prefetch" href="/assets/js/153.fe7d6b3f.js"><link rel="prefetch" href="/assets/js/154.aeb16b2b.js"><link rel="prefetch" href="/assets/js/155.649eeac2.js"><link rel="prefetch" href="/assets/js/156.72888c77.js"><link rel="prefetch" href="/assets/js/157.dc67f246.js"><link rel="prefetch" href="/assets/js/158.467b9e3c.js"><link rel="prefetch" href="/assets/js/159.384e3132.js"><link rel="prefetch" href="/assets/js/16.e6a03cb0.js"><link rel="prefetch" href="/assets/js/160.75f72beb.js"><link rel="prefetch" href="/assets/js/161.c4bf3ed6.js"><link rel="prefetch" href="/assets/js/162.4e905989.js"><link rel="prefetch" href="/assets/js/163.e10e10ec.js"><link rel="prefetch" href="/assets/js/164.8c3e42dc.js"><link rel="prefetch" href="/assets/js/165.c9509c25.js"><link rel="prefetch" href="/assets/js/166.875c96b9.js"><link rel="prefetch" href="/assets/js/167.ac323741.js"><link rel="prefetch" href="/assets/js/168.6cff22a8.js"><link rel="prefetch" href="/assets/js/169.9a12d5c9.js"><link rel="prefetch" href="/assets/js/17.430c4645.js"><link rel="prefetch" href="/assets/js/170.bb307927.js"><link rel="prefetch" href="/assets/js/171.40dbf2b6.js"><link rel="prefetch" href="/assets/js/172.a11d0b5a.js"><link rel="prefetch" href="/assets/js/173.86064fd6.js"><link rel="prefetch" href="/assets/js/174.1cacb422.js"><link rel="prefetch" href="/assets/js/175.622de80a.js"><link rel="prefetch" href="/assets/js/176.de8449aa.js"><link rel="prefetch" href="/assets/js/177.cb9b484d.js"><link rel="prefetch" href="/assets/js/178.9f5c2068.js"><link rel="prefetch" href="/assets/js/179.ffff651e.js"><link rel="prefetch" href="/assets/js/18.3bb48241.js"><link rel="prefetch" href="/assets/js/180.09a9c21e.js"><link rel="prefetch" href="/assets/js/181.26ed76ed.js"><link rel="prefetch" href="/assets/js/182.17a77c05.js"><link rel="prefetch" href="/assets/js/183.53fafefd.js"><link rel="prefetch" href="/assets/js/184.a67c9279.js"><link rel="prefetch" href="/assets/js/185.5ef13915.js"><link rel="prefetch" href="/assets/js/186.80f2394f.js"><link rel="prefetch" href="/assets/js/187.9966ad44.js"><link rel="prefetch" href="/assets/js/188.03ff6401.js"><link rel="prefetch" href="/assets/js/189.0673741c.js"><link rel="prefetch" href="/assets/js/19.1a1d4b97.js"><link rel="prefetch" href="/assets/js/190.b00a4558.js"><link rel="prefetch" href="/assets/js/191.ffb3dc84.js"><link rel="prefetch" href="/assets/js/192.a1c08248.js"><link rel="prefetch" href="/assets/js/193.12c63e53.js"><link rel="prefetch" href="/assets/js/194.f33b52de.js"><link rel="prefetch" href="/assets/js/195.33c636d4.js"><link rel="prefetch" href="/assets/js/196.6c3d5dd1.js"><link rel="prefetch" href="/assets/js/197.30d1c025.js"><link rel="prefetch" href="/assets/js/199.e5ef0a61.js"><link rel="prefetch" href="/assets/js/20.a60725d3.js"><link rel="prefetch" href="/assets/js/200.686c1f4c.js"><link rel="prefetch" href="/assets/js/201.bc89ccf8.js"><link rel="prefetch" href="/assets/js/202.59ba3183.js"><link rel="prefetch" href="/assets/js/203.bcd865f8.js"><link rel="prefetch" href="/assets/js/204.8d50c324.js"><link rel="prefetch" href="/assets/js/205.742dccae.js"><link rel="prefetch" href="/assets/js/206.88d6037a.js"><link rel="prefetch" href="/assets/js/207.190776c5.js"><link rel="prefetch" href="/assets/js/208.fa870ec7.js"><link rel="prefetch" href="/assets/js/209.0ead087a.js"><link rel="prefetch" href="/assets/js/21.6c56b6f5.js"><link rel="prefetch" href="/assets/js/210.4793eafd.js"><link rel="prefetch" href="/assets/js/211.d4701451.js"><link rel="prefetch" href="/assets/js/212.960f82e6.js"><link rel="prefetch" href="/assets/js/213.06afd767.js"><link rel="prefetch" href="/assets/js/214.7b98451d.js"><link rel="prefetch" href="/assets/js/215.78151312.js"><link rel="prefetch" href="/assets/js/216.d2f394e3.js"><link rel="prefetch" href="/assets/js/217.d6868358.js"><link rel="prefetch" href="/assets/js/218.74bb756c.js"><link rel="prefetch" href="/assets/js/219.6239b512.js"><link rel="prefetch" href="/assets/js/22.f0aec2af.js"><link rel="prefetch" href="/assets/js/220.18943948.js"><link rel="prefetch" href="/assets/js/221.952b0093.js"><link rel="prefetch" href="/assets/js/222.908dcde3.js"><link rel="prefetch" href="/assets/js/223.ccc9ca97.js"><link rel="prefetch" href="/assets/js/224.97bb1b38.js"><link rel="prefetch" href="/assets/js/225.f44d9991.js"><link rel="prefetch" href="/assets/js/226.0cbe1043.js"><link rel="prefetch" href="/assets/js/227.0ef2d9fa.js"><link rel="prefetch" href="/assets/js/228.08e2a12e.js"><link rel="prefetch" href="/assets/js/229.9d76c3da.js"><link rel="prefetch" href="/assets/js/23.b75f4ad8.js"><link rel="prefetch" href="/assets/js/230.0130ed60.js"><link rel="prefetch" href="/assets/js/231.cc7bfe6a.js"><link rel="prefetch" href="/assets/js/232.945b8961.js"><link rel="prefetch" href="/assets/js/233.b92a416e.js"><link rel="prefetch" href="/assets/js/234.1e603d6c.js"><link rel="prefetch" href="/assets/js/235.2cbbf26a.js"><link rel="prefetch" href="/assets/js/236.8c2d0914.js"><link rel="prefetch" href="/assets/js/237.6d37c843.js"><link rel="prefetch" href="/assets/js/238.328bfb17.js"><link rel="prefetch" href="/assets/js/239.3cfc2492.js"><link rel="prefetch" href="/assets/js/24.2f8e45fa.js"><link rel="prefetch" href="/assets/js/240.49c464d7.js"><link rel="prefetch" href="/assets/js/241.a117b6ed.js"><link rel="prefetch" href="/assets/js/242.f755edbf.js"><link rel="prefetch" href="/assets/js/243.d465b990.js"><link rel="prefetch" href="/assets/js/244.437ddc10.js"><link rel="prefetch" href="/assets/js/245.2e779b62.js"><link rel="prefetch" href="/assets/js/246.833a9e59.js"><link rel="prefetch" href="/assets/js/247.3642921c.js"><link rel="prefetch" href="/assets/js/248.6fe5d428.js"><link rel="prefetch" href="/assets/js/249.11831ea9.js"><link rel="prefetch" href="/assets/js/25.b05b892c.js"><link rel="prefetch" href="/assets/js/250.8c3ef99e.js"><link rel="prefetch" href="/assets/js/251.520e04bc.js"><link rel="prefetch" href="/assets/js/252.b091ccdc.js"><link rel="prefetch" href="/assets/js/253.b763e62c.js"><link rel="prefetch" href="/assets/js/254.4d336e26.js"><link rel="prefetch" href="/assets/js/255.5d47d641.js"><link rel="prefetch" href="/assets/js/256.baa3ebe3.js"><link rel="prefetch" href="/assets/js/257.2ffae9af.js"><link rel="prefetch" href="/assets/js/258.c604142e.js"><link rel="prefetch" href="/assets/js/259.e74e6cd6.js"><link rel="prefetch" href="/assets/js/26.8ba653c3.js"><link rel="prefetch" href="/assets/js/260.7b310562.js"><link rel="prefetch" href="/assets/js/261.e3b096df.js"><link rel="prefetch" href="/assets/js/262.808f799f.js"><link rel="prefetch" href="/assets/js/263.c560074f.js"><link rel="prefetch" href="/assets/js/264.a46a2877.js"><link rel="prefetch" href="/assets/js/265.d15875dc.js"><link rel="prefetch" href="/assets/js/266.44ad46e6.js"><link rel="prefetch" href="/assets/js/267.744591cc.js"><link rel="prefetch" href="/assets/js/268.b63a806f.js"><link rel="prefetch" href="/assets/js/269.2df63b7b.js"><link rel="prefetch" href="/assets/js/27.2649684b.js"><link rel="prefetch" href="/assets/js/270.96a1e8da.js"><link rel="prefetch" href="/assets/js/271.f7f48faf.js"><link rel="prefetch" href="/assets/js/272.89f1f9b3.js"><link rel="prefetch" href="/assets/js/273.9db895c8.js"><link rel="prefetch" href="/assets/js/28.04ba17fc.js"><link rel="prefetch" href="/assets/js/29.fc9bec6b.js"><link rel="prefetch" href="/assets/js/3.ebf0a2ca.js"><link rel="prefetch" href="/assets/js/30.8f6c8682.js"><link rel="prefetch" href="/assets/js/31.044a932c.js"><link rel="prefetch" href="/assets/js/32.f86a299c.js"><link rel="prefetch" href="/assets/js/33.69f05cd0.js"><link rel="prefetch" href="/assets/js/34.0fcfdfd2.js"><link rel="prefetch" href="/assets/js/35.fbba2378.js"><link rel="prefetch" href="/assets/js/36.b8c83634.js"><link rel="prefetch" href="/assets/js/37.af10d35c.js"><link rel="prefetch" href="/assets/js/38.40c50958.js"><link rel="prefetch" href="/assets/js/39.048effca.js"><link rel="prefetch" href="/assets/js/4.910990f1.js"><link rel="prefetch" href="/assets/js/40.34df2e9c.js"><link rel="prefetch" href="/assets/js/41.0d92c05d.js"><link rel="prefetch" href="/assets/js/42.7d55e3eb.js"><link rel="prefetch" href="/assets/js/43.784d6526.js"><link rel="prefetch" href="/assets/js/44.ab75d220.js"><link rel="prefetch" href="/assets/js/45.1da53631.js"><link rel="prefetch" href="/assets/js/46.2bc19c98.js"><link rel="prefetch" href="/assets/js/47.ebb349e1.js"><link rel="prefetch" href="/assets/js/48.4c790e5f.js"><link rel="prefetch" href="/assets/js/49.a08ffcbf.js"><link rel="prefetch" href="/assets/js/5.1a4306f1.js"><link rel="prefetch" href="/assets/js/50.2a986267.js"><link rel="prefetch" href="/assets/js/51.b6e6ae81.js"><link rel="prefetch" href="/assets/js/52.884f6499.js"><link rel="prefetch" href="/assets/js/53.21026904.js"><link rel="prefetch" href="/assets/js/54.da32fcd7.js"><link rel="prefetch" href="/assets/js/55.8b53dfa1.js"><link rel="prefetch" href="/assets/js/56.f61d102d.js"><link rel="prefetch" href="/assets/js/57.f4da3322.js"><link rel="prefetch" href="/assets/js/58.5e3282e7.js"><link rel="prefetch" href="/assets/js/59.a84fd4f0.js"><link rel="prefetch" href="/assets/js/6.051801a8.js"><link rel="prefetch" href="/assets/js/60.5946ddf4.js"><link rel="prefetch" href="/assets/js/61.18c749ab.js"><link rel="prefetch" href="/assets/js/62.da684abf.js"><link rel="prefetch" href="/assets/js/63.2b0fa974.js"><link rel="prefetch" href="/assets/js/64.2f400a86.js"><link rel="prefetch" href="/assets/js/65.4cf2386f.js"><link rel="prefetch" href="/assets/js/66.188c4b33.js"><link rel="prefetch" href="/assets/js/67.b4f824ac.js"><link rel="prefetch" href="/assets/js/68.d77410fc.js"><link rel="prefetch" href="/assets/js/69.6e24eb76.js"><link rel="prefetch" href="/assets/js/7.8cdfab2f.js"><link rel="prefetch" href="/assets/js/70.5ca51a92.js"><link rel="prefetch" href="/assets/js/71.35d7ed60.js"><link rel="prefetch" href="/assets/js/72.a7853bf5.js"><link rel="prefetch" href="/assets/js/73.a891df77.js"><link rel="prefetch" href="/assets/js/74.e978df7f.js"><link rel="prefetch" href="/assets/js/75.ab5a4524.js"><link rel="prefetch" href="/assets/js/76.ea1c6d79.js"><link rel="prefetch" href="/assets/js/77.711c0174.js"><link rel="prefetch" href="/assets/js/78.35dd5c6c.js"><link rel="prefetch" href="/assets/js/79.d7524830.js"><link rel="prefetch" href="/assets/js/8.badb7759.js"><link rel="prefetch" href="/assets/js/80.7e16490b.js"><link rel="prefetch" href="/assets/js/81.15f00868.js"><link rel="prefetch" href="/assets/js/82.0fe7b576.js"><link rel="prefetch" href="/assets/js/83.fc62b16f.js"><link rel="prefetch" href="/assets/js/84.2a4f555c.js"><link rel="prefetch" href="/assets/js/85.edffb2ef.js"><link rel="prefetch" href="/assets/js/86.69991118.js"><link rel="prefetch" href="/assets/js/87.621cee7a.js"><link rel="prefetch" href="/assets/js/88.5507cc10.js"><link rel="prefetch" href="/assets/js/89.5d34d988.js"><link rel="prefetch" href="/assets/js/9.d4fc76e7.js"><link rel="prefetch" href="/assets/js/90.cc841762.js"><link rel="prefetch" href="/assets/js/91.a24381d0.js"><link rel="prefetch" href="/assets/js/92.cbd5d458.js"><link rel="prefetch" href="/assets/js/93.530432c0.js"><link rel="prefetch" href="/assets/js/94.0524cfdd.js"><link rel="prefetch" href="/assets/js/95.0214ae22.js"><link rel="prefetch" href="/assets/js/96.7942792a.js"><link rel="prefetch" href="/assets/js/97.35d91de8.js"><link rel="prefetch" href="/assets/js/98.eafbdc44.js"><link rel="prefetch" href="/assets/js/99.db414aab.js">
    <link rel="stylesheet" href="/assets/css/0.styles.18a91880.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Gpingの知识库" class="logo"> <span class="site-name can-hide">Gpingの知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">🏠首页</a></div><div class="nav-item"><a href="/pages/2dbd58/" class="nav-link">📚小手册</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="📖基础" class="dropdown-title"><!----> <span class="title" style="display:;">📖基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/27f9fa/" class="nav-link">Java8新特性</a></li><li class="dropdown-item"><!----> <a href="/pages/96d5aa/" class="nav-link">Java并发编程</a></li><li class="dropdown-item"><!----> <a href="/pages/00e30d/" class="nav-link">Java虚拟机</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🏷️框架" class="dropdown-title"><!----> <span class="title" style="display:;">🏷️框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/bb39d9/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/pages/24c3ee/" class="nav-link">SpringSecurity</a></li><li class="dropdown-item"><!----> <a href="/pages/1ab42b/" class="nav-link">ThingsBoard</a></li><li class="dropdown-item"><!----> <a href="/pages/fb96c3/" class="nav-link">Jpa</a></li><li class="dropdown-item"><!----> <a href="/pages/34b19f/" class="nav-link">Activiti7</a></li><li class="dropdown-item"><!----> <a href="/pages/d33c62/" class="nav-link">Quartz</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⚔️中间件" class="dropdown-title"><!----> <span class="title" style="display:;">⚔️中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/c4d661/" class="nav-link">Rabbitmq</a></li><li class="dropdown-item"><!----> <a href="/pages/fe0a41/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/pages/eeddc3/" class="nav-link">Canal</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="📁数据库" class="dropdown-title"><!----> <span class="title" style="display:;">📁数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0ef684/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/a174cd/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/4cfb74/" class="nav-link">InfluxDB</a></li><li class="dropdown-item"><!----> <a href="/pages/9c8057/" class="nav-link">ClickHouse</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🧰实用工具" class="dropdown-title"><!----> <span class="title" style="display:;">🧰实用工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/32a577/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/pages/9864be/" class="nav-link">Maven</a></li><li class="dropdown-item"><!----> <a href="/pages/f5b30e/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/pages/290042/" class="nav-link">Arthas</a></li><li class="dropdown-item"><!----> <a href="/pages/9eb455/" class="nav-link">Idea</a></li><li class="dropdown-item"><!----> <a href="/pages/151c97/" class="nav-link">开发工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🐞运维" class="dropdown-title"><!----> <span class="title" style="display:;">🐞运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/748b9f/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/pages/4b6fee/" class="nav-link">Linux</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="💡其他" class="dropdown-title"><!----> <span class="title" style="display:;">💡其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9cc0e1/" class="nav-link">高项</a></li><li class="dropdown-item"><!----> <a href="/pages/10e161/" class="nav-link">不一样的树形构建方式</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">🏠首页</a></div><div class="nav-item"><a href="/pages/2dbd58/" class="nav-link">📚小手册</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="📖基础" class="dropdown-title"><!----> <span class="title" style="display:;">📖基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/27f9fa/" class="nav-link">Java8新特性</a></li><li class="dropdown-item"><!----> <a href="/pages/96d5aa/" class="nav-link">Java并发编程</a></li><li class="dropdown-item"><!----> <a href="/pages/00e30d/" class="nav-link">Java虚拟机</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🏷️框架" class="dropdown-title"><!----> <span class="title" style="display:;">🏷️框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/bb39d9/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/pages/24c3ee/" class="nav-link">SpringSecurity</a></li><li class="dropdown-item"><!----> <a href="/pages/1ab42b/" class="nav-link">ThingsBoard</a></li><li class="dropdown-item"><!----> <a href="/pages/fb96c3/" class="nav-link">Jpa</a></li><li class="dropdown-item"><!----> <a href="/pages/34b19f/" class="nav-link">Activiti7</a></li><li class="dropdown-item"><!----> <a href="/pages/d33c62/" class="nav-link">Quartz</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⚔️中间件" class="dropdown-title"><!----> <span class="title" style="display:;">⚔️中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/c4d661/" class="nav-link">Rabbitmq</a></li><li class="dropdown-item"><!----> <a href="/pages/fe0a41/" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----> <a href="/pages/eeddc3/" class="nav-link">Canal</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="📁数据库" class="dropdown-title"><!----> <span class="title" style="display:;">📁数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/0ef684/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/a174cd/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/4cfb74/" class="nav-link">InfluxDB</a></li><li class="dropdown-item"><!----> <a href="/pages/9c8057/" class="nav-link">ClickHouse</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🧰实用工具" class="dropdown-title"><!----> <span class="title" style="display:;">🧰实用工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/32a577/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/pages/9864be/" class="nav-link">Maven</a></li><li class="dropdown-item"><!----> <a href="/pages/f5b30e/" class="nav-link">Nginx</a></li><li class="dropdown-item"><!----> <a href="/pages/290042/" class="nav-link">Arthas</a></li><li class="dropdown-item"><!----> <a href="/pages/9eb455/" class="nav-link">Idea</a></li><li class="dropdown-item"><!----> <a href="/pages/151c97/" class="nav-link">开发工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🐞运维" class="dropdown-title"><!----> <span class="title" style="display:;">🐞运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/748b9f/" class="nav-link">Docker</a></li><li class="dropdown-item"><!----> <a href="/pages/4b6fee/" class="nav-link">Linux</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="💡其他" class="dropdown-title"><!----> <span class="title" style="display:;">💡其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9cc0e1/" class="nav-link">高项</a></li><li class="dropdown-item"><!----> <a href="/pages/10e161/" class="nav-link">不一样的树形构建方式</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>第一部分：Java语言</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>一、Java基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>二、Java集合</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/e10c6c/" class="sidebar-link">引言</a></li><li><a href="/pages/9257fe/" class="sidebar-link">List</a></li><li><a href="/pages/c006b8/" aria-current="page" class="active sidebar-link">Map</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#hashmap的数据结构吗" class="sidebar-link">HashMap的数据结构吗？</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#hashmap-的底层实现版本对比" class="sidebar-link">HashMap 的底层实现版本对比？</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#你对红黑树了解多少-为什么不用二叉树-平衡树呢" class="sidebar-link">你对红黑树了解多少？为什么不用二叉树/平衡树呢？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c006b8/#什么是红黑树" class="sidebar-link">什么是红黑树？</a></li><li class="sidebar-sub-header level3"><a href="/pages/c006b8/#为什么不用二叉树" class="sidebar-link">为什么不用二叉树？</a></li><li class="sidebar-sub-header level3"><a href="/pages/c006b8/#为什么不用平衡二叉树" class="sidebar-link">为什么不用平衡二叉树？</a></li><li class="sidebar-sub-header level3"><a href="/pages/c006b8/#红黑树怎么保持平衡的" class="sidebar-link">红黑树怎么保持平衡的?</a></li><li class="sidebar-sub-header level4"><a href="/pages/c006b8/#左倾染色" class="sidebar-link">左倾染色</a></li><li class="sidebar-sub-header level4"><a href="/pages/c006b8/#右倾染色" class="sidebar-link">右倾染色</a></li><li class="sidebar-sub-header level4"><a href="/pages/c006b8/#左旋调衡" class="sidebar-link">左旋调衡</a></li><li class="sidebar-sub-header level4"><a href="/pages/c006b8/#右旋调衡" class="sidebar-link">右旋调衡</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#hashmap的put流程知道吗" class="sidebar-link">HashMap的put流程知道吗？</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#hashmap怎么查找元素的呢" class="sidebar-link">HashMap怎么查找元素的呢？</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#hashmap源码中在计算hash值的时候为什么要无符号右移16位" class="sidebar-link">HashMap源码中在计算hash值的时候为什么要无符号右移16位？</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#为什么hashmap的容量是2的幂次方呢" class="sidebar-link">为什么HashMap的容量是2的幂次方呢？</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#如果初始化hashmap-传一个17的值-new-hashmap-它会怎么处理" class="sidebar-link">如果初始化HashMap，传一个17的值 new HashMap ，它会怎么处理？</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#解决哈希冲突有哪些方法呢" class="sidebar-link">解决哈希冲突有哪些方法呢？</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#hashmap扩容机制了解吗" class="sidebar-link">HashMap扩容机制了解吗？</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#hashmap-是线程安全的吗-多线程下会有什么问题" class="sidebar-link">HashMap 是线程安全的吗？多线程下会有什么问题？</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#有什么办法能解决hashmap线程不安全的问题呢" class="sidebar-link">有什么办法能解决HashMap线程不安全的问题呢？</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#hashmap-内部节点是有序的吗" class="sidebar-link">HashMap 内部节点是有序的吗？</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#讲讲-linkedhashmap-怎么实现有序的" class="sidebar-link">讲讲 LinkedHashMap 怎么实现有序的？</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#hashmap-和-hashtable的区别" class="sidebar-link">HashMap 和 HashTable的区别?</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#hashmap-和-hashset-区别" class="sidebar-link">HashMap 和 HashSet 区别?</a></li><li class="sidebar-sub-header level2"><a href="/pages/c006b8/#能说一下concurrenthashmap的具体实现吗" class="sidebar-link">能说一下ConcurrentHashmap的具体实现吗？</a></li></ul></li><li><a href="/pages/142a50/" class="sidebar-link">Set</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>三、Java并发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>四、JVM</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第二部分：Java框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第三部分：计算机基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第四部分：数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第五部分：中间件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第六部分：分布式微服务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第七部分：项目</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第八部分：笔试题</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>小手册</span></li><li data-v-06225672><span data-v-06225672>第一部分：Java语言</span></li><li data-v-06225672><span data-v-06225672>二、Java集合</span></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="javascript:;" data-v-06225672>gping</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2024-03-05</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Map<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="map"><a href="#map" class="header-anchor">#</a> Map</h1> <h2 id="hashmap的数据结构吗"><a href="#hashmap的数据结构吗" class="header-anchor">#</a> HashMap的数据结构吗？</h2> <p>JDK1.7的数据结构是 <code>数组</code> + <code>单向链表</code></p> <p>JDK1.8的数据结构是 <code>数组</code> + <code>单向链表</code> + <code>红黑树</code></p> <p>数据结构示意图如下：</p> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/459960544024700.png" alt="459960544024700"></p> <p>几个关键点：</p> <ul><li><strong>存储结构</strong> ：HashMap内部使用一个数组（Entry[]）来存储数据。数组中的每个元素称为一个桶（Bucket），每个桶存储一个键值对（Entry）。</li> <li><strong>哈希函数</strong> ：HashMap使用键的哈希码（hash code）来计算存储位置。每个键值对根据哈希函数计算得到一个桶的索引，然后将键值对存储在该桶中。</li> <li><strong>冲突处理</strong> ：由于哈希函数的计算结果可能会出现冲突，即不同的键计算得到相同的桶索引。HashMap使用链表或红黑树来解决冲突。当桶中的元素较少时，使用链表存储键值对；当桶中的元素较多时，将链表转换为红黑树，以提高查找、插入和删除的效率。</li></ul> <h2 id="hashmap-的底层实现版本对比"><a href="#hashmap-的底层实现版本对比" class="header-anchor">#</a> HashMap 的底层实现版本对比？</h2> <table><thead><tr><th></th> <th style="text-align:center;">jdk1.7</th> <th style="text-align:center;">jdk1.8</th> <th></th></tr></thead> <tbody><tr><td><strong>初始化</strong></td> <td style="text-align:center;">在底层创建了长度为16的Entry[] table的数组</td> <td style="text-align:center;">使用HashMap()的构造器创建对象时，并没有在底层初始化长度为16的table数组</td> <td></td></tr> <tr><td><strong>节点类的变化</strong></td> <td style="text-align:center;">使用的是<code>Entry</code>类</td> <td style="text-align:center;">HashMap的键值对被封装在<code>Node</code>类中</td> <td></td></tr> <tr><td><strong>元素添加方式</strong></td> <td style="text-align:center;">如果当前位置有其他元素，则是<code>新元素指向旧元素</code>，采用<code>头插法</code>插入元素</td> <td style="text-align:center;">如果当前位置有其他元素，则是旧的元素指向新的元素，采用<code>尾插法</code>插入元素</td> <td>口诀：<code>七上八下</code></td></tr> <tr><td><strong>数据结构</strong></td> <td style="text-align:center;">数组+单向链表</td> <td style="text-align:center;">数组+单向链表+红黑树</td> <td></td></tr></tbody></table> <p><strong>红黑树出现与退化的时机：</strong></p> <ul><li>当某个索引i位置的<code>链表的长度达到8，且数组的长度超过64时</code>，此索引位置上的元素要从单向链表改为红黑树。</li> <li>如果索引i位置上是红黑树，当不断删除元素的情况下，当前索引i位置上的<code>元素的个数低于6时</code>，要从红黑树改为单向链表。</li></ul> <h2 id="你对红黑树了解多少-为什么不用二叉树-平衡树呢"><a href="#你对红黑树了解多少-为什么不用二叉树-平衡树呢" class="header-anchor">#</a> 你对红黑树了解多少？为什么不用二叉树/平衡树呢？</h2> <h3 id="什么是红黑树"><a href="#什么是红黑树" class="header-anchor">#</a> 什么是红黑树？</h3> <blockquote><p>红黑树是一种自平衡的二叉搜索树</p></blockquote> <p>它具有以下特性：</p> <ul><li><p>二叉搜索树性质 ：左子节点的值小于等于当前节点的值，右子节点的值大于等于当前节点的值。</p></li> <li><p>节点颜色：每个节点是红色或者黑色</p></li> <li><p>根节点：根节点是黑色</p></li> <li><p>叶子节点：每个叶子节点（NIL）是黑色。（注意：这里叶子节点，是指为空(NIL或NULL)的叶子节点）</p></li> <li><p>红色节点限制 ：每个红色节点的两个子节点都是黑色的。(从每个叶子到根的所有路径上不能有两个连续的红色节点)</p></li> <li><p>黑色节点计数 ：从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点（确保没有一条路径会比其他路径长出2倍）</p></li></ul> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240310153519745.png" alt="image-20240310153519745"></p> <h3 id="为什么不用二叉树"><a href="#为什么不用二叉树" class="header-anchor">#</a> 为什么不用二叉树？</h3> <p>红黑树相对于普通的二叉搜索树的优势在于它能够保持良好的平衡，性能更加优秀和稳定。</p> <p><code>普通的二叉搜索树在最坏情况下可能会退化成链表，导致插入、删除和查找操作的时间复杂度变为O(n)。</code></p> <p>而红黑树通过自平衡的特性，避免了这种退化情况，保证了操作的最坏时间复杂度为<code>O(log n)</code>，其中n是树中节点的数量。</p> <h3 id="为什么不用平衡二叉树"><a href="#为什么不用平衡二叉树" class="header-anchor">#</a> 为什么不用平衡二叉树？</h3> <p>相比于平衡二叉树，红黑树在保持平衡的过程中旋转的次数较少，提高了插入和删除操作的效率。</p> <p>红黑树通过引入节点颜色和特定性质，<code>保证了树的相对平衡</code>，<code>而平衡二叉树要求更严格的平衡条件</code>，需要更多的旋转操作来保持平衡，导致插入和删除操作的效率较低。因此，红黑树是一种更常用和广泛应用的平衡树结构。</p> <h3 id="红黑树怎么保持平衡的"><a href="#红黑树怎么保持平衡的" class="header-anchor">#</a> 红黑树怎么保持平衡的?</h3> <h4 id="左倾染色"><a href="#左倾染色" class="header-anchor">#</a> 左倾染色</h4> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/005933663895595.png" alt="005933663895595"></p> <ul><li>染色时根据当前节点的爷爷节点，找到当前节点的叔叔节点。</li> <li>再把父节点染黑、叔叔节点染黑，爷爷节点染红。但爷爷节点染红是临时的，当平衡树高操作后会把根节点染黑。</li></ul> <h4 id="右倾染色"><a href="#右倾染色" class="header-anchor">#</a> 右倾染色</h4> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/816348716345781.png" alt="816348716345781"></p> <h4 id="左旋调衡"><a href="#左旋调衡" class="header-anchor">#</a> 左旋调衡</h4> <p><strong>一次左旋</strong></p> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/122864102504351.png" alt="122864102504351"></p> <p><strong>右旋+左旋</strong></p> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/883632216174285.png" alt="883632216174285"></p> <h4 id="右旋调衡"><a href="#右旋调衡" class="header-anchor">#</a> 右旋调衡</h4> <p><strong>一次右旋</strong></p> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/364050111783462.png" alt="364050111783462"></p> <p><strong>左旋+右旋</strong></p> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/770551471349184.png" alt="770551471349184"></p> <h2 id="hashmap的put流程知道吗"><a href="#hashmap的put流程知道吗" class="header-anchor">#</a> HashMap的put流程知道吗？</h2> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/627545056344100.png" alt="627545056344100"></p> <ol><li><p>首先进行哈希值的扰动，获取一个新的哈希值。 <code>(key == null) ? 0 : (h =key.hashCode()) ^ (h &gt;&gt;&gt; 16);</code></p></li> <li><p>判断tab是否为空或者长度为0，如果是则进行扩容操作。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tab <span class="token operator">=</span> table<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
		n <span class="token operator">=</span> <span class="token punctuation">(</span>tab <span class="token operator">=</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>根据哈希值计算下标，如果对应下标正好没有存放数据，则直接插入即可否则需要覆盖。 <code>tab[i = (n - 1) &amp; hash])</code></p></li> <li><p>判断tab[i]是否为树节点，否则向链表中插入数据，是则向树中插入节点。</p></li> <li><p>如果链表中插入节点的时候，<code>链表长度大于等于8并且当前map的数组长度大于64</code>，则需要把链表转换为红黑树。 <code>treeifyBin(tab, hash);</code></p></li> <li><p>最后所有元素处理完成后，判断是否超过阈值； <code>threshold</code> ，超过则扩容。</p></li></ol> <h2 id="hashmap怎么查找元素的呢"><a href="#hashmap怎么查找元素的呢" class="header-anchor">#</a> HashMap怎么查找元素的呢？</h2> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/460957591815592.png" alt="460957591815592"></p> <p>HashMap的查找就简单很多：</p> <ol><li>使用扰动函数，获取新的哈希值</li> <li>计算数组下标，获取节点</li> <li>当前节点和key匹配，直接返回</li> <li>否则，当前节点是否为树节点，查找红黑树</li> <li>否则，遍历链表查找</li></ol> <h2 id="hashmap源码中在计算hash值的时候为什么要无符号右移16位"><a href="#hashmap源码中在计算hash值的时候为什么要无符号右移16位" class="header-anchor">#</a> HashMap源码中在计算hash值的时候为什么要无符号右移16位？</h2> <blockquote><p>所谓扰动函数指的就是 HashMap 的 hash 方法。使用 hash 方法也就是扰动函数是为了防止一些实现比较差的 hashCode() 方法 换句话说使用扰动函数之后可以减少碰撞。</p> <p>尽量扰动计算的出来的hash值，减少哈希冲突。</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hash</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">11</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Integer</span> a <span class="token operator">=</span> <span class="token number">65536</span> <span class="token operator">*</span> i <span class="token operator">+</span> <span class="token number">311156</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token function">hash</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">hash</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> h<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token punctuation">(</span>h <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token punctuation">(</span>h <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>⚠️注意 ： 扰动函数只有在hashCode值大于65536的时候效果才是最显著的，因为需要右移16位，所以hashCode值转换成二进制的位置要大于16位，也就是2的16次方（65536），如果hashCode太小，扰动的效果不大，因为hashCode跟hashCode右移16位进行异或时，将会得到它本身。</p> <p><strong>补充知识点：</strong></p> <table><thead><tr><th style="text-align:center;">运算符</th> <th style="text-align:center;">运算</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">＆</td> <td style="text-align:center;">与运算</td> <td style="text-align:center;">如果相对应位都是1，则结果为1，否则为0</td></tr> <tr><td style="text-align:center;">|</td> <td style="text-align:center;">或运算</td> <td style="text-align:center;">如果相对应位都是 0，则结果为 0，否则为 1</td></tr> <tr><td style="text-align:center;">^</td> <td style="text-align:center;">异或运算</td> <td style="text-align:center;">如果相对应位值相同，则结果为0，否则为1</td></tr> <tr><td style="text-align:center;">〜</td> <td style="text-align:center;">取反运算</td> <td style="text-align:center;">按位取反运算符翻转操作数的每一位，即0变成1，1变成0。</td></tr> <tr><td style="text-align:center;">&lt;&lt;</td> <td style="text-align:center;">左移运算</td> <td style="text-align:center;">空位补0，被移除的高位丢弃，空缺位补0。数据每向左移动一位，相当于原数据*2</td></tr> <tr><td style="text-align:center;">&gt;&gt;</td> <td style="text-align:center;">右移运算</td> <td style="text-align:center;">被移位的二进制最高位是0，右移后，空缺位补0。最高位是1，空缺位补1。数据每向右移动一位，相当于原数据/2</td></tr> <tr><td style="text-align:center;">&gt;&gt;&gt;</td> <td style="text-align:center;">无符号右移</td> <td style="text-align:center;">被移位二进制最高位无论是0或者是1，空缺位都用0补。</td></tr></tbody></table> <p><strong>（1）左移：&lt;&lt;</strong></p> <p>运算规则：在一定范围内，数据每向左移动一位，相当于原数据*2。（正数、负数都适用）</p> <p>【注意】当左移的位数n超过该数据类型的总位数时，相当于左移（n-总位数）位</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token number">3</span><span class="token operator">&lt;&lt;</span><span class="token number">4</span>  类似于  <span class="token number">3</span><span class="token operator">*</span><span class="token number">2</span>的<span class="token number">4</span>次幂 <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">3</span><span class="token operator">*</span><span class="token number">16</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">48</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20200225113651675.png" alt="image-20200225113651675"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">-</span><span class="token number">3</span><span class="token operator">&lt;&lt;</span><span class="token number">4</span>  类似于  <span class="token operator">-</span><span class="token number">3</span><span class="token operator">*</span><span class="token number">2</span>的<span class="token number">4</span>次幂 <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">3</span><span class="token operator">*</span><span class="token number">16</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">48</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240310212356703.png" alt="image-20240310212356703"></p> <p><strong>（2）右移：&gt;&gt;</strong></p> <p>运算规则：在一定范围内，数据每向右移动一位，相当于原数据/2。（正数、负数都适用）</p> <p>【注意】如果不能整除，<code>向下取整</code>。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token number">69</span><span class="token operator">&gt;&gt;</span><span class="token number">4</span>  类似于  <span class="token number">69</span><span class="token operator">/</span><span class="token number">2</span>的<span class="token number">4</span>次 <span class="token operator">=</span> <span class="token number">69</span><span class="token operator">/</span><span class="token number">16</span> <span class="token operator">=</span><span class="token number">4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240310212417510.png" alt="image-20240310212417510"></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-69&gt;&gt;4  类似于  -69/2的4次 = -69/16 = -5
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240310212432679.png" alt="image-20240310212432679"></p> <p><strong>（3）无符号右移：&gt;&gt;&gt;</strong></p> <p>运算规则：往右移动后，左边空出来的位直接补0。（正数、负数都适用）</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>69&gt;&gt;&gt;4  类似于  69/2的4次 = 69/16 =4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240310212441829.png" alt="image-20240310212441829"></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>-69&gt;&gt;&gt;4   结果：268435451
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240310212454649.png" alt="image-20240310212454649"></p> <p><strong>（4）按位与：&amp;</strong></p> <p>运算规则：对应位都是1才为1，否则为0。</p> <ul><li><p>1 &amp; 1 结果为1</p></li> <li><p>1 &amp; 0 结果为0</p></li> <li><p>0 &amp; 1 结果为0</p></li> <li><p>0 &amp; 0 结果为0</p></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token number">9</span> <span class="token operator">&amp;</span> <span class="token number">7</span> <span class="token operator">=</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20200225122440953.png" alt="image-20200225122440953"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">-</span><span class="token number">9</span> <span class="token operator">&amp;</span> <span class="token number">7</span> <span class="token operator">=</span> <span class="token number">7</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240310212525833.png" alt="image-20240310212525833"></p> <p><strong>（5）按位或：|</strong></p> <p>运算规则：对应位只要有1即为1，否则为0。</p> <ul><li><p>1 | 1 结果为1</p></li> <li><p>1 | 0 结果为1</p></li> <li><p>0 | 1 结果为1</p></li> <li><p>0 &amp; 0 结果为0</p></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token number">9</span> <span class="token operator">|</span> <span class="token number">7</span>  <span class="token comment">//结果： 15</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240310212533134.png" alt="image-20240310212533134"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">-</span><span class="token number">9</span> <span class="token operator">|</span> <span class="token number">7</span> <span class="token comment">//结果： -9</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240310212547890.png" alt="image-20240310212547890"></p> <p><strong>（6）按位异或：^</strong></p> <p>运算规则：对应位一个为1一个为0，才为1，否则为0。</p> <ul><li><p>1 ^ 1 结果为0</p></li> <li><p>1 ^ 0 结果为1</p></li> <li><p>0 ^ 1 结果为1</p></li> <li><p>0 ^ 0 结果为0</p></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token number">9</span> <span class="token operator">^</span> <span class="token number">7</span>  <span class="token comment">//结果为14</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240310212556840.png" alt="image-20240310212556840"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">-</span><span class="token number">9</span> <span class="token operator">^</span> <span class="token number">7</span> <span class="token comment">//结果为-16</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240310212603231.png" alt="image-20240310212603231"></p> <p><strong>（7）按位取反：~</strong></p> <p>运算规则：对应位为1，则结果为0；对应位为0，则结果为1。</p> <ul><li><p>~0就是1</p></li> <li><p>~1就是0</p></li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">~</span><span class="token number">9</span>  <span class="token comment">//结果：-10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20200225124112662.png" alt="image-20200225124112662"></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">~</span><span class="token operator">-</span><span class="token number">9</span>  <span class="token comment">//结果：8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240310212620214.png" alt="image-20240310212620214"></p> <h2 id="为什么hashmap的容量是2的幂次方呢"><a href="#为什么hashmap的容量是2的幂次方呢" class="header-anchor">#</a> 为什么HashMap的容量是2的幂次方呢？</h2> <p>1、是为了方便哈希取余</p> <blockquote><p>因为hash值是一个整数，而数组的长度也是一个整数，计算下标就有两种思路：</p></blockquote> <p>①hash 值 % table.length会得到一个[0,table.length-1]范围的值，正好是下标范围，但是用%运算效率没有位运算符&amp;高。</p> <p>②hash 值 &amp; (table.length-1)，任何数 &amp; (table.length-1)的结果也一定在[0, table.length-1]范围。</p> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240310203025447.png" alt="image-20240310203025447"></p> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/1522263800372286.png" alt="1522263800372286"></p> <p>2、降低冲突</p> <blockquote><p>因为如果数组的长度为2的n次幂，那么table.length-1的二进制就是一个<code>高位全是0</code>，<code>低位全是1</code>的数字，这样才能保证每一个下标位置都有机会被用到。</p></blockquote> <table><thead><tr><th></th> <th>二进制</th></tr></thead> <tbody><tr><td>16（length）</td> <td>00010000</td></tr> <tr><td>16-1（length-1）</td> <td>00001111</td></tr> <tr><td>32（length）</td> <td>00100000</td></tr> <tr><td>32-1（length-1）</td> <td>00011111</td></tr></tbody></table> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// hashCode值是   ？</span>
<span class="token comment">// table.length是16</span>
<span class="token comment">// table.length-1是15</span>

？   <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span><span class="token operator">?</span>
<span class="token number">15</span>	 <span class="token number">00001111</span>
<span class="token operator">&amp;</span>_____________
	 <span class="token number">00000000</span>	<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
	 <span class="token number">00000001</span>	<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
	 <span class="token number">00000010</span>	<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
	 <span class="token number">00000011</span>	<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>
	 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	 <span class="token number">00001111</span>    <span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span>
	 范围是<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">]</span>，一定在<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span>table<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>范围内

<span class="token comment">// 假如hashCode是32，结果是0</span>
<span class="token number">32</span>   <span class="token number">00100000</span>
<span class="token number">15</span>	 <span class="token number">00001111</span>
<span class="token operator">&amp;</span>_____________
     <span class="token number">00000000</span>
<span class="token comment">// 那假如hashCode是31呢？结果16</span>
<span class="token number">31</span>   <span class="token number">00011111</span>
<span class="token number">15</span>	 <span class="token number">00001111</span>
<span class="token operator">&amp;</span>_____________
     <span class="token number">00001111</span>  
<span class="token comment">// 那假如hashCode是30呢？结果14</span>
<span class="token number">30</span>   <span class="token number">00011110</span>
<span class="token number">15</span>	 <span class="token number">00001111</span>
<span class="token operator">&amp;</span>_____________
     <span class="token number">00001110</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>通过以上可以发现，只有hashCode变化，就有可能得到不一样的下标，并且保证每一个下标位置都有机会被用到。</p> <h2 id="如果初始化hashmap-传一个17的值-new-hashmap-它会怎么处理"><a href="#如果初始化hashmap-传一个17的值-new-hashmap-它会怎么处理" class="header-anchor">#</a> 如果初始化HashMap，传一个17的值 new HashMap&lt;&gt; ，它会怎么处理？</h2> <p>简单来说，就是初始化时，传的不是2的倍数时，HashMap会向上寻找 <code>离得最近的2的倍数</code> ，所以传入17，但HashMap的实际容量是32。</p> <p>我们来看看详情，在HashMap的初始化中，有这样⼀段⽅法：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">,</span> <span class="token keyword">float</span> loadFactor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>loadFactor <span class="token operator">=</span> loadFactor<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>threshold <span class="token operator">=</span> <span class="token function">tableSizeFor</span><span class="token punctuation">(</span>initialCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>阀值 threshold ，通过⽅法 tableSizeFor 进⾏计算，是根据初始化传的参数来计算的。</li> <li>同时，这个⽅法也要要寻找⽐初始值⼤的，最⼩的那个2进制数值。⽐如传了17，我应该找到的是32。</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">tableSizeFor</span><span class="token punctuation">(</span><span class="token keyword">int</span> cap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> cap <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    n <span class="token operator">|=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
    n <span class="token operator">|=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
    n <span class="token operator">|=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">4</span><span class="token punctuation">;</span>
    n <span class="token operator">|=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">8</span><span class="token punctuation">;</span>
    n <span class="token operator">|=</span> n <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">16</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;=</span> <span class="token constant">MAXIMUM_CAPACITY</span><span class="token punctuation">)</span> <span class="token operator">?</span>
    <span class="token constant">MAXIMUM_CAPACITY</span> <span class="token operator">:</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>MAXIMUM_CAPACITY = 1 &lt;&lt; 30，这个是临界范围，也就是最⼤的Map集合。</li> <li>计算过程是向右移位1、2、4、8、16，和原来的数做 | 运算，这主要是为了把⼆进制的各个位置都填上1，当⼆进制的各个位置都是1以后，就是⼀个标准的2的倍数减1了，最后把结果加1再返回即可。</li></ul> <p>以17为例，看一下初始化计算table容量的过程：</p> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/202185494485573.png" alt="202185494485573"></p> <h2 id="解决哈希冲突有哪些方法呢"><a href="#解决哈希冲突有哪些方法呢" class="header-anchor">#</a> 解决哈希冲突有哪些方法呢？</h2> <ul><li><code>链地址法</code> ：在冲突的位置拉一个链表，把冲突的元素放进去。</li> <li><code>开放定址法</code>：开放定址法就是从冲突的位置再接着往下找，给冲突元素找个空位。找到空闲位置的方法也有很多种：
<ul><li>线行探查法: 从冲突的位置开始，依次判断下一个位置是否空闲，直至找到空闲位置</li> <li>平方探查法: 从冲突的位置x开始，第一次增加 1^2 个位置，第二次增加2^2 …，直至找到空闲的位置</li></ul></li> <li>再哈希法 ：换种哈希函数，重新计算冲突元素的地址。</li> <li>建立公共溢出区 ：再建一个数组，把冲突的元素放进去。</li></ul> <h2 id="hashmap扩容机制了解吗"><a href="#hashmap扩容机制了解吗" class="header-anchor">#</a> HashMap扩容机制了解吗？</h2> <p>HashMap是基于数组+链表和红黑树实现的，但用于存放key值的桶数组的长度是固定的，由初始化参数确定。</p> <p>那么，随着数据的插入数量增加以及负载因子的作用下，就需要扩容来存放更多的数据。而扩容中有一个非常重要的点，就是jdk1.8中的优化操作，可以不需要再重新计算每一个元素的哈希值。</p> <p>因为HashMap的初始容量是2的次幂，扩容之后的长度是原来的二倍，新的容量也是2的次幂，所以，元素，要么在原位置，要么在原位置再移动2的次幂。</p> <p>看下这张图，n为table的长度，图 a 表示扩容前的key1和key2两种key确定索引的位置，图 b 表示扩容后key1和key2两种key确定索引位置。</p> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240314150841288.png" alt="image-20240314150841288"></p> <p>元素在重新计算hash之后，因为n变为2倍，那么n-1的mask范围在高位多1bit(红色)，</p> <p>因此新的index就会发生这样的变化：</p> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/image-20240314151126749.png" alt="image-20240314151126749"></p> <p>所以在扩容时，<strong>只需要看n-1新增的那一位和原来的hash值对应的那一位是0还是1就行了，是0的话索引没变，是1的化变成 原索引+oldCap</strong></p> <p>看看如16扩容为32的示意图：</p> <p><img src="https://gitee.com/studentgitee/note-picture/raw/master/335548153987603.png" alt="335548153987603"></p> <h2 id="hashmap-是线程安全的吗-多线程下会有什么问题"><a href="#hashmap-是线程安全的吗-多线程下会有什么问题" class="header-anchor">#</a> HashMap 是线程安全的吗？多线程下会有什么问题？</h2> <p>HashMap不是线程安全的，可能会发生这些问题：</p> <ol><li><p><code>多线程下扩容死循环</code>：在JDK1.7中，HashMap使用头插法插入元素，当多个线程同时进行扩容操作时，可能会导致环形链表的出现，从而形成死循环。为了解决这个问题，JDK1.8中的HashMap改为使用尾插法插入元素，在扩容时保持链表元素原本的顺序，避免了环形链表的问题。</p></li> <li><p><code>多线程的put可能导致元素的丢失</code>：当多个线程同时执行put操作时，如果计算出来的索引位置相同，就会导致后一个key覆盖前一个key，从而导致元素的丢失。这个问题在JDK1.7和JDK1.8中都存在。</p></li> <li><p><code>put和get并发时，可能导致get为null</code>：当一个线程执行put操作导致扩容时，另一个线程同时执行get操作，由于扩容过程中元素迁移的不可见性，可能导致get操作返回null。这个问题在JDK1.7和JDK1.8中都存在。</p></li></ol> <h2 id="有什么办法能解决hashmap线程不安全的问题呢"><a href="#有什么办法能解决hashmap线程不安全的问题呢" class="header-anchor">#</a> 有什么办法能解决HashMap线程不安全的问题呢？</h2> <p>为了在多线程环境下安全地使用HashMap，可以采取以下措施：</p> <ol><li>使用线程安全的包装类 ：可以使用 Collections.synchronizedMap() 方法将HashMap包装成线程安全的Map。这个方法返回一个线程安全的Map对象，对该对象的操作会自动进行同步，从而保证线程安全。</li> <li>使用同步机制 ：可以使用 synchronized 关键字或其他同步机制（如ReentrantLock ）对HashMap进行加锁，确保在多线程环境下的操作是互斥的，从而保证线程安全。不推荐，一般都是用现成的。</li> <li>使用线程安全的并发容器 ：可以使用 ConcurrentHashMap 代替HashMap。ConcurrentHashMap 是Java提供的线程安全的哈希表实现，通过使用锁分段技术和CAS操作来实现高效的并发性能。但是需要注意的是，如果ConcurrentHashMap 使用不当，也会出现线程安全问题。</li></ol> <h2 id="hashmap-内部节点是有序的吗"><a href="#hashmap-内部节点是有序的吗" class="header-anchor">#</a> HashMap 内部节点是有序的吗？</h2> <p>HashMap 内部节点的顺序是无序的，这是因为 HashMap 使用的是哈希表的数据结构，它通过哈希函数将键映射到桶（bucket）中，而不是按照插入顺序进行存储。</p> <p>如果需要有序的存储和遍历元素，可以考虑使用 LinkedHashMap 或者 TreeMap。</p> <h2 id="讲讲-linkedhashmap-怎么实现有序的"><a href="#讲讲-linkedhashmap-怎么实现有序的" class="header-anchor">#</a> 讲讲 LinkedHashMap 怎么实现有序的？</h2> <h2 id="hashmap-和-hashtable的区别"><a href="#hashmap-和-hashtable的区别" class="header-anchor">#</a> HashMap 和 HashTable的区别?</h2> <table><thead><tr><th style="text-align:center;"></th> <th style="text-align:center;">HashMap</th> <th style="text-align:center;">HashTable</th></tr></thead> <tbody><tr><td style="text-align:center;">线程是否安全</td> <td style="text-align:center;">HashMap是线程不安全的，在多线程并发的环境下，可能会产生<code>死锁</code>等问题</td> <td style="text-align:center;">Hashtable是线程安全的，它的每个方法上都有synchronized 关键字</td></tr> <tr><td style="text-align:center;">对null的支持</td> <td style="text-align:center;">key可以为null，但是这样的key只能有一个，因为必须保证key的唯一性；可以有多个 key值对应的value为null</td> <td style="text-align:center;">key和value都不能为null</td></tr> <tr><td style="text-align:center;">初始容量大小和每次扩充容量大小</td> <td style="text-align:center;">HashMap 的初始容量为 16 <br>HashMap 的扩容机制是当存储的元素数量超过哈希表大小的负载因子（默认为 0.75）时，会重新分配一个大小是原来的两倍的哈希表，并将原有的元素重新分配到新表中</td> <td style="text-align:center;">Hashtable 的初始容量为 11<br>Hashtable 的扩容机制是当存储的元素数量超过<code>哈希表大小</code>的一半时，会重新分配一个大小是原来的两倍的哈希表，并将原有的元素重新分配到新表中</td></tr></tbody></table> <h2 id="hashmap-和-hashset-区别"><a href="#hashmap-和-hashset-区别" class="header-anchor">#</a> HashMap 和 HashSet 区别?</h2> <p>如果看过 <code>HashSet</code> 源码的话就应该知道：<code>HashSet</code> 底层就是基于 <code>HashMap</code> 实现的。（<code>HashSet</code> 的源码非常非常少，因为除了 <code>clone()</code>、<code>writeObject()</code>、<code>readObject()</code>是 <code>HashSet</code> 自己不得不实现之外，其他方法都是直接调用 <code>HashMap</code> 中的方法。</p> <table><thead><tr><th style="text-align:center;"><code>HashMap</code></th> <th style="text-align:center;"><code>HashSet</code></th></tr></thead> <tbody><tr><td style="text-align:center;">实现了 <code>Map</code> 接口</td> <td style="text-align:center;">实现 <code>Set</code> 接口</td></tr> <tr><td style="text-align:center;">存储键值对</td> <td style="text-align:center;">仅存储对象</td></tr> <tr><td style="text-align:center;">调用 <code>put()</code>向 map 中添加元素</td> <td style="text-align:center;">调用 <code>add()</code>方法向 <code>Set</code> 中添加元素</td></tr> <tr><td style="text-align:center;"><code>HashMap</code> 使用键（Key）计算 <code>hashcode</code></td> <td style="text-align:center;"><code>HashSet</code> 使用成员对象来计算 <code>hashcode</code> 值，对于两个对象来说 <code>hashcode</code> 可能相同，所以<code>equals()</code>方法用来判断对象的相等性</td></tr></tbody></table> <h2 id="能说一下concurrenthashmap的具体实现吗"><a href="#能说一下concurrenthashmap的具体实现吗" class="header-anchor">#</a> 能说一下ConcurrentHashmap的具体实现吗？</h2> <p><code>ConcurrentHashmap</code>线程安全在jdk1.7版本是基于 <code>分段锁</code> 实现，在jdk1.8是基于<code>CAS+synchronized</code>实现。</p></div></div>  <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/05/23, 15:34:23</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/9257fe/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">List</div></a> <a href="/pages/142a50/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Set</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/9257fe/" class="prev">List</a></span> <span class="next"><a href="/pages/142a50/">Set</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span>Gping | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.57e44612.js" defer></script><script src="/assets/js/2.ea24d1ee.js" defer></script><script src="/assets/js/198.452ad7b8.js" defer></script>
  </body>
</html>
