(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{432:function(t,e,l){"use strict";l.r(e);var a=l(8),i=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"配置文件详解"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置文件详解"}},[t._v("#")]),t._v(" 配置文件详解")]),t._v(" "),e("h2",{attrs:{id:"配置文件位置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置文件位置"}},[t._v("#")]),t._v(" 配置文件位置")]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("Linux：/etc/influxdb/influxdb.conf\n\nmaxOS：/usr/local/etc/influxdb.conf\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br")])]),e("p",[t._v("使用配置文件")]),t._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("influxd "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-config")]),t._v(" /etc/influxdb/influxdb.conf\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"元数据配置-meta"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#元数据配置-meta"}},[t._v("#")]),t._v(" 元数据配置[meta]")]),t._v(" "),e("p",[t._v("用来控制influxdb的元数据信息，包括database，retention policy策略，CQ等信息")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("配置名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("dir")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("/usr/local/var/influxdb/meta")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("存储元数据信息的路径")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("retention-autocreate")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("true")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("当数据库创建时是否自动创建默认的retention policy")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("logging-enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("true")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("是否允许打印元数据相关的日志")])])])]),t._v(" "),e("h2",{attrs:{id:"数据配置-data"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据配置-data"}},[t._v("#")]),t._v(" 数据配置[data]")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("配置名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("dir")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("/usr/local/var/influxdb/data")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("TSM文件存储的路径")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("wal-dir")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("/usr/local/var/influxdb/wal")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("WAL文件存储的路径")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("trace-logging-enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("false")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("输出TSM Engine的日志")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("query-log-enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("true")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("在执行查询语句之前，将查询语句输出到日志中")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("cache-max-memory-size")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("1g")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("shard缓存的最大值，如果超过最大值，shard将不再写入数据。若不带单位，则默认为字节")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("cache-snapshot-memory-size")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("25m")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("缓存快照的大小，超过数值，engine会将数据写入到TSM文件中")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("cache-snapshot-write-cold-duration")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("10m")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("当shard没有写入或删除数据，engine将cache的数据写入到TSM文件中的间隔")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("compact-full-write-cold-duration")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("4h")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("当shard没有写入或删除数据时，engine压缩shard中所有TSM文件的间隔")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("max-series-per-database")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("1000000")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("每个database允许的最大series的最大值，当database的series的数据量超过数值，将拒绝写入，并返回{“error”:”max series per database exceeded: “}。设置为0表示对series的数量没有限制")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("max-values-per-tag")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("100000")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("每个tag value所允许的最大数量。当tag的数量超过配置，influxdb会返回partial write 错误。对应已有的tag value写入不会失败，但是对于新建的tag value，写入会失败")])])])]),t._v(" "),e("h2",{attrs:{id:"查询配置-coordinator"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查询配置-coordinator"}},[t._v("#")]),t._v(" 查询配置[coordinator]")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("配置名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("write-timeout")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("10s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("写入超时时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("max-concurrent-queries")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("0")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("inflxudb实例允许的最大查询数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("query-timeout")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("0s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询超时时间，设置为0表示查询没有超时时间")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("log-queries-after")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("0s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("慢查询时间，当查询时间超过配置，influxdb将把这个查询记录到日志中")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("max-select-point")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("0")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("select语句所能处理的最大point数，设置为0，表示没有限制")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("max-select-series")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("0")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("select语句所能处理的最大series数据，设置为0，表示没有限制")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("max-select_buckets")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("0")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("group by time()的最大数量")])])])]),t._v(" "),e("h2",{attrs:{id:"retention-policy配置-retention"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#retention-policy配置-retention"}},[t._v("#")]),t._v(" retention policy配置[retention]")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("配置名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("true")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("是否启用retention policy")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("check-interval")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("30ms0s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("check retention policy的间隔")])])])]),t._v(" "),e("h2",{attrs:{id:"监控配置-monitor"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#监控配置-monitor"}},[t._v("#")]),t._v(" 监控配置[monitor]")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("配置名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("store-enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("true")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("是否记录监控信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("store-database")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("_interval")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("监控数据存储的数据库")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("store-interval")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("10s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("记录监控信息的间隔")])])])]),t._v(" "),e("h2",{attrs:{id:"http配置-http"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http配置-http"}},[t._v("#")]),t._v(" http配置[http]")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("配置名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("true")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("是否启用http")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("bind-address")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("8086")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Http端口")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("auth-enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("false")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("是否开启验证")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("max-body-size")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("25000000")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("request body的最大值，如果超过配置，将返回413")])])])]),t._v(" "),e("h2",{attrs:{id:"cq配置-continuous-queries"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cq配置-continuous-queries"}},[t._v("#")]),t._v(" CQ配置[continuous_queries]")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("配置名称")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("true")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("是否启用CQ")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("query-stats-enabled")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("false")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("是否将CQ的监控信息记录到默认的监控数据库")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("run-interval")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("1s")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("influxdb检查是否需要执行CQ的间隔")])])])])])}),[],!1,null,null,null);e.default=i.exports}}]);