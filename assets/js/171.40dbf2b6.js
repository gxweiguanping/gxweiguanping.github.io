(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{502:function(s,a,t){"use strict";t.r(a);var e=t(8),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"搭建kafka带sasl用户密码验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建kafka带sasl用户密码验证"}},[s._v("#")]),s._v(" 搭建kafka带SASL用户密码验证")]),s._v(" "),a("blockquote",[a("p",[s._v("认证的原因就一个，安全！！！")])]),s._v(" "),a("h2",{attrs:{id:"_1、kafka认证方式类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、kafka认证方式类型"}},[s._v("#")]),s._v(" 1、kafka认证方式类型")]),s._v(" "),a("p",[s._v("kafka验证方式，有两大类如下，文档内容在 kafka官方文档的 第七节 security，"),a("strong",[s._v("强烈建议大家去看下，不想看英文的可以翻译中文后看")])]),s._v(" "),a("ul",[a("li",[s._v("SSL（"),a("a",{attrs:{href:"https://kafka.apache.org/28/documentation.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方2.8.xSSL文档连接"),a("OutboundLink")],1),s._v("）")]),s._v(" "),a("li",[s._v("SASL（"),a("a",{attrs:{href:"https://kafka.apache.org/28/documentation.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方2.8.xSASL文档连接"),a("OutboundLink")],1),s._v("）")])]),s._v(" "),a("ol",[a("li",[s._v("SASL_SSL (Simple Authentication and Security Layer over SSL/TLS)：这是Kafka的高度安全的传输协议。它结合了SSL/TLS（用于加密通信）和SASL（用于身份验证）来提供强大的安全性。使用SASL_SSL，Kafka客户端和服务器之间的通信将是加密的，并且需要经过身份验证才能建立连接。常见的身份验证机制包括GSSAPI（Kerberos）、PLAIN（用户名和密码）等。SASL_SSL是Kafka中最安全的选项，适用于敏感数据和合规性要求高的场景。")]),s._v(" "),a("li",[s._v("SASL_PLAINTEXT (Simple Authentication and Security Layer over plaintext)：这是Kafka的另一种SASL支持方式，但不涉及加密。使用SASL_PLAINTEXT，身份验证是必需的，但通信不加密。这意味着数据在传输过程中是以明文形式传输的，因此对于保护数据隐私要求较低的场景或在内部网络中使用时，可以选择此选项。常见的身份验证机制也包括PLAIN（用户名和密码）等。")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[s._v("身份验证方式")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("kafka版本")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("说明")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("官方文档链接")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("SASL/GSSAPI (Kerberos)")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("0.9.0.0")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("使用的Kerberos认证，可以集成目录服务，比如AD。从Kafka0.9版本开始支持。")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("a",{attrs:{href:"https://kafka.apache.org/34/documentation.html#security_sasl_kerberos",target:"_blank",rel:"noopener noreferrer"}},[s._v("Kerberos"),a("OutboundLink")],1)])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("SASL/PLAIN")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("0.10.0.0")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("使用简单用户名和密码形式。从Kafka0.10版本开始支持，不支持动态增加账户和密码")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("a",{attrs:{href:"https://kafka.apache.org/34/documentation.html#security_sasl_plain",target:"_blank",rel:"noopener noreferrer"}},[s._v("SASL/PLAIN"),a("OutboundLink")],1)])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("SASL/SCRAM-SHA-256")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("0.10.2.0")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("主要解决PLAIN动态更新问题以及安全机制，从Kafka0.10.2开始支持")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("a",{attrs:{href:"https://kafka.apache.org/34/documentation.html#security_sasl_scram",target:"_blank",rel:"noopener noreferrer"}},[s._v("SCRAM"),a("OutboundLink")],1)])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("SASL/SCRAM-SHA-512")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("0.10.2.0")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("主要解决PLAIN动态更新问题以及安全机制，从Kafka0.10.2开始支持")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("a",{attrs:{href:"https://kafka.apache.org/34/documentation.html#security_sasl_scram",target:"_blank",rel:"noopener noreferrer"}},[s._v("SCRAM"),a("OutboundLink")],1)])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("SASL/OAUTHBEARER")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("2.0")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("基于OAuth 2认证框架，从Kafka2.0版本开始支持")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("a",{attrs:{href:"https://kafka.apache.org/34/documentation.html#security_sasl_oauthbearer",target:"_blank",rel:"noopener noreferrer"}},[s._v("OAUTHBEARER"),a("OutboundLink")],1)])])])]),s._v(" "),a("h2",{attrs:{id:"_2、单机kafka-sasl用户密码验证-内外网分流"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、单机kafka-sasl用户密码验证-内外网分流"}},[s._v("#")]),s._v(" 2、单机kafka+SASL用户密码验证+内外网分流")]),s._v(" "),a("h3",{attrs:{id:"新建挂载目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建挂载目录"}},[s._v("#")]),s._v(" 新建挂载目录")]),s._v(" "),a("p",[s._v("新建kafka挂载目录")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /data/docker_kafka/data\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /data/docker_kafka/secrets\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("新建zookeeper挂载目录")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /data/docker_zookeeper/conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /data/docker_zookeeper/data\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /data/docker_zookeeper/secrets\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"docker-compose-yml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-yml"}},[s._v("#")]),s._v(" "),a("strong",[s._v("docker-compose.yml")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("version: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\nservices:\n  zookeeper:\n    image: wurstmeister/zookeeper\n    container_name: zookeeper\n    volumes:\n       - /data/docker_zookeeper/data:/opt/zookeeper-3.4.13/data\n       - /data/docker_zookeeper/conf:/opt/zookeeper-3.4.13/conf\n       - /data/docker_zookeeper/secrets:/opt/zookeeper-3.4.13/secrets/\n    environment:\n      ZOOKEEPER_CLIENT_PORT: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("\n      ZOOKEEPER_TICK_TIME: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("\n      SERVER_JVMFLAGS: "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Djava.security.auth.login.config")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/zookeeper-3.4.13/secrets/server_jaas.conf\n    ports:\n      - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v(":2181\n    restart: always\n    privileged: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n  kafka1:\n    image: wurstmeister/kafka\n    container_name: kafka_master\n    depends_on:\n      - zookeeper\n    ports:\n      - "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"29092:29092"')]),s._v("\n      - "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"9092:9092"')]),s._v("\n    volumes:\n      - /data/docker_kafka/data:/kafka\n      - /data/docker_kafka/secrets:/opt/kafka/secrets/\n      - /var/run/docker.sock:/var/run/docker.sock\n    environment:\n      KAFKA_BROKER_ID: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("  \n      KAFKA_NUM_PARTITIONS: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n      KAFKA_DEFAULT_REPLICATION_FACTOR: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n      KAFKA_ZOOKEEPER_CONNECT: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.62:2181\n      KAFKA_LISTENERS: INSIDE://:9092,OUTSIDE://:29092\n      KAFKA_ADVERTISED_LISTENERS: INSIDE://192.168.1.62:9092,OUTSIDE://"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("外网ip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(":29092\n      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: INSIDE:SASL_PLAINTEXT,OUTSIDE:SASL_PLAINTEXT\n      KAFKA_INTER_BROKER_LISTENER_NAME: INSIDE\n      KAFKA_SASL_MECHANISM_INTER_BROKER_PROTOCOL: PLAIN\n      KAFKA_SASL_ENABLED_MECHANISMS: PLAIN\n      KAFKA_AUTHORIZER_CLASS_NAME: kafka.security.auth.SimpleAclAuthorizer\n      KAFKA_SUPER_USERS: User:admin\n      KAFKA_ALLOW_EVERYONE_IF_NO_ACL_FOUND: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v("\n      KAFKA_OPTS: "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Djava.security.auth.login.config")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/kafka/secrets/server_jaas.conf\n    restart: always\n    privileged: "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br")])]),a("h4",{attrs:{id:"参数解释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数解释"}},[s._v("#")]),s._v(" "),a("strong",[s._v("参数解释")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[s._v("参数")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("示例值")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("KAFKA_SASL_MECHANISM_INTER_BROKER_PROTOCOL")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("PLAIN")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("指定 Kafka 服务器之间使用的安全机制，这里设置为 PLAIN，表示明文方式的认证机制。")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("KAFKA_SASL_ENABLED_MECHANISMS")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("PLAIN")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("这个参数指定允许的 SASL 机制，这里同样设置为 PLAIN。")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("KAFKA_AUTHORIZER_CLASS_NAME")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("kafka.security.auth.SimpleAclAuthorizer")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("指定了 Kafka 使用的授权类。在这个例子中，使用的是基于 ACL（访问控制列表）的简单授权器。")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("KAFKA_SUPER_USERS")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("User:admin")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("指定了超级用户，拥有所有权限。")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("KAFKA_ALLOW_EVERYONE_IF_NO_ACL_FOUND")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("true")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("设置为true，ACL机制为黑名单机制，只有黑名单中的用户无法访问，默认为false，ACL机制为白名单机制，只有白名单中的用户可以访问")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("KAFKA_OPTS")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("-Djava.security.auth.login.config"),a("br"),s._v("=/opt/kafka/secrets/server_jaas.conf")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("向 Kafka 服务器传递了 Java 虚拟机的参数，指定了登录配置文件的路径，其中包含了认证所需的配置信息")])])])]),s._v(" "),a("h3",{attrs:{id:"新建server-jaas-conf文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建server-jaas-conf文件"}},[s._v("#")]),s._v(" 新建server_jaas.conf文件")]),s._v(" "),a("p",[s._v("在"),a("code",[s._v("/data/docker_zookeeper/secrets")]),s._v("下新建"),a("code",[s._v("zookeeper")]),s._v("的"),a("code",[s._v("server_jaas.conf")]),s._v("，内容如下：")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("注意")])]),s._v(" "),a("p",[a("strong",[s._v("下列文件内容请保证顺序，也就是先Server再Client，并且不要写注释放里面")]),s._v("。不然有可能启动的时候zookerper会报错\"No JAAS configuration section named 'Client' was found in specified JAAs configuration file\"类似错误")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("Server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    org.apache.zookeeper.server.auth.DigestLoginModule required\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("username")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("password")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jdyx#qwe12"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user_super")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jdyx#qwe12"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user_admin")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jdyx#qwe12"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nClient "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    org.apache.zookeeper.server.auth.DigestLoginModule required\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("username")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("password")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jdyx#qwe12"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("在"),a("code",[s._v("/data/docker_kafka/secrets")]),s._v("下新建"),a("code",[s._v("kafka")]),s._v("的"),a("code",[s._v("server_jaas.conf")]),s._v("，内容如下：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("KafkaServer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    org.apache.kafka.common.security.plain.PlainLoginModule required\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("username")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("password")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jdyx#qwe12"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user_admin")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jdyx#qwe12"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nKafkaClient "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    org.apache.kafka.common.security.plain.PlainLoginModule required\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("username")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("password")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jdyx#qwe12"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"zookeeper的配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zookeeper的配置文件"}},[s._v("#")]),s._v(" zookeeper的配置文件")]),s._v(" "),a("p",[s._v("以下三个文件为"),a("code",[s._v("zookeeper")]),s._v("的配置文件，这3个文件是要挂载出来的，都是使用docker cp 命令 从zookeeper容器copy出来的，只有"),a("code",[s._v("zoo.cfg")]),s._v("（核心）文件做了改变。")]),s._v(" "),a("h4",{attrs:{id:"创建zookeeper的临时容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建zookeeper的临时容器"}},[s._v("#")]),s._v(" 创建zookeeper的临时容器")]),s._v(" "),a("p",[s._v("用以生成配置文件")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器关闭后会自动删除掉")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" zookeeper "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v(":2181 wurstmeister/zookeeper\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"复制zookeeper配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#复制zookeeper配置"}},[s._v("#")]),s._v(" 复制zookeeper配置")]),s._v(" "),a("p",[s._v("从容器中复制出来放到/data/docker_zookeeper/conf下，")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" zookeeper:/opt/zookeeper-3.4.13/conf/zoo.cfg /data/docker_zookeeper/conf\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" zookeeper:/opt/zookeeper-3.4.13/conf/configuration.xsl /data/docker_zookeeper/conf\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" zookeeper:/opt/zookeeper-3.4.13/conf/log4j.properties /data/docker_zookeeper/conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h4",{attrs:{id:"关闭临时容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关闭临时容器"}},[s._v("#")]),s._v(" 关闭临时容器")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" stop zookeeper\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"zoo-cfg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zoo-cfg"}},[s._v("#")]),s._v(" "),a("strong",[s._v("zoo.cfg")])]),s._v(" "),a("blockquote",[a("p",[s._v("增加了以下内容：")]),s._v(" "),a("p",[s._v("authProvider.1=org.apache.zookeeper.server.auth.SASLAuthenticationProvider")]),s._v(" "),a("p",[s._v("requireClientAuthScheme=sasl")]),s._v(" "),a("p",[s._v("jaasLoginRenew=3600000")]),s._v(" "),a("p",[s._v("zookeeper.sasl.client=true")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The number of milliseconds of each tick")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tickTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The number of ticks that the initial ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# synchronization phase can take")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("initLimit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The number of ticks that can pass between ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sending a request and getting an acknowledgement")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("syncLimit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# the directory where the snapshot is stored.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# do not use /tmp for storage, /tmp here is just ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# example sakes.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dataDir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/zookeeper-3.4.13/data\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# the port at which the clients will connect")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("clientPort")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# the maximum number of client connections.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# increase this if you need to handle more clients")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#maxClientCnxns=60")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Be sure to read the maintenance section of the ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# administrator guide before turning on autopurge.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The number of snapshots to retain in dataDir")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autopurge.snapRetainCount")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Purge task interval in hours")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# Set to "0" to disable auto purge feature')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autopurge.purgeInterval")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 开启SASl关键配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("authProvider.1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.apache.zookeeper.server.auth.SASLAuthenticationProvider\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("requireClientAuthScheme")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("sasl\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("jaasLoginRenew")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600000")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("zookeeper.sasl.client")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br")])]),a("h4",{attrs:{id:"configuration-xsl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration-xsl"}},[s._v("#")]),s._v(" "),a("strong",[s._v("configuration.xsl")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("?xml "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')]),s._v("?"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("xsl:stylesheet xmlns:xsl"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.w3.org/1999/XSL/Transform"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("xsl:output "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("method")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"html"')]),s._v("/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("xsl:template "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("match")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"configuration"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("body"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("table "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("border")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/td"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/td"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("description"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/td"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/tr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("xsl:for-each "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("select")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"property"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("a "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"{name}"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("xsl:value-of "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("select")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),s._v("/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/td"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("xsl:value-of "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("select")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v("/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/td"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("td"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("xsl:value-of "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("select")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"description"')]),s._v("/"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/td"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/tr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/xsl:for-each"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/table"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/body"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/html"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/xsl:template"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/xsl:stylesheet"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("h4",{attrs:{id:"log4j-properties"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#log4j-properties"}},[s._v("#")]),s._v(" "),a("strong",[s._v("log4j.properties")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Define some default values that can be overridden by system properties")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("zookeeper.root.logger")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("INFO, CONSOLE\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("zookeeper.console.threshold")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("INFO\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("zookeeper.log.dir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("zookeeper.log.file")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("zookeeper.log\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("zookeeper.log.threshold")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("DEBUG\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("zookeeper.tracelog.dir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("zookeeper.tracelog.file")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("zookeeper_trace.log\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ZooKeeper Logging Configuration")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# Format is "<default threshold> (, <appender>)+')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# DEFAULT: console appender only")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.rootLogger")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${zookeeper.root.logger}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Example with rolling log file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#log4j.rootLogger=DEBUG, CONSOLE, ROLLINGFILE")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Example with rolling log file and tracing")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#log4j.rootLogger=TRACE, CONSOLE, ROLLINGFILE, TRACEFILE")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Log INFO level and above messages to the console")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.CONSOLE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.apache.log4j.ConsoleAppender\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.CONSOLE.Threshold")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${zookeeper.console.threshold}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.CONSOLE.layout")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.apache.log4j.PatternLayout\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.CONSOLE.layout.ConversionPattern")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("%d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("ISO8601"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("myid:%X"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("myid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" - %-5p "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("%t:%C"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("@%L"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" - %m%n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Add ROLLINGFILE to rootLogger to get log file output")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    Log DEBUG level and above messages to a log file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.ROLLINGFILE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.apache.log4j.RollingFileAppender\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.ROLLINGFILE.Threshold")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${zookeeper.log.threshold}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.ROLLINGFILE.File")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${zookeeper.log.dir}")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${zookeeper.log.file}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Max log file size of 10MB")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.ROLLINGFILE.MaxFileSize")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("10MB\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# uncomment the next line to limit number of backup files")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.ROLLINGFILE.MaxBackupIndex")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.ROLLINGFILE.layout")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.apache.log4j.PatternLayout\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.ROLLINGFILE.layout.ConversionPattern")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("%d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("ISO8601"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("myid:%X"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("myid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" - %-5p "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("%t:%C"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("@%L"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" - %m%n\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Add TRACEFILE to rootLogger to get log file output")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    Log DEBUG level and above messages to a log file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.TRACEFILE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.apache.log4j.FileAppender\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.TRACEFILE.Threshold")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("TRACE\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.TRACEFILE.File")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${zookeeper.tracelog.dir}")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${zookeeper.tracelog.file}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.TRACEFILE.layout")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.apache.log4j.PatternLayout\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### Notice we are including log4j's NDC here (%x)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("log4j.appender.TRACEFILE.layout.ConversionPattern")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("%d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("ISO8601"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("myid:%X"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("myid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" - %-5p "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("%t:%C"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("@%L"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("%x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" - %m%n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br")])]),a("h3",{attrs:{id:"运行docker-compose-yml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行docker-compose-yml"}},[s._v("#")]),s._v(" "),a("strong",[s._v("运行docker-compose.yml")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" up "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_3、集群kafka-sasl用户密码验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、集群kafka-sasl用户密码验证"}},[s._v("#")]),s._v(" 3、集群kafka+SASL用户密码验证")]),s._v(" "),a("p",[s._v("步骤与单机kafka+SASL用户密码验证+内外网分流都是一样，但是docker-compose.yml不同")]),s._v(" "),a("h3",{attrs:{id:"docker-compose-yml-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-yml-2"}},[s._v("#")]),s._v(" "),a("strong",[s._v("docker-compose.yml")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("version"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token char"}},[s._v("'3'")]),s._v("\nservices"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  zookeeper"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    image"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" wurstmeister"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper\n    container_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" zookeeper\n    hostname"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" zookeeper\n    volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker_zookeeper"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.4")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".13")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker_zookeeper"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.4")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".13")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker_zookeeper"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("secrets"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.4")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".13")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("secrets"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n    environment"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ZOOKEEPER_CLIENT_PORT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ZOOKEEPER_TICK_TIME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SERVER_JVMFLAGS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Djava")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("security"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("login"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zookeeper"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.4")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".13")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("secrets"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("server_jaas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n    ports"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("\n    restart"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" always\n    privileged"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n  kafka1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    image"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" wurstmeister"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kafka\n    container_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" kafka_1\n    hostname"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" kafka_1\n    depends_on"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" zookeeper\n    ports"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"9092:9092"')]),s._v("\n    volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker_kafka1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kafka\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker_kafka1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("secrets"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kafka"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("secrets"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sock"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sock\n    environment"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_BROKER_ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  \n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_NUM_PARTITIONS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_DEFAULT_REPLICATION_FACTOR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_ZOOKEEPER_CONNECT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" zookeeper"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_LISTENERS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SASL_PLAINTEXT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9092")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_ADVERTISED_LISTENERS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SASL_PLAINTEXT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("ip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9092")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_SECURITY_INTER_BROKER_PROTOCOL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SASL_PLAINTEXT")]),s._v("\t  \n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_SASL_MECHANISM_INTER_BROKER_PROTOCOL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PLAIN")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_SASL_ENABLED_MECHANISMS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PLAIN")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_AUTHORIZER_CLASS_NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("security"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("SimpleAclAuthorizer")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_SUPER_USERS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("admin\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_ALLOW_EVERYONE_IF_NO_ACL_FOUND")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_OPTS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Djava")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("security"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("login"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kafka"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("secrets"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("server_jaas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n    restart"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" always\n    privileged"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n  kafka2"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    image"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" wurstmeister"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kafka\n    container_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" kafka_2\n    hostname"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" kafka_2\n    depends_on"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" zookeeper\n    ports"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"9093:9092"')]),s._v("\n    volumes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker_kafka2"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kafka\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker_kafka2"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("secrets"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kafka"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("secrets"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sock"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("docker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sock\n    environment"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_BROKER_ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  \n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_NUM_PARTITIONS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_DEFAULT_REPLICATION_FACTOR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_ZOOKEEPER_CONNECT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" zookeeper"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2181")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_LISTENERS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SASL_PLAINTEXT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9092")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_ADVERTISED_LISTENERS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SASL_PLAINTEXT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("ip"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9093")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_SECURITY_INTER_BROKER_PROTOCOL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SASL_PLAINTEXT")]),s._v("\t  \n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_SASL_MECHANISM_INTER_BROKER_PROTOCOL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PLAIN")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_SASL_ENABLED_MECHANISMS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PLAIN")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_AUTHORIZER_CLASS_NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("kafka"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("security"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),s._v("SimpleAclAuthorizer")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_SUPER_USERS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("admin\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_ALLOW_EVERYONE_IF_NO_ACL_FOUND")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KAFKA_OPTS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Djava")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("security"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("login"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("opt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("kafka"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("secrets"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("server_jaas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n    restart"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" always\n    privileged"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br")])]),a("blockquote",[a("p",[s._v("注意替换{ip}为正确的ip地址")])])])}),[],!1,null,null,null);a.default=r.exports}}]);