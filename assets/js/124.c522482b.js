(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{454:function(s,a,t){"use strict";t.r(a);var e=t(8),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"安装logstash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装logstash"}},[s._v("#")]),s._v(" 安装logstash")]),s._v(" "),a("h3",{attrs:{id:"步骤1-拉取-logstash-镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤1-拉取-logstash-镜像"}},[s._v("#")]),s._v(" "),a("strong",[s._v("步骤1：拉取 Logstash 镜像")])]),s._v(" "),a("p",[s._v("首先，你需要从 Docker Hub 上下载 Logstash 的 Docker 镜像。你可以通过下面的命令来完成这个步骤：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull docker.elastic.co/logstash/logstash:7.10.1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在这里，"),a("code",[s._v("7.10.0")]),s._v(" 是 Logstash 的版本号，你可以根据需要替换为其他版本号。")]),s._v(" "),a("h3",{attrs:{id:"步骤2-运行-logstash-容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤2-运行-logstash-容器"}},[s._v("#")]),s._v(" "),a("strong",[s._v("步骤2：运行 Logstash 容器")])]),s._v(" "),a("p",[s._v("接下来，你需要创建并运行一个 Logstash 容器。你可以通过下面的命令来完成这个步骤：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" logstash "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5044")]),s._v(":5044 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9600")]),s._v(":9600 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ES_JAVA_OPTS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Duser.timezone=Asia/Shanghai"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/docker/logstash_backup/logstash/config:/usr/share/logstash/config "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/docker/logstash_backup/logstash/data:/usr/share/logstash/data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/docker/logstash_backup/logstash/logstash/pipeline:/usr/share/logstash/pipeline "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" logstash:7.10.1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("docker run")]),s._v(": 这是 Docker 的一个命令，用于创建并运行一个新的 Docker 容器。")]),s._v(" "),a("li",[a("code",[s._v("--name logstash")]),s._v(": 这个参数为新的 Docker 容器指定了一个名字，这里我们将其命名为 "),a("code",[s._v("logstash")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("--restart=always")]),s._v(": 这个参数指定了 Docker 容器的重启策略为 "),a("code",[s._v("always")]),s._v("，这意味着只要容器退出就会自动重启它，无论退出代码是什么。")]),s._v(" "),a("li",[a("code",[s._v("-p 5044:5044 -p 9600:9600")]),s._v(": 这些参数将容器的 5044 和 9600 端口分别映射到宿主机的 5044 和 9600 端口。这样你就可以通过访问宿主机的这两个端口来访问 Logstash。")]),s._v(" "),a("li",[a("code",[s._v('-e ES_JAVA_OPTS="-Duser.timezone=Asia/Shanghai"')]),s._v(": 这个参数设置了一个环境变量 "),a("code",[s._v("ES_JAVA_OPTS")]),s._v("，这个环境变量用于设置 Elasticsearch 的 JVM 选项。在这个例子中，我们设置了 JVM 的用户时区为 "),a("code",[s._v("Asia/Shanghai")]),s._v("。")]),s._v(" "),a("li",[a("code",[s._v("-v /home/docker/logstash_backup/logstash/config:/usr/share/logstash/config")]),s._v(": 这个参数将宿主机的 "),a("code",[s._v("/home/docker/logstash_backup/logstash/config")]),s._v(" 目录挂载到了容器的 "),a("code",[s._v("/usr/share/logstash/config")]),s._v(" 目录。这样你就可以直接在宿主机上编辑 Logstash 的配置文件。")]),s._v(" "),a("li",[a("code",[s._v("-v /home/docker/logstash_backup/logstash/data:/usr/share/logstash/data")]),s._v(": 这个参数将宿主机的 "),a("code",[s._v("/home/docker/logstash_backup/logstash/data")]),s._v(" 目录挂载到了容器的 "),a("code",[s._v("/usr/share/logstash/data")]),s._v(" 目录。这样 Logstash 的数据将会被保存在宿主机上，这对于数据的持久化非常有用。")]),s._v(" "),a("li",[a("code",[s._v("-v /home/docker/logstash_backup/logstash/logstash/pipeline:/usr/share/logstash/pipeline")]),s._v(": 这个参数将宿主机的 "),a("code",[s._v("/home/docker/logstash_backup/logstash/logstash/pipeline")]),s._v(" 目录挂载到了容器的 "),a("code",[s._v("/usr/share/logstash/pipeline")]),s._v(" 目录。这样你就可以直接在宿主机上编辑 Logstash 的 pipeline 文件。")]),s._v(" "),a("li",[a("code",[s._v("-d logstash:7.10.1")]),s._v(": "),a("code",[s._v("-d")]),s._v(" 参数让 Docker 在后台运行这个容器，"),a("code",[s._v("logstash:7.10.1")]),s._v(" 是 Docker 镜像的名字和标签，这里我们使用的是 Logstash 7.10.1 的 Docker 镜像。")])]),s._v(" "),a("h3",{attrs:{id:"步骤3-配置-logstash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤3-配置-logstash"}},[s._v("#")]),s._v(" "),a("strong",[s._v("步骤3：配置 Logstash")])]),s._v(" "),a("p",[s._v("这个步骤依赖于你的具体需求，因为 Logstash 的配置取决于你想要处理的日志格式和来源，以及你想要如何处理和存储这些日志。")]),s._v(" "),a("p",[s._v("在你的 Logstash 配置文件中，你可以定义输入插件、过滤器插件和输出插件，来控制 Logstash 如何收集、处理和存储日志。")])])}),[],!1,null,null,null);a.default=r.exports}}]);