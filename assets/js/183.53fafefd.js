(window.webpackJsonp=window.webpackJsonp||[]).push([[183],{513:function(a,t,e){"use strict";e.r(t);var n=e(8),s=Object(n.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"遇到的问题以及解决办法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#遇到的问题以及解决办法"}},[a._v("#")]),a._v(" 遇到的问题以及解决办法")]),a._v(" "),t("h3",{attrs:{id:"问题1-canalclientexception-微服务连接不上windows上的canal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题1-canalclientexception-微服务连接不上windows上的canal"}},[a._v("#")]),a._v(" 问题1：CanalClientException: 微服务连接不上windows上的canal")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("CanalClientException: java.io.IOException: end of stream when reading header\n\ndefined in com.xpand.starter.canal.config.CanalClientConfiguration: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.xpand.starter.canal.client.CanalClient]: Factory method 'canalClient' threw exception; nested exception is com.alibaba.otter.canal.protocol.exception.CanalClientException: java.io.IOException: end of stream when reading header\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("经过检查是主机IP和端口错误。")]),a._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("解决办法")]),a._v(" "),t("p",[a._v("去canal的安装目录下，logs>>canal下的canal日志文件里面查找 IP和端口号start the canal server[xx.xx.xx.xx():11111]，端口号为11111在微服务的配置文件里面用上面的IP和端口号，问题解决")])]),a._v(" "),t("h3",{attrs:{id:"问题2-java-util-nosuchelementexception"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题2-java-util-nosuchelementexception"}},[a._v("#")]),a._v(" 问题2：java.util.NoSuchElementException")]),a._v(" "),t("p",[a._v("没有找到对应字段导致")]),a._v(" "),t("p",[a._v("检查下canal配置文件中的字段是否在es mapping中有对应的，大小写是否一致，是否有遗漏")]),a._v(" "),t("p",[a._v("因为我的操作是mysql同步至es，所以这里说明几项容易出错的地方：")]),a._v(" "),t("p",[a._v("1、canal配置文件中的sql中是否大小写一致，canal是区分大小写的")]),a._v(" "),t("p",[a._v("2、sql中设置的别名是否与es mappings中的名称一致，允许es中的部分字段为空，但是不允许sql中查询出来的字段在es mappings中找不到对应的字段")]),a._v(" "),t("p",[a._v("3、canal配置文件中的dataSourceKey是否正确，其对应到canal application.yml配置文件中的数据库是否正确")]),a._v(" "),t("h3",{attrs:{id:"问题3-adapter启动报错"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题3-adapter启动报错"}},[a._v("#")]),a._v(" 问题3：adapter启动报错")]),a._v(" "),t("p",[a._v("adapter启动报错：something goes wrong when starting up the canal client adapters: java.lang.NullPointerException: null")]),a._v(" "),t("p",[a._v("1、这个报错是空指针报错，很明显是哪里获取为空的，这种错误没有固定的原因，但大概率上可以锁定配置文件的问题")]),a._v(" "),t("p",[a._v("2、也有可能是你没开启日志的时候，mysql中已经有数据了，这时就出现了问题，所以在同步的时候，要么mysql和es中的数据都是空，要么mysql和es的数据是一样的")])])}),[],!1,null,null,null);t.default=s.exports}}]);