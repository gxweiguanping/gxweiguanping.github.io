(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{438:function(e,s,r){"use strict";r.r(s);var t=r(8),a=Object(t.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"docker安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[e._v("#")]),e._v(" docker安装")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://vuepress.mirror.docker-practice.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker文档官网地址"),s("OutboundLink")],1)]),e._v(" "),s("ul",[s("li",[s("p",[e._v("所有平台通用安装(bash方式）")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ curl -fsSL get.docker.com -o get-docker.sh\n$ sudo sh get-docker.sh --mirror Aliyun\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])])]),e._v(" "),s("li",[s("p",[e._v("启动docker")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo systemctl enable docker  #开机自启\n$ sudo systemctl start docker   #启动docker\n$ sudo systemctl restart docker   #重启docker\n$ sudo systemctl stop docker   #停止docker\n$ sudo systemctl status docker   #查看docker状态\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])])]),e._v(" "),s("li",[s("p",[e._v("默认情况下，"),s("code",[e._v("docker")]),e._v(" 命令会使用 "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Unix_domain_socket",target:"_blank",rel:"noopener noreferrer"}},[e._v("Unix socket (opens new window)"),s("OutboundLink")],1),e._v("与 Docker 引擎通讯。而只有 "),s("code",[e._v("root")]),e._v(" 用户和 "),s("code",[e._v("docker")]),e._v(" 组的用户才可以访问 Docker 引擎的 Unix socket。出于安全考虑，一般 Linux 系统上不会直接使用 "),s("code",[e._v("root")]),e._v(" 用户。因此，更好地做法是将需要使用 "),s("code",[e._v("docker")]),e._v(" 的用户加入 "),s("code",[e._v("docker")]),e._v(" 用户组。")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ sudo groupadd docker  #创建一个docker组\n$ sudo usermod -aG docker $USER #将当前用户加入组\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])])]),e._v(" "),s("li",[s("p",[e._v("配置加速镜像")]),e._v(" "),s("p",[e._v("目前主流 Linux 发行版均已使用 "),s("a",{attrs:{href:"https://systemd.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("systemd (opens new window)"),s("OutboundLink")],1),e._v("进行服务管理，这里介绍如何在使用 systemd 的 Linux 发行版中配置镜像加速器。")]),e._v(" "),s("p",[e._v("1、请首先执行以下命令，查看是否在 "),s("code",[e._v("docker.service")]),e._v(" 文件中配置过镜像地址。")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ systemctl cat docker | grep '\\-\\-registry\\-mirror'\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("2、如果该命令有输出，那么请执行 "),s("code",[e._v("$ systemctl cat docker")]),e._v(" 查看 "),s("code",[e._v("ExecStart=")]),e._v(" 出现的位置，修改对应的文件内容去掉 "),s("code",[e._v("--registry-mirror")]),e._v(" 参数及其值，并按接下来的步骤进行配置。")]),e._v(" "),s("p",[e._v("3、如果以上命令没有任何输出，那么就可以在 "),s("code",[e._v("/etc/docker/daemon.json")]),e._v(" 中写入如下内容（如果文件不存在请新建该文件）：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('{\n  "registry-mirrors": [\n    "https://hub-mirror.c.163.com",\n    "https://mirror.baidubce.com"\n  ]\n}\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br")])]),s("blockquote",[s("p",[e._v("注意，一定要保证该文件符合 json 规范，否则 Docker 将不能启动。")])]),e._v(" "),s("p",[e._v("4、重新启动服务。")]),e._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" systemctl daemon-reload\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" systemctl restart "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v("\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])])])]),e._v(" "),s("p",[e._v("​       5、查看镜像是否配置成功")]),e._v(" "),s("p",[e._v("​       执行 "),s("code",[e._v("$ docker info")]),e._v("，如果从结果中看到了如下内容，说明配置成功。")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/studentgitee/note-picture/raw/master/image-20210902115057612.png",alt:"image-20210902115057612"}})])])}),[],!1,null,null,null);s.default=a.exports}}]);