(window.webpackJsonp=window.webpackJsonp||[]).push([[181],{511:function(a,s,t){"use strict";t.r(s);var n=t(8),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"安装服务端-canal-deployer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装服务端-canal-deployer"}},[a._v("#")]),a._v(" 安装服务端 canal-deployer")]),a._v(" "),s("p",[a._v("canal官方提供了一些配置指导，包括mysql同步mysql、mq、es的配置，要擅用"),s("a",{attrs:{href:"https://github.com/alibaba/canal/wiki",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方指南"),s("OutboundLink")],1)]),a._v(" "),s("h3",{attrs:{id:"_1、解压"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、解压"}},[a._v("#")]),a._v(" 1、解压")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("tar -zxvf canal.deployer-1.1.5.tar.gz\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"_2、修改配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、修改配置文件"}},[a._v("#")]),a._v(" 2、修改配置文件")]),a._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("vi conf"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("example"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("properties\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("修改内容:\n设置数据库地址，账号和密码设置为上述创建的专用账号canal")]),a._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("##################################################\n## slaveId只需要跟mysql的不一致就可以，在同一局域网内要唯一\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("mysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("slaveId"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("903")]),a._v("\n\n# enable gtid use "),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),a._v("\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("gtidon"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),a._v("\n\n# position info，address是我们要连接的mysql数据库"),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("IP")]),a._v("和端口\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("address"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".1")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".29")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3310")]),a._v("\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("journal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("position"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("timestamp"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("gtid"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n\n# rds oss binlog\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("rds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("accesskey"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("rds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("secretkey"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("rds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instanceId"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n\n# table meta tsdb info\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tsdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("enable"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tsdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("url"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("jdbc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("mysql"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".0")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3306")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("canal_tsdb\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tsdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("dbUsername"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("canal\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tsdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("dbPassword"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("canal\n\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("standby"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("address "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("standby"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("journal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("standby"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("position "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("standby"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("timestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("standby"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("gtid"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n\n# username"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("password这里要改成我们需要连接的数据的账号密码\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("dbUsername"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("canal\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("dbPassword"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("canal\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("connectionCharset "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("UTF")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v("\n# enable druid Decrypt database password\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("enableDruid"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),a._v("\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("pwdPublicKey"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBALK4BUxdDltRRE5"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("zXpVEVPUgunvscYFtEip3pmLlhrWpacX7y7GCMo2"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("JM6LeHmiiNdH1FWgGCpUfircSwlWKUCAwEAAQ"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v("\n\n# table regex\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("filter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("regex"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("\\\\"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("\n# table black regex\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("filter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("black"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("regex"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mysql\\\\"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("slave_"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("\n# table field "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("format"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" schema1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tableName1"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("field1"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("field2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("schema2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tableName2"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("field1"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("field2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("filter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("field"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("test1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("t_product"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("subject"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("keywords"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("test2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("t_company"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("contact"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("ch\n# table field black "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("format"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" schema1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tableName1"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("field1"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("field2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("schema2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tableName2"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("field1"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("field2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("filter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("black"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("field"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("test1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("t_product"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("subject"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("product_image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("test2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("t_company"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("contact"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("ch\n\n# mq config\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("mq"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("topic"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("example\n# dynamic topic route by schema or table regex\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("mq"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("dynamicTopic"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mytest1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("mytest2\\\\"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("\\\\"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("mq"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("partition"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n# hash partition config\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("mq"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("partitionsNum"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v("\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("mq"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("partitionHash"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("table"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("^")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("\\\\"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("\n#canal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("mq"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("dynamicTopicPartitionNum"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("mycanal")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v("\n#################################################\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br"),s("span",{staticClass:"line-number"},[a._v("28")]),s("br"),s("span",{staticClass:"line-number"},[a._v("29")]),s("br"),s("span",{staticClass:"line-number"},[a._v("30")]),s("br"),s("span",{staticClass:"line-number"},[a._v("31")]),s("br"),s("span",{staticClass:"line-number"},[a._v("32")]),s("br"),s("span",{staticClass:"line-number"},[a._v("33")]),s("br"),s("span",{staticClass:"line-number"},[a._v("34")]),s("br"),s("span",{staticClass:"line-number"},[a._v("35")]),s("br"),s("span",{staticClass:"line-number"},[a._v("36")]),s("br"),s("span",{staticClass:"line-number"},[a._v("37")]),s("br"),s("span",{staticClass:"line-number"},[a._v("38")]),s("br"),s("span",{staticClass:"line-number"},[a._v("39")]),s("br"),s("span",{staticClass:"line-number"},[a._v("40")]),s("br"),s("span",{staticClass:"line-number"},[a._v("41")]),s("br"),s("span",{staticClass:"line-number"},[a._v("42")]),s("br"),s("span",{staticClass:"line-number"},[a._v("43")]),s("br"),s("span",{staticClass:"line-number"},[a._v("44")]),s("br"),s("span",{staticClass:"line-number"},[a._v("45")]),s("br"),s("span",{staticClass:"line-number"},[a._v("46")]),s("br"),s("span",{staticClass:"line-number"},[a._v("47")]),s("br"),s("span",{staticClass:"line-number"},[a._v("48")]),s("br"),s("span",{staticClass:"line-number"},[a._v("49")]),s("br"),s("span",{staticClass:"line-number"},[a._v("50")]),s("br"),s("span",{staticClass:"line-number"},[a._v("51")]),s("br"),s("span",{staticClass:"line-number"},[a._v("52")]),s("br"),s("span",{staticClass:"line-number"},[a._v("53")]),s("br"),s("span",{staticClass:"line-number"},[a._v("54")]),s("br"),s("span",{staticClass:"line-number"},[a._v("55")]),s("br"),s("span",{staticClass:"line-number"},[a._v("56")]),s("br"),s("span",{staticClass:"line-number"},[a._v("57")]),s("br"),s("span",{staticClass:"line-number"},[a._v("58")]),s("br"),s("span",{staticClass:"line-number"},[a._v("59")]),s("br")])]),s("h3",{attrs:{id:"_3、启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、启动"}},[a._v("#")]),a._v(" "),s("strong",[a._v("3、启动")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("./bin/startup.sh\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("查看日志")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("cat logs/canal/canal.log\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("日志出现这样代表启动成功")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("2023-02-10 17:49:16.901 [main] INFO  com.alibaba.otter.canal.deployer.CanalLauncher - ## set default uncaught exception handler\n2023-02-10 17:49:17.000 [main] INFO  com.alibaba.otter.canal.deployer.CanalLauncher - ## load canal configurations\n2023-02-10 17:49:17.026 [main] INFO  com.alibaba.otter.canal.deployer.CanalStarter - ## start the canal server.\n2023-02-10 17:49:17.173 [main] INFO  com.alibaba.otter.canal.deployer.CanalController - ## start the canal server[172.17.0.1(172.17.0.1):11115]\n2023-02-10 17:49:20.159 [main] INFO  com.alibaba.otter.canal.deployer.CanalStarter - ## the canal server is running now ......\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[s("strong",[a._v("全量同步（这一步可以忽略不做）")])]),a._v(" "),s("p",[a._v("1、在conf/example/instance.properties中修改")]),a._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("# 全量同步\n\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("journal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("mysql"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("000001")]),a._v("\n\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("position"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n\n#"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2019")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("01")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("01")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("00")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("00")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("00")]),a._v(" 上一次更新的时间\ncanal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("timestamp"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1546272000000")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("p",[a._v("2、如果之前同步过，想要重新做全量同步，那么需要删除con/example/meta.dat文件，这个文件会记录上次同步的时间和binlog位置")])])}),[],!1,null,null,null);s.default=e.exports}}]);